"use strict";function t(t){return t&&"object"==typeof t&&"default"in t?t.default:t}Object.defineProperty(exports,"__esModule",{value:!0});var e=require("atom"),r=t(e),n=require("crypto"),i=t(require("path")),o=require("atom-haskell-utils"),s=require("fs"),a=t(s),c=t(require("constants")),l=t(require("assert")),u=t(require("util")),p=t(require("events")),h=t(require("os")),d=require("child_process"),f=function(t,e){return(f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};var m=function(){return(m=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function g(t,e,r,n){var i,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(o<3?i(s):o>3?i(e,r,s):i(e,r))||s);return o>3&&s&&Object.defineProperty(e,r,s),s}function v(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}var y=Object.create?function(t,e,r,n){void 0===n&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]};function b(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function w(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,i,o=r.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=o.next()).done;)s.push(n.value)}catch(t){i={error:t}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return s}function k(t){return this instanceof k?(this.v=t,this):new k(t)}var _=Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e};var x=Object.freeze({__proto__:null,__extends:function(t,e){function r(){this.constructor=t}f(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},get __assign(){return m},__rest:function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]])}return r},__decorate:g,__param:function(t,e){return function(r,n){e(r,n,t)}},__metadata:v,__awaiter:function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function s(t){try{c(n.next(t))}catch(t){o(t)}}function a(t){try{c(n.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,a)}c((n=n.apply(t,e||[])).next())}))},__generator:function(t,e){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},__createBinding:y,__exportStar:function(t,e){for(var r in t)"default"===r||e.hasOwnProperty(r)||y(e,t,r)},__values:b,__read:w,__spread:function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(w(arguments[e]));return t},__spreadArrays:function(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;var n=Array(t),i=0;for(e=0;e<r;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)n[i]=o[s];return n},__await:k,__asyncGenerator:function(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,i=r.apply(t,e||[]),o=[];return n={},s("next"),s("throw"),s("return"),n[Symbol.asyncIterator]=function(){return this},n;function s(t){i[t]&&(n[t]=function(e){return new Promise((function(r,n){o.push([t,e,r,n])>1||a(t,e)}))})}function a(t,e){try{(r=i[t](e)).value instanceof k?Promise.resolve(r.value.v).then(c,l):u(o[0][2],r)}catch(t){u(o[0][3],t)}var r}function c(t){a("next",t)}function l(t){a("throw",t)}function u(t,e){t(e),o.shift(),o.length&&a(o[0][0],o[0][1])}},__asyncDelegator:function(t){var e,r;return e={},n("next"),n("throw",(function(t){throw t})),n("return"),e[Symbol.iterator]=function(){return this},e;function n(n,i){e[n]=t[n]?function(e){return(r=!r)?{value:k(t[n](e)),done:"return"===n}:i?i(e):e}:i}},__asyncValues:function(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,r=t[Symbol.asyncIterator];return r?r.call(t):(t=b(t),e={},n("next"),n("throw"),n("return"),e[Symbol.asyncIterator]=function(){return this},e);function n(r){e[r]=t[r]&&function(e){return new Promise((function(n,i){(function(t,e,r,n){Promise.resolve(n).then((function(e){t({value:e,done:r})}),e)})(n,i,(e=t[r](e)).done,e.value)}))}}},__makeTemplateObject:function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t},__importStar:function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.hasOwnProperty.call(t,r)&&y(e,t,r);return _(e,t),e},__importDefault:function(t){return t&&t.__esModule?t:{default:t}},__classPrivateFieldGet:function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)},__classPrivateFieldSet:function(t,e,r){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,r),r}}),S="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function E(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function O(t,e,r){return t(r={path:e,exports:{},require:function(t,e){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==e&&r.path)}},r.exports),r.exports}var P=O((function(t,e){!function(){var r="object"==typeof self&&self.self===self&&self||"object"==typeof S&&S.global===S&&S||this||{},n=r._,i=Array.prototype,o=Object.prototype,s="undefined"!=typeof Symbol?Symbol.prototype:null,a=i.push,c=i.slice,l=o.toString,u=o.hasOwnProperty,p=Array.isArray,h=Object.keys,d=Object.create,f=function(){},m=function(t){return t instanceof m?t:this instanceof m?void(this._wrapped=t):new m(t)};e.nodeType?r._=m:(!t.nodeType&&t.exports&&(e=t.exports=m),e._=m),m.VERSION="1.9.2";var g,v=function(t,e,r){if(void 0===e)return t;switch(null==r?3:r){case 1:return function(r){return t.call(e,r)};case 3:return function(r,n,i){return t.call(e,r,n,i)};case 4:return function(r,n,i,o){return t.call(e,r,n,i,o)}}return function(){return t.apply(e,arguments)}},y=function(t,e,r){return m.iteratee!==g?m.iteratee(t,e):null==t?m.identity:m.isFunction(t)?v(t,e,r):m.isObject(t)&&!m.isArray(t)?m.matcher(t):m.property(t)};m.iteratee=g=function(t,e){return y(t,e,1/0)};var b=function(t,e){return e=null==e?t.length-1:+e,function(){for(var r=Math.max(arguments.length-e,0),n=Array(r),i=0;i<r;i++)n[i]=arguments[i+e];switch(e){case 0:return t.call(this,n);case 1:return t.call(this,arguments[0],n);case 2:return t.call(this,arguments[0],arguments[1],n)}var o=Array(e+1);for(i=0;i<e;i++)o[i]=arguments[i];return o[e]=n,t.apply(this,o)}},w=function(t){if(!m.isObject(t))return{};if(d)return d(t);f.prototype=t;var e=new f;return f.prototype=null,e},k=function(t){return function(e){return null==e?void 0:e[t]}},_=function(t,e){return null!=t&&u.call(t,e)},x=function(t,e){for(var r=e.length,n=0;n<r;n++){if(null==t)return;t=t[e[n]]}return r?t:void 0},E=Math.pow(2,53)-1,O=k("length"),P=function(t){var e=O(t);return"number"==typeof e&&e>=0&&e<=E};m.each=m.forEach=function(t,e,r){var n,i;if(e=v(e,r),P(t))for(n=0,i=t.length;n<i;n++)e(t[n],n,t);else{var o=m.keys(t);for(n=0,i=o.length;n<i;n++)e(t[o[n]],o[n],t)}return t},m.map=m.collect=function(t,e,r){e=y(e,r);for(var n=!P(t)&&m.keys(t),i=(n||t).length,o=Array(i),s=0;s<i;s++){var a=n?n[s]:s;o[s]=e(t[a],a,t)}return o};var M=function(t){var e=function(e,r,n,i){var o=!P(e)&&m.keys(e),s=(o||e).length,a=t>0?0:s-1;for(i||(n=e[o?o[a]:a],a+=t);a>=0&&a<s;a+=t){var c=o?o[a]:a;n=r(n,e[c],c,e)}return n};return function(t,r,n,i){var o=arguments.length>=3;return e(t,v(r,i,4),n,o)}};m.reduce=m.foldl=m.inject=M(1),m.reduceRight=m.foldr=M(-1),m.find=m.detect=function(t,e,r){var n=(P(t)?m.findIndex:m.findKey)(t,e,r);if(void 0!==n&&-1!==n)return t[n]},m.filter=m.select=function(t,e,r){var n=[];return e=y(e,r),m.each(t,(function(t,r,i){e(t,r,i)&&n.push(t)})),n},m.reject=function(t,e,r){return m.filter(t,m.negate(y(e)),r)},m.every=m.all=function(t,e,r){e=y(e,r);for(var n=!P(t)&&m.keys(t),i=(n||t).length,o=0;o<i;o++){var s=n?n[o]:o;if(!e(t[s],s,t))return!1}return!0},m.some=m.any=function(t,e,r){e=y(e,r);for(var n=!P(t)&&m.keys(t),i=(n||t).length,o=0;o<i;o++){var s=n?n[o]:o;if(e(t[s],s,t))return!0}return!1},m.contains=m.includes=m.include=function(t,e,r,n){return P(t)||(t=m.values(t)),("number"!=typeof r||n)&&(r=0),m.indexOf(t,e,r)>=0},m.invoke=b((function(t,e,r){var n,i;return m.isFunction(e)?i=e:m.isArray(e)&&(n=e.slice(0,-1),e=e[e.length-1]),m.map(t,(function(t){var o=i;if(!o){if(n&&n.length&&(t=x(t,n)),null==t)return;o=t[e]}return null==o?o:o.apply(t,r)}))})),m.pluck=function(t,e){return m.map(t,m.property(e))},m.where=function(t,e){return m.filter(t,m.matcher(e))},m.findWhere=function(t,e){return m.find(t,m.matcher(e))},m.max=function(t,e,r){var n,i,o=-1/0,s=-1/0;if(null==e||"number"==typeof e&&"object"!=typeof t[0]&&null!=t)for(var a=0,c=(t=P(t)?t:m.values(t)).length;a<c;a++)null!=(n=t[a])&&n>o&&(o=n);else e=y(e,r),m.each(t,(function(t,r,n){((i=e(t,r,n))>s||i===-1/0&&o===-1/0)&&(o=t,s=i)}));return o},m.min=function(t,e,r){var n,i,o=1/0,s=1/0;if(null==e||"number"==typeof e&&"object"!=typeof t[0]&&null!=t)for(var a=0,c=(t=P(t)?t:m.values(t)).length;a<c;a++)null!=(n=t[a])&&n<o&&(o=n);else e=y(e,r),m.each(t,(function(t,r,n){((i=e(t,r,n))<s||i===1/0&&o===1/0)&&(o=t,s=i)}));return o},m.shuffle=function(t){return m.sample(t,1/0)},m.sample=function(t,e,r){if(null==e||r)return P(t)||(t=m.values(t)),t[m.random(t.length-1)];var n=P(t)?m.clone(t):m.values(t),i=O(n);e=Math.max(Math.min(e,i),0);for(var o=i-1,s=0;s<e;s++){var a=m.random(s,o),c=n[s];n[s]=n[a],n[a]=c}return n.slice(0,e)},m.sortBy=function(t,e,r){var n=0;return e=y(e,r),m.pluck(m.map(t,(function(t,r,i){return{value:t,index:n++,criteria:e(t,r,i)}})).sort((function(t,e){var r=t.criteria,n=e.criteria;if(r!==n){if(r>n||void 0===r)return 1;if(r<n||void 0===n)return-1}return t.index-e.index})),"value")};var A=function(t,e){return function(r,n,i){var o=e?[[],[]]:{};return n=y(n,i),m.each(r,(function(e,i){var s=n(e,i,r);t(o,e,s)})),o}};m.groupBy=A((function(t,e,r){_(t,r)?t[r].push(e):t[r]=[e]})),m.indexBy=A((function(t,e,r){t[r]=e})),m.countBy=A((function(t,e,r){_(t,r)?t[r]++:t[r]=1}));var j=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;m.toArray=function(t){return t?m.isArray(t)?c.call(t):m.isString(t)?t.match(j):P(t)?m.map(t,m.identity):m.values(t):[]},m.size=function(t){return null==t?0:P(t)?t.length:m.keys(t).length},m.partition=A((function(t,e,r){t[r?0:1].push(e)}),!0),m.first=m.head=m.take=function(t,e,r){return null==t||t.length<1?null==e?void 0:[]:null==e||r?t[0]:m.initial(t,t.length-e)},m.initial=function(t,e,r){return c.call(t,0,Math.max(0,t.length-(null==e||r?1:e)))},m.last=function(t,e,r){return null==t||t.length<1?null==e?void 0:[]:null==e||r?t[t.length-1]:m.rest(t,Math.max(0,t.length-e))},m.rest=m.tail=m.drop=function(t,e,r){return c.call(t,null==e||r?1:e)},m.compact=function(t){return m.filter(t,Boolean)};var T=function(t,e,r,n){for(var i=(n=n||[]).length,o=0,s=O(t);o<s;o++){var a=t[o];if(P(a)&&(m.isArray(a)||m.isArguments(a)))if(e)for(var c=0,l=a.length;c<l;)n[i++]=a[c++];else T(a,e,r,n),i=n.length;else r||(n[i++]=a)}return n};m.flatten=function(t,e){return T(t,e,!1)},m.without=b((function(t,e){return m.difference(t,e)})),m.uniq=m.unique=function(t,e,r,n){m.isBoolean(e)||(n=r,r=e,e=!1),null!=r&&(r=y(r,n));for(var i=[],o=[],s=0,a=O(t);s<a;s++){var c=t[s],l=r?r(c,s,t):c;e&&!r?(s&&o===l||i.push(c),o=l):r?m.contains(o,l)||(o.push(l),i.push(c)):m.contains(i,c)||i.push(c)}return i},m.union=b((function(t){return m.uniq(T(t,!0,!0))})),m.intersection=function(t){for(var e=[],r=arguments.length,n=0,i=O(t);n<i;n++){var o=t[n];if(!m.contains(e,o)){var s;for(s=1;s<r&&m.contains(arguments[s],o);s++);s===r&&e.push(o)}}return e},m.difference=b((function(t,e){return e=T(e,!0,!0),m.filter(t,(function(t){return!m.contains(e,t)}))})),m.unzip=function(t){for(var e=t&&m.max(t,O).length||0,r=Array(e),n=0;n<e;n++)r[n]=m.pluck(t,n);return r},m.zip=b(m.unzip),m.object=function(t,e){for(var r={},n=0,i=O(t);n<i;n++)e?r[t[n]]=e[n]:r[t[n][0]]=t[n][1];return r};var C=function(t){return function(e,r,n){r=y(r,n);for(var i=O(e),o=t>0?0:i-1;o>=0&&o<i;o+=t)if(r(e[o],o,e))return o;return-1}};m.findIndex=C(1),m.findLastIndex=C(-1),m.sortedIndex=function(t,e,r,n){for(var i=(r=y(r,n,1))(e),o=0,s=O(t);o<s;){var a=Math.floor((o+s)/2);r(t[a])<i?o=a+1:s=a}return o};var D=function(t,e,r){return function(n,i,o){var s=0,a=O(n);if("number"==typeof o)t>0?s=o>=0?o:Math.max(o+a,s):a=o>=0?Math.min(o+1,a):o+a+1;else if(r&&o&&a)return n[o=r(n,i)]===i?o:-1;if(i!=i)return(o=e(c.call(n,s,a),m.isNaN))>=0?o+s:-1;for(o=t>0?s:a-1;o>=0&&o<a;o+=t)if(n[o]===i)return o;return-1}};m.indexOf=D(1,m.findIndex,m.sortedIndex),m.lastIndexOf=D(-1,m.findLastIndex),m.range=function(t,e,r){null==e&&(e=t||0,t=0),r||(r=e<t?-1:1);for(var n=Math.max(Math.ceil((e-t)/r),0),i=Array(n),o=0;o<n;o++,t+=r)i[o]=t;return i},m.chunk=function(t,e){if(null==e||e<1)return[];for(var r=[],n=0,i=t.length;n<i;)r.push(c.call(t,n,n+=e));return r};var I=function(t,e,r,n,i){if(!(n instanceof e))return t.apply(r,i);var o=w(t.prototype),s=t.apply(o,i);return m.isObject(s)?s:o};m.bind=b((function(t,e,r){if(!m.isFunction(t))throw new TypeError("Bind must be called on a function");var n=b((function(i){return I(t,n,e,this,r.concat(i))}));return n})),m.partial=b((function(t,e){var r=m.partial.placeholder,n=function(){for(var i=0,o=e.length,s=Array(o),a=0;a<o;a++)s[a]=e[a]===r?arguments[i++]:e[a];for(;i<arguments.length;)s.push(arguments[i++]);return I(t,n,this,this,s)};return n})),m.partial.placeholder=m,m.bindAll=b((function(t,e){var r=(e=T(e,!1,!1)).length;if(r<1)throw new Error("bindAll must be passed function names");for(;r--;){var n=e[r];t[n]=m.bind(t[n],t)}})),m.memoize=function(t,e){var r=function(n){var i=r.cache,o=""+(e?e.apply(this,arguments):n);return _(i,o)||(i[o]=t.apply(this,arguments)),i[o]};return r.cache={},r},m.delay=b((function(t,e,r){return setTimeout((function(){return t.apply(null,r)}),e)})),m.defer=m.partial(m.delay,m,1),m.throttle=function(t,e,r){var n,i,o,s,a=0;r||(r={});var c=function(){a=!1===r.leading?0:m.now(),n=null,s=t.apply(i,o),n||(i=o=null)},l=function(){var l=m.now();a||!1!==r.leading||(a=l);var u=e-(l-a);return i=this,o=arguments,u<=0||u>e?(n&&(clearTimeout(n),n=null),a=l,s=t.apply(i,o),n||(i=o=null)):n||!1===r.trailing||(n=setTimeout(c,u)),s};return l.cancel=function(){clearTimeout(n),a=0,n=i=o=null},l},m.debounce=function(t,e,r){var n,i,o=function(e,r){n=null,r&&(i=t.apply(e,r))},s=b((function(s){if(n&&clearTimeout(n),r){var a=!n;n=setTimeout(o,e),a&&(i=t.apply(this,s))}else n=m.delay(o,e,this,s);return i}));return s.cancel=function(){clearTimeout(n),n=null},s},m.wrap=function(t,e){return m.partial(e,t)},m.negate=function(t){return function(){return!t.apply(this,arguments)}},m.compose=function(){var t=arguments,e=t.length-1;return function(){for(var r=e,n=t[e].apply(this,arguments);r--;)n=t[r].call(this,n);return n}},m.after=function(t,e){return function(){if(--t<1)return e.apply(this,arguments)}},m.before=function(t,e){var r;return function(){return--t>0&&(r=e.apply(this,arguments)),t<=1&&(e=null),r}},m.once=m.partial(m.before,2),m.restArguments=b;var N=!{toString:null}.propertyIsEnumerable("toString"),R=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],L=function(t,e){var r=R.length,n=t.constructor,i=m.isFunction(n)&&n.prototype||o,s="constructor";for(_(t,s)&&!m.contains(e,s)&&e.push(s);r--;)(s=R[r])in t&&t[s]!==i[s]&&!m.contains(e,s)&&e.push(s)};m.keys=function(t){if(!m.isObject(t))return[];if(h)return h(t);var e=[];for(var r in t)_(t,r)&&e.push(r);return N&&L(t,e),e},m.allKeys=function(t){if(!m.isObject(t))return[];var e=[];for(var r in t)e.push(r);return N&&L(t,e),e},m.values=function(t){for(var e=m.keys(t),r=e.length,n=Array(r),i=0;i<r;i++)n[i]=t[e[i]];return n},m.mapObject=function(t,e,r){e=y(e,r);for(var n=m.keys(t),i=n.length,o={},s=0;s<i;s++){var a=n[s];o[a]=e(t[a],a,t)}return o},m.pairs=function(t){for(var e=m.keys(t),r=e.length,n=Array(r),i=0;i<r;i++)n[i]=[e[i],t[e[i]]];return n},m.invert=function(t){for(var e={},r=m.keys(t),n=0,i=r.length;n<i;n++)e[t[r[n]]]=r[n];return e},m.functions=m.methods=function(t){var e=[];for(var r in t)m.isFunction(t[r])&&e.push(r);return e.sort()};var F=function(t,e){return function(r){var n=arguments.length;if(e&&(r=Object(r)),n<2||null==r)return r;for(var i=1;i<n;i++)for(var o=arguments[i],s=t(o),a=s.length,c=0;c<a;c++){var l=s[c];e&&void 0!==r[l]||(r[l]=o[l])}return r}};m.extend=F(m.allKeys),m.extendOwn=m.assign=F(m.keys),m.findKey=function(t,e,r){e=y(e,r);for(var n,i=m.keys(t),o=0,s=i.length;o<s;o++)if(e(t[n=i[o]],n,t))return n};var B,U,z=function(t,e,r){return e in r};m.pick=b((function(t,e){var r={},n=e[0];if(null==t)return r;m.isFunction(n)?(e.length>1&&(n=v(n,e[1])),e=m.allKeys(t)):(n=z,e=T(e,!1,!1),t=Object(t));for(var i=0,o=e.length;i<o;i++){var s=e[i],a=t[s];n(a,s,t)&&(r[s]=a)}return r})),m.omit=b((function(t,e){var r,n=e[0];return m.isFunction(n)?(n=m.negate(n),e.length>1&&(r=e[1])):(e=m.map(T(e,!1,!1),String),n=function(t,r){return!m.contains(e,r)}),m.pick(t,n,r)})),m.defaults=F(m.allKeys,!0),m.create=function(t,e){var r=w(t);return e&&m.extendOwn(r,e),r},m.clone=function(t){return m.isObject(t)?m.isArray(t)?t.slice():m.extend({},t):t},m.tap=function(t,e){return e(t),t},m.isMatch=function(t,e){var r=m.keys(e),n=r.length;if(null==t)return!n;for(var i=Object(t),o=0;o<n;o++){var s=r[o];if(e[s]!==i[s]||!(s in i))return!1}return!0},B=function(t,e,r,n){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return!1;if(t!=t)return e!=e;var i=typeof t;return("function"===i||"object"===i||"object"==typeof e)&&U(t,e,r,n)},U=function(t,e,r,n){t instanceof m&&(t=t._wrapped),e instanceof m&&(e=e._wrapped);var i=l.call(t);if(i!==l.call(e))return!1;switch(i){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return+t!=+t?+e!=+e:0==+t?1/+t==1/e:+t==+e;case"[object Date]":case"[object Boolean]":return+t==+e;case"[object Symbol]":return s.valueOf.call(t)===s.valueOf.call(e)}var o="[object Array]"===i;if(!o){if("object"!=typeof t||"object"!=typeof e)return!1;var a=t.constructor,c=e.constructor;if(a!==c&&!(m.isFunction(a)&&a instanceof a&&m.isFunction(c)&&c instanceof c)&&"constructor"in t&&"constructor"in e)return!1}n=n||[];for(var u=(r=r||[]).length;u--;)if(r[u]===t)return n[u]===e;if(r.push(t),n.push(e),o){if((u=t.length)!==e.length)return!1;for(;u--;)if(!B(t[u],e[u],r,n))return!1}else{var p,h=m.keys(t);if(u=h.length,m.keys(e).length!==u)return!1;for(;u--;)if(p=h[u],!_(e,p)||!B(t[p],e[p],r,n))return!1}return r.pop(),n.pop(),!0},m.isEqual=function(t,e){return B(t,e)},m.isEmpty=function(t){return null==t||(P(t)&&(m.isArray(t)||m.isString(t)||m.isArguments(t))?0===t.length:0===m.keys(t).length)},m.isElement=function(t){return!(!t||1!==t.nodeType)},m.isArray=p||function(t){return"[object Array]"===l.call(t)},m.isObject=function(t){var e=typeof t;return"function"===e||"object"===e&&!!t},m.each(["Arguments","Function","String","Number","Date","RegExp","Error","Symbol","Map","WeakMap","Set","WeakSet"],(function(t){m["is"+t]=function(e){return l.call(e)==="[object "+t+"]"}})),m.isArguments(arguments)||(m.isArguments=function(t){return _(t,"callee")});var q=r.document&&r.document.childNodes;"function"!=typeof/./&&"object"!=typeof Int8Array&&"function"!=typeof q&&(m.isFunction=function(t){return"function"==typeof t||!1}),m.isFinite=function(t){return!m.isSymbol(t)&&isFinite(t)&&!isNaN(parseFloat(t))},m.isNaN=function(t){return m.isNumber(t)&&isNaN(t)},m.isBoolean=function(t){return!0===t||!1===t||"[object Boolean]"===l.call(t)},m.isNull=function(t){return null===t},m.isUndefined=function(t){return void 0===t},m.has=function(t,e){if(!m.isArray(e))return _(t,e);for(var r=e.length,n=0;n<r;n++){var i=e[n];if(null==t||!u.call(t,i))return!1;t=t[i]}return!!r},m.noConflict=function(){return r._=n,this},m.identity=function(t){return t},m.constant=function(t){return function(){return t}},m.noop=function(){},m.property=function(t){return m.isArray(t)?function(e){return x(e,t)}:k(t)},m.propertyOf=function(t){return null==t?function(){}:function(e){return m.isArray(e)?x(t,e):t[e]}},m.matcher=m.matches=function(t){return t=m.extendOwn({},t),function(e){return m.isMatch(e,t)}},m.times=function(t,e,r){var n=Array(Math.max(0,t));e=v(e,r,1);for(var i=0;i<t;i++)n[i]=e(i);return n},m.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))},m.now=Date.now||function(){return(new Date).getTime()};var $={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},V=m.invert($),G=function(t){var e=function(e){return t[e]},r="(?:"+m.keys(t).join("|")+")",n=RegExp(r),i=RegExp(r,"g");return function(t){return t=null==t?"":""+t,n.test(t)?t.replace(i,e):t}};m.escape=G($),m.unescape=G(V),m.result=function(t,e,r){m.isArray(e)||(e=[e]);var n=e.length;if(!n)return m.isFunction(r)?r.call(t):r;for(var i=0;i<n;i++){var o=null==t?void 0:t[e[i]];void 0===o&&(o=r,i=n),t=m.isFunction(o)?o.call(t):o}return t};var H=0;m.uniqueId=function(t){var e=++H+"";return t?t+e:e},m.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var W=/(.)^/,Q={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},K=/\\|'|\r|\n|\u2028|\u2029/g,X=function(t){return"\\"+Q[t]};m.template=function(t,e,r){!e&&r&&(e=r),e=m.defaults({},e,m.templateSettings);var n,i=RegExp([(e.escape||W).source,(e.interpolate||W).source,(e.evaluate||W).source].join("|")+"|$","g"),o=0,s="__p+='";t.replace(i,(function(e,r,n,i,a){return s+=t.slice(o,a).replace(K,X),o=a+e.length,r?s+="'+\n((__t=("+r+"))==null?'':_.escape(__t))+\n'":n?s+="'+\n((__t=("+n+"))==null?'':__t)+\n'":i&&(s+="';\n"+i+"\n__p+='"),e})),s+="';\n",e.variable||(s="with(obj||{}){\n"+s+"}\n"),s="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+s+"return __p;\n";try{n=new Function(e.variable||"obj","_",s)}catch(t){throw t.source=s,t}var a=function(t){return n.call(this,t,m)},c=e.variable||"obj";return a.source="function("+c+"){\n"+s+"}",a},m.chain=function(t){var e=m(t);return e._chain=!0,e};var Y=function(t,e){return t._chain?m(e).chain():e};m.mixin=function(t){return m.each(m.functions(t),(function(e){var r=m[e]=t[e];m.prototype[e]=function(){var t=[this._wrapped];return a.apply(t,arguments),Y(this,r.apply(m,t))}})),m},m.mixin(m),m.each(["pop","push","reverse","shift","sort","splice","unshift"],(function(t){var e=i[t];m.prototype[t]=function(){var r=this._wrapped;return e.apply(r,arguments),"shift"!==t&&"splice"!==t||0!==r.length||delete r[0],Y(this,r)}})),m.each(["concat","join","slice"],(function(t){var e=i[t];m.prototype[t]=function(){return Y(this,e.apply(this._wrapped,arguments))}})),m.prototype.value=function(){return this._wrapped},m.prototype.valueOf=m.prototype.toJSON=m.prototype.value,m.prototype.toString=function(){return String(this._wrapped)}}()})),M=(P._,O((function(t,e){t.exports=function(){var t=/^v?(?:\d+)(\.(?:[x*]|\d+)(\.(?:[x*]|\d+)(\.(?:[x*]|\d+))?(?:-[\da-z\-]+(?:\.[\da-z\-]+)*)?(?:\+[\da-z\-]+(?:\.[\da-z\-]+)*)?)?)?$/i;function e(t){var e,r,n=t.replace(/^v/,"").replace(/\+.*$/,""),i=(r="-",-1===(e=n).indexOf(r)?e.length:e.indexOf(r)),o=n.substring(0,i).split(".");return o.push(n.substring(i+1)),o}function r(t){return isNaN(Number(t))?t:Number(t)}function n(e){if("string"!=typeof e)throw new TypeError("Invalid argument expected string");if(!t.test(e))throw new Error("Invalid argument not valid semver ('"+e+"' received)")}function i(t,i){[t,i].forEach(n);for(var o=e(t),s=e(i),a=0;a<Math.max(o.length-1,s.length-1);a++){var c=parseInt(o[a]||0,10),l=parseInt(s[a]||0,10);if(c>l)return 1;if(l>c)return-1}var u=o[o.length-1],p=s[s.length-1];if(u&&p){var h=u.split(".").map(r),d=p.split(".").map(r);for(a=0;a<Math.max(h.length,d.length);a++){if(void 0===h[a]||"string"==typeof d[a]&&"number"==typeof h[a])return-1;if(void 0===d[a]||"string"==typeof h[a]&&"number"==typeof d[a])return 1;if(h[a]>d[a])return 1;if(d[a]>h[a])return-1}}else if(u||p)return u?-1:1;return 0}var o=[">",">=","=","<","<="],s={">":[1],">=":[0,1],"=":[0],"<=":[-1,0],"<":[-1]};return i.validate=function(e){return"string"==typeof e&&t.test(e)},i.compare=function(t,e,r){!function(t){if("string"!=typeof t)throw new TypeError("Invalid operator type, expected string but got "+typeof t);if(-1===o.indexOf(t))throw new TypeError("Invalid operator, expected one of "+o.join("|"))}(r);var n=i(t,e);return s[r].indexOf(n)>-1},i}()})));function A(t){switch(t){case"&":return"&amp;";case'"':return"&quot;";case"'":return"&#39;";case"<":return"&lt;";case">":return"&gt;";case" ":return"&nbsp;";default:return t}}function j(t){return t.replace(/[&"'<>]/g,A)}function T(t){return t.replace(/[&"'<> ]/g,A)}function C(t,e,r){t.push(e),r.push(`<span class="${e.replace(/\.+/g," ")}">`)}function D(t,e){t.pop(),e.push("</span>")}function I(t,e,r){let n=t.length-e.length;if(n>0)for(;n--;)D(t,r);let i=0;for(let n=t.length;n>=0;--n){if(P.isEqual(t.slice(0,n),e.slice(0,n))){i=n;break}D(t,r)}for(let n=i;n<e.length;++n)C(t,e[n],r)}const N={nbsp:!0,lineDivs:!1,editorDiv:!1,wrapCode:!1,editorDivTag:"div",editorDivClass:"editor editor-colors",nullScope:"text.plain.null-grammar"};function R(t){return"Dock"===t.constructor.name}function L(t){return void 0!==t}const F=["context","keyboard","mouse","selection"];function B(t){return!(!t||!t.text)}function U(t){return!(!t||!t.html)}var z="object"==typeof S&&S&&S.Object===Object&&S,q="object"==typeof self&&self&&self.Object===Object&&self,$=z||q||Function("return this")(),V=$.Symbol,G=Object.prototype,H=G.hasOwnProperty,W=G.toString,Q=V?V.toStringTag:void 0;var K=function(t){var e=H.call(t,Q),r=t[Q];try{t[Q]=void 0;var n=!0}catch(t){}var i=W.call(t);return n&&(e?t[Q]=r:delete t[Q]),i},X=Object.prototype.toString;var Y=function(t){return X.call(t)},Z=V?V.toStringTag:void 0;var J=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":Z&&Z in Object(t)?K(t):Y(t)};var tt=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)};var et,rt=function(t){if(!tt(t))return!1;var e=J(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e},nt=$["__core-js_shared__"],it=(et=/[^.]+$/.exec(nt&&nt.keys&&nt.keys.IE_PROTO||""))?"Symbol(src)_1."+et:"";var ot=function(t){return!!it&&it in t},st=Function.prototype.toString;var at=function(t){if(null!=t){try{return st.call(t)}catch(t){}try{return t+""}catch(t){}}return""},ct=/^\[object .+?Constructor\]$/,lt=Function.prototype,ut=Object.prototype,pt=lt.toString,ht=ut.hasOwnProperty,dt=RegExp("^"+pt.call(ht).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var ft=function(t){return!(!tt(t)||ot(t))&&(rt(t)?dt:ct).test(at(t))};var mt=function(t,e){return null==t?void 0:t[e]};var gt=function(t,e){var r=mt(t,e);return ft(r)?r:void 0},vt=gt(Object,"create");var yt=function(){this.__data__=vt?vt(null):{},this.size=0};var bt=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},wt=Object.prototype.hasOwnProperty;var kt=function(t){var e=this.__data__;if(vt){var r=e[t];return"__lodash_hash_undefined__"===r?void 0:r}return wt.call(e,t)?e[t]:void 0},_t=Object.prototype.hasOwnProperty;var xt=function(t){var e=this.__data__;return vt?void 0!==e[t]:_t.call(e,t)};var St=function(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=vt&&void 0===e?"__lodash_hash_undefined__":e,this};function Et(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}Et.prototype.clear=yt,Et.prototype.delete=bt,Et.prototype.get=kt,Et.prototype.has=xt,Et.prototype.set=St;var Ot=Et;var Pt=function(){this.__data__=[],this.size=0};var Mt=function(t,e){return t===e||t!=t&&e!=e};var At=function(t,e){for(var r=t.length;r--;)if(Mt(t[r][0],e))return r;return-1},jt=Array.prototype.splice;var Tt=function(t){var e=this.__data__,r=At(e,t);return!(r<0)&&(r==e.length-1?e.pop():jt.call(e,r,1),--this.size,!0)};var Ct=function(t){var e=this.__data__,r=At(e,t);return r<0?void 0:e[r][1]};var Dt=function(t){return At(this.__data__,t)>-1};var It=function(t,e){var r=this.__data__,n=At(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this};function Nt(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}Nt.prototype.clear=Pt,Nt.prototype.delete=Tt,Nt.prototype.get=Ct,Nt.prototype.has=Dt,Nt.prototype.set=It;var Rt=Nt,Lt=gt($,"Map");var Ft=function(){this.size=0,this.__data__={hash:new Ot,map:new(Lt||Rt),string:new Ot}};var Bt=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t};var Ut=function(t,e){var r=t.__data__;return Bt(e)?r["string"==typeof e?"string":"hash"]:r.map};var zt=function(t){var e=Ut(this,t).delete(t);return this.size-=e?1:0,e};var qt=function(t){return Ut(this,t).get(t)};var $t=function(t){return Ut(this,t).has(t)};var Vt=function(t,e){var r=Ut(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this};function Gt(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}Gt.prototype.clear=Ft,Gt.prototype.delete=zt,Gt.prototype.get=qt,Gt.prototype.has=$t,Gt.prototype.set=Vt;var Ht=Gt;function Wt(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var r=function(){var n=arguments,i=e?e.apply(this,n):n[0],o=r.cache;if(o.has(i))return o.get(i);var s=t.apply(this,n);return r.cache=o.set(i,s)||o,s};return r.cache=new(Wt.Cache||Ht),r}Wt.Cache=Ht;var Qt=Wt,Kt=O((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e,r){void 0===r&&(r={}),this.execute=t,this.applicator=e,this.options=r}return Object.defineProperty(t.prototype,"bound",{get:function(){return null!=this.options.bound&&this.options.bound},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"setter",{get:function(){return null!=this.options.setter&&this.options.setter},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"getter",{get:function(){return null!=this.options.getter&&this.options.getter},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"property",{get:function(){return null!=this.options.property&&this.options.property},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"method",{get:function(){return null==this.options.method||this.options.method},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"optionalParams",{get:function(){return null!=this.options.optionalParams&&this.options.optionalParams},enumerable:!0,configurable:!0}),t}();e.DecoratorConfig=r}));E(Kt);Kt.DecoratorConfig;var Xt=O((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.log=function(t){return void 0===t&&(t=""),"lodash-decorators -> "+t}}));E(Xt);Xt.log;var Yt=Array.isArray;var Zt=function(t){return null!=t&&"object"==typeof t};var Jt=function(t){return"string"==typeof t||!Yt(t)&&Zt(t)&&"[object String]"==J(t)},te=O((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.resolveFunction=function(t,e,r,n){if(void 0===n&&(n=!0),rt(t))return t;if(Jt(t)){if(e&&rt(e[t]))return e[t];if(r&&rt(r[t]))return r[t]}if(n)throw new ReferenceError(Xt.log("Can not resolve method "+t+" on any target Objects"))}}));E(te);te.resolveFunction;var ee=function(t){return void 0===t},re=O((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(){this._weakMap=new WeakMap}return t.prototype.set=function(t,e){for(var r=this._weakMap,n=0,i=t.length-1;n<i;n++){var o=t[n],s=r.get(o);s||(s=new Map,r.set(o,s)),r=s}r.set(t[t.length-1],e)},t.prototype.get=function(t){for(var e=this._weakMap,r=0,n=t.length;r<n&&(e=e.get(t[r]),!ee(e));r++);return e},t.prototype.has=function(t){return!ee(this.get(t))},t}();e.CompositeKeyWeakMap=r}));E(re);re.CompositeKeyWeakMap;var ne=O((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.returnAtIndex=function(t,e){return function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return t.call.apply(t,[this].concat(r)),r[e]}}}));E(ne);ne.returnAtIndex;var ie=function(t){return function(e,r,n){for(var i=-1,o=Object(e),s=n(e),a=s.length;a--;){var c=s[t?a:++i];if(!1===r(o[c],c,o))break}return e}}();var oe=function(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n};var se=function(t){return Zt(t)&&"[object Arguments]"==J(t)},ae=Object.prototype,ce=ae.hasOwnProperty,le=ae.propertyIsEnumerable,ue=se(function(){return arguments}())?se:function(t){return Zt(t)&&ce.call(t,"callee")&&!le.call(t,"callee")};var pe=function(){return!1},he=O((function(t,e){var r=e&&!e.nodeType&&e,n=r&&t&&!t.nodeType&&t,i=n&&n.exports===r?$.Buffer:void 0,o=(i?i.isBuffer:void 0)||pe;t.exports=o})),de=/^(?:0|[1-9]\d*)$/;var fe=function(t,e){var r=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==r||"symbol"!=r&&de.test(t))&&t>-1&&t%1==0&&t<e};var me=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991},ge={};ge["[object Float32Array]"]=ge["[object Float64Array]"]=ge["[object Int8Array]"]=ge["[object Int16Array]"]=ge["[object Int32Array]"]=ge["[object Uint8Array]"]=ge["[object Uint8ClampedArray]"]=ge["[object Uint16Array]"]=ge["[object Uint32Array]"]=!0,ge["[object Arguments]"]=ge["[object Array]"]=ge["[object ArrayBuffer]"]=ge["[object Boolean]"]=ge["[object DataView]"]=ge["[object Date]"]=ge["[object Error]"]=ge["[object Function]"]=ge["[object Map]"]=ge["[object Number]"]=ge["[object Object]"]=ge["[object RegExp]"]=ge["[object Set]"]=ge["[object String]"]=ge["[object WeakMap]"]=!1;var ve=function(t){return Zt(t)&&me(t.length)&&!!ge[J(t)]};var ye=function(t){return function(e){return t(e)}},be=O((function(t,e){var r=e&&!e.nodeType&&e,n=r&&t&&!t.nodeType&&t,i=n&&n.exports===r&&z.process,o=function(){try{var t=n&&n.require&&n.require("util").types;return t||i&&i.binding&&i.binding("util")}catch(t){}}();t.exports=o})),we=be&&be.isTypedArray,ke=we?ye(we):ve,_e=Object.prototype.hasOwnProperty;var xe=function(t,e){var r=Yt(t),n=!r&&ue(t),i=!r&&!n&&he(t),o=!r&&!n&&!i&&ke(t),s=r||n||i||o,a=s?oe(t.length,String):[],c=a.length;for(var l in t)!e&&!_e.call(t,l)||s&&("length"==l||i&&("offset"==l||"parent"==l)||o&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||fe(l,c))||a.push(l);return a},Se=Object.prototype;var Ee=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||Se)};var Oe=function(t,e){return function(r){return t(e(r))}},Pe=Oe(Object.keys,Object),Me=Object.prototype.hasOwnProperty;var Ae=function(t){if(!Ee(t))return Pe(t);var e=[];for(var r in Object(t))Me.call(t,r)&&"constructor"!=r&&e.push(r);return e};var je=function(t){return null!=t&&me(t.length)&&!rt(t)};var Te=function(t){return je(t)?xe(t):Ae(t)};var Ce=function(t,e){return t&&ie(t,e,Te)};var De=function(t){return t};var Ie=function(t){return"function"==typeof t?t:De};var Ne=function(t,e){return t&&Ce(t,Ie(e))},Re=O((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.copyMetadata=function(t,e){return Ne(e,(function(e,r){return t[r]=e})),t}}));E(Re);Re.copyMetadata;var Le=O((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.bind=function(t,e){return Re.copyMetadata(t.bind(e),t)}}));E(Le);Le.bind;var Fe=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this};var Be=function(t){return this.__data__.has(t)};function Ue(t){var e=-1,r=null==t?0:t.length;for(this.__data__=new Ht;++e<r;)this.add(t[e])}Ue.prototype.add=Ue.prototype.push=Fe,Ue.prototype.has=Be;var ze=Ue;var qe=function(t,e,r,n){for(var i=t.length,o=r+(n?1:-1);n?o--:++o<i;)if(e(t[o],o,t))return o;return-1};var $e=function(t){return t!=t};var Ve=function(t,e,r){for(var n=r-1,i=t.length;++n<i;)if(t[n]===e)return n;return-1};var Ge=function(t,e,r){return e==e?Ve(t,e,r):qe(t,$e,r)};var He=function(t,e){return!!(null==t?0:t.length)&&Ge(t,e,0)>-1};var We=function(t,e,r){for(var n=-1,i=null==t?0:t.length;++n<i;)if(r(e,t[n]))return!0;return!1};var Qe=function(t,e){for(var r=-1,n=null==t?0:t.length,i=Array(n);++r<n;)i[r]=e(t[r],r,t);return i};var Ke=function(t,e){return t.has(e)};var Xe=function(t,e,r,n){var i=-1,o=He,s=!0,a=t.length,c=[],l=e.length;if(!a)return c;r&&(e=Qe(e,ye(r))),n?(o=We,s=!1):e.length>=200&&(o=Ke,s=!1,e=new ze(e));t:for(;++i<a;){var u=t[i],p=null==r?u:r(u);if(u=n||0!==u?u:0,s&&p==p){for(var h=l;h--;)if(e[h]===p)continue t;c.push(u)}else o(e,p,n)||c.push(u)}return c};var Ye=function(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)},Ze=Math.max;var Je=function(t,e,r){return e=Ze(void 0===e?t.length-1:e,0),function(){for(var n=arguments,i=-1,o=Ze(n.length-e,0),s=Array(o);++i<o;)s[i]=n[e+i];i=-1;for(var a=Array(e+1);++i<e;)a[i]=n[i];return a[e]=r(s),Ye(t,this,a)}};var tr=function(t){return function(){return t}},er=function(){try{var t=gt(Object,"defineProperty");return t({},"",{}),t}catch(t){}}(),rr=er?function(t,e){return er(t,"toString",{configurable:!0,enumerable:!1,value:tr(e),writable:!0})}:De,nr=Date.now;var ir=function(t){var e=0,r=0;return function(){var n=nr(),i=16-(n-r);if(r=n,i>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(void 0,arguments)}},or=ir(rr);var sr=function(t,e){return or(Je(t,e,De),t+"")};var ar=function(t){return Zt(t)&&je(t)},cr=sr((function(t,e){return ar(t)?Xe(t,e):[]})),lr=Oe(Object.getPrototypeOf,Object),ur=Function.prototype,pr=Object.prototype,hr=ur.toString,dr=pr.hasOwnProperty,fr=hr.call(Object);var mr=function(t){if(!Zt(t)||"[object Object]"!=J(t))return!1;var e=lr(t);if(null===e)return!0;var r=dr.call(e,"constructor")&&e.constructor;return"function"==typeof r&&r instanceof r&&hr.call(r)==fr};var gr=function(t){if(!Zt(t))return!1;var e=J(t);return"[object Error]"==e||"[object DOMException]"==e||"string"==typeof t.message&&"string"==typeof t.name&&!mr(t)},vr=sr((function(t,e){try{return Ye(t,void 0,e)}catch(t){return gr(t)?t:new Error(t)}})),yr=O((function(t,e){function r(t,e,r){var n=Object.getOwnPropertyDescriptor(t,r);if(!n||n.configurable){var i=Object.getOwnPropertyDescriptor(e,r);tt(i)?Object.defineProperty(t,r,i):t[r]=e[r]}}Object.defineProperty(e,"__esModule",{value:!0}),e.assignAll=function(t,e,n){void 0===n&&(n=[]);for(var i=0,o=cr.apply(void 0,[Object.getOwnPropertyNames(e)].concat(n));i<o.length;i++){var s=o[i];vr(r,t,e,s)}return t},e.assignProperty=r}));E(yr);yr.assignAll,yr.assignProperty;var br=O((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var r=["length","name","arguments","called","prototype"];e.wrapConstructor=function(t,e){function n(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return e.call.apply(e,[this,t].concat(r))}return n.prototype=t.prototype,Object.defineProperty(n,"name",{configurable:!0,enumerable:!1,value:t.name,writable:!1}),yr.assignAll(n,t,r)}}));E(br);br.wrapConstructor;var wr=O((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.isMethodOrPropertyDecoratorArgs=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.length>=2&&tt(t[0])&&Jt(t[1])&&rt(t[0].constructor)&&t[0].constructor.prototype===t[0]}}));E(wr);wr.isMethodOrPropertyDecoratorArgs;var kr=O((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.isPrototypeAccess=function(t,e){return t===e||t.constructor!==e.constructor&&Object.getPrototypeOf(this).constructor===e.constructor}}));E(kr);kr.isPrototypeAccess;var _r=O((function(t,e){function r(t){for(var r in t)e.hasOwnProperty(r)||(e[r]=t[r])}Object.defineProperty(e,"__esModule",{value:!0}),r(Xt),r(te),r(re),r(ne),r(Re),r(Le),r(br),r(yr),r(wr),r(kr)}));E(_r);var xr=O((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.InstanceChainMap=new _r.CompositeKeyWeakMap}));E(xr);xr.InstanceChainMap;var Sr=O((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(){}return t.prototype.createDecorator=function(t){var e=this,r=t.applicator,n=t.optionalParams;return function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];var s=i,a=function(n,i,o){var a=e._resolveDescriptor(n,i,o),c=a.value,l=a.get,u=a.set;return xr.InstanceChainMap.has([n,i])||(rt(c)?a.value=_r.copyMetadata(r.apply({config:t,target:n,value:c,args:s}),c):rt(l)&&t.getter?a.get=_r.copyMetadata(r.apply({config:t,target:n,value:l,args:s}),l):rt(u)&&t.setter&&(a.set=_r.copyMetadata(r.apply({config:t,target:n,value:u,args:s}),u))),a};return n&&_r.isMethodOrPropertyDecoratorArgs.apply(void 0,i)?(s=[],a(i[0],i[1],i[2])):a}},t.prototype.createInstanceDecorator=function(t){var e=this,r=t.applicator,n=t.bound,i=t.optionalParams;return function(){for(var o=[],s=0;s<arguments.length;s++)o[s]=arguments[s];var a=o,c=function(i,o,s){var c=e._resolveDescriptor(i,o,s),l=c.value,u=c.writable,p=c.enumerable,h=c.configurable,d=c.get,f=c.set,m=!xr.InstanceChainMap.has([i,o]),g=xr.InstanceChainMap.get([i,o])||{fns:[],properties:[]},v=m&&rt(d),y=m&&rt(f),b=m&&rt(l),w=m&&!v&&!y&&!b,k=v?d:b?l:void 0;if(g.properties.push(o),g.fns.push((function(o,s,c){return e._isApplicable(c,t)?(n&&(o=_r.bind(o,s)),_r.copyMetadata(r.apply({args:a,target:i,instance:s,value:o,config:t}),o)):o})),xr.InstanceChainMap.set([i,o],g),!m)return c;g.isSetter=y,g.isGetter=v,g.isMethod=b,g.isProperty=w;var _=function(t,e,r){return g.fns.reduce((function(t,n){return n(t,r,e)}),t)},x=function(t){var e=d||void 0,r=f||void 0;if(v||y)v&&(e=_(d,{value:d,getter:!0},t)),y&&(r=_(f,{value:f,setter:!0},t)),Object.defineProperty(t,o,{enumerable:p,configurable:h,get:e,set:r});else if(b||w){var n=_(l,b?{value:l,method:!0}:{value:l,property:!0},t);Object.defineProperty(t,o,{writable:u,enumerable:p,configurable:h,value:n})}};return(b||w)&&(delete c.value,delete c.writable),c.get=function(){if(_r.isPrototypeAccess(this,i))return k;x(this);var t=Object.getOwnPropertyDescriptor(this,o);return t.get?t.get.call(this):t.value},c.set=function(t){x(this);var e=Object.getOwnPropertyDescriptor(this,o);e.set?e.set.call(this,t):(w||b)&&(this[o]=t)},c};return i&&_r.isMethodOrPropertyDecoratorArgs.apply(void 0,o)?(a=[],c(o[0],o[1],o[2])):c}},t.prototype._isApplicable=function(t,e){return!Boolean(t.getter&&!e.getter||t.setter&&!e.setter||t.method&&!e.method||t.property&&!e.property)},t.prototype._resolveDescriptor=function(t,e,r){return r||(Object.getOwnPropertyDescriptor(t,e)||{})},t}();e.InternalDecoratorFactory=r,e.DecoratorFactory=new r}));E(Sr);Sr.InternalDecoratorFactory,Sr.DecoratorFactory;var Er=O((function(t,e){function r(t){for(var r in t)e.hasOwnProperty(r)||(e[r]=t[r])}Object.defineProperty(e,"__esModule",{value:!0}),r(Kt),r(Sr),r(xr)}));E(Er);var Or=O((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var r=function(){};e.Applicator=r}));E(Or);Or.Applicator;var Pr=O((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(e){void 0===e&&(e={});var r=t.call(this)||this;return r._config=e,r}return x.__extends(e,t),Object.defineProperty(e.prototype,"post",{get:function(){return!0===this._config.post},enumerable:!0,configurable:!0}),e.prototype.apply=function(t){var e=t.config.execute,r=t.value,n=void 0===r?De:r,i=t.args,o=t.target,s=this;return function(){for(var t=this,r=[],a=0;a<arguments.length;a++)r[a]=arguments[a];var c=i.map((function(e){return _r.resolveFunction(e,t,o)})).slice();return s.post?c.push(n):c.unshift(n),e.apply(void 0,c).apply(this,r)}},e}(Or.Applicator);e.ComposeApplicator=r}));E(Pr);Pr.ComposeApplicator;var Mr=O((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return x.__extends(e,t),e.prototype.apply=function(t){var e=t.args,r=t.target,n=t.config.execute;return function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];return n.apply(void 0,[_r.resolveFunction(e[0],this,r)].concat(e.slice(1))).apply(this,t)}},e}(Or.Applicator);e.PartialApplicator=r}));E(Mr);Mr.PartialApplicator;var Ar=gt($,"WeakMap"),jr=Ar&&new Ar,Tr=jr?function(t,e){return jr.set(t,e),t}:De,Cr=Object.create,Dr=function(){function t(){}return function(e){if(!tt(e))return{};if(Cr)return Cr(e);t.prototype=e;var r=new t;return t.prototype=void 0,r}}();var Ir=function(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var r=Dr(t.prototype),n=t.apply(r,e);return tt(n)?n:r}};var Nr=function(t,e,r){var n=1&e,i=Ir(t);return function e(){var o=this&&this!==$&&this instanceof e?i:t;return o.apply(n?r:this,arguments)}},Rr=Math.max;var Lr=function(t,e,r,n){for(var i=-1,o=t.length,s=r.length,a=-1,c=e.length,l=Rr(o-s,0),u=Array(c+l),p=!n;++a<c;)u[a]=e[a];for(;++i<s;)(p||i<o)&&(u[r[i]]=t[i]);for(;l--;)u[a++]=t[i++];return u},Fr=Math.max;var Br=function(t,e,r,n){for(var i=-1,o=t.length,s=-1,a=r.length,c=-1,l=e.length,u=Fr(o-a,0),p=Array(u+l),h=!n;++i<u;)p[i]=t[i];for(var d=i;++c<l;)p[d+c]=e[c];for(;++s<a;)(h||i<o)&&(p[d+r[s]]=t[i++]);return p};var Ur=function(t,e){for(var r=t.length,n=0;r--;)t[r]===e&&++n;return n};var zr=function(){};function qr(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=4294967295,this.__views__=[]}qr.prototype=Dr(zr.prototype),qr.prototype.constructor=qr;var $r=qr;var Vr=jr?function(t){return jr.get(t)}:function(){},Gr={},Hr=Object.prototype.hasOwnProperty;var Wr=function(t){for(var e=t.name+"",r=Gr[e],n=Hr.call(Gr,e)?r.length:0;n--;){var i=r[n],o=i.func;if(null==o||o==t)return i.name}return e};function Qr(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=void 0}Qr.prototype=Dr(zr.prototype),Qr.prototype.constructor=Qr;var Kr=Qr;var Xr=function(t,e){var r=-1,n=t.length;for(e||(e=Array(n));++r<n;)e[r]=t[r];return e};var Yr=function(t){if(t instanceof $r)return t.clone();var e=new Kr(t.__wrapped__,t.__chain__);return e.__actions__=Xr(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e},Zr=Object.prototype.hasOwnProperty;function Jr(t){if(Zt(t)&&!Yt(t)&&!(t instanceof $r)){if(t instanceof Kr)return t;if(Zr.call(t,"__wrapped__"))return Yr(t)}return new Kr(t)}Jr.prototype=zr.prototype,Jr.prototype.constructor=Jr;var tn=Jr;var en=function(t){var e=Wr(t),r=tn[e];if("function"!=typeof r||!(e in $r.prototype))return!1;if(t===r)return!0;var n=Vr(r);return!!n&&t===n[0]},rn=ir(Tr),nn=/\{\n\/\* \[wrapped with (.+)\] \*/,on=/,? & /;var sn=function(t){var e=t.match(nn);return e?e[1].split(on):[]},an=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/;var cn=function(t,e){var r=e.length;if(!r)return t;var n=r-1;return e[n]=(r>1?"& ":"")+e[n],e=e.join(r>2?", ":" "),t.replace(an,"{\n/* [wrapped with "+e+"] */\n")};var ln=function(t,e){for(var r=-1,n=null==t?0:t.length;++r<n&&!1!==e(t[r],r,t););return t},un=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]];var pn=function(t,e){return ln(un,(function(r){var n="_."+r[0];e&r[1]&&!He(t,n)&&t.push(n)})),t.sort()};var hn=function(t,e,r){var n=e+"";return or(t,cn(n,pn(sn(n),r)))};var dn=function(t,e,r,n,i,o,s,a,c,l){var u=8&e;e|=u?32:64,4&(e&=~(u?64:32))||(e&=-4);var p=[t,e,i,u?o:void 0,u?s:void 0,u?void 0:o,u?void 0:s,a,c,l],h=r.apply(void 0,p);return en(t)&&rn(h,p),h.placeholder=n,hn(h,t,e)};var fn=function(t){return t.placeholder},mn=Math.min;var gn=function(t,e){for(var r=t.length,n=mn(e.length,r),i=Xr(t);n--;){var o=e[n];t[n]=fe(o,r)?i[o]:void 0}return t};var vn=function(t,e){for(var r=-1,n=t.length,i=0,o=[];++r<n;){var s=t[r];s!==e&&"__lodash_placeholder__"!==s||(t[r]="__lodash_placeholder__",o[i++]=r)}return o};var yn=function t(e,r,n,i,o,s,a,c,l,u){var p=128&r,h=1&r,d=2&r,f=24&r,m=512&r,g=d?void 0:Ir(e);return function v(){for(var y=arguments.length,b=Array(y),w=y;w--;)b[w]=arguments[w];if(f)var k=fn(v),_=Ur(b,k);if(i&&(b=Lr(b,i,o,f)),s&&(b=Br(b,s,a,f)),y-=_,f&&y<u){var x=vn(b,k);return dn(e,r,t,v.placeholder,n,b,x,c,l,u-y)}var S=h?n:this,E=d?S[e]:e;return y=b.length,c?b=gn(b,c):m&&y>1&&b.reverse(),p&&l<y&&(b.length=l),this&&this!==$&&this instanceof v&&(E=g||Ir(E)),E.apply(S,b)}};var bn=function(t,e,r){var n=Ir(t);return function i(){for(var o=arguments.length,s=Array(o),a=o,c=fn(i);a--;)s[a]=arguments[a];var l=o<3&&s[0]!==c&&s[o-1]!==c?[]:vn(s,c);if((o-=l.length)<r)return dn(t,e,yn,i.placeholder,void 0,s,l,void 0,void 0,r-o);var u=this&&this!==$&&this instanceof i?n:t;return Ye(u,this,s)}};var wn=function(t,e,r,n){var i=1&e,o=Ir(t);return function e(){for(var s=-1,a=arguments.length,c=-1,l=n.length,u=Array(l+a),p=this&&this!==$&&this instanceof e?o:t;++c<l;)u[c]=n[c];for(;a--;)u[c++]=arguments[++s];return Ye(p,i?r:this,u)}},kn=Math.min;var _n=function(t,e){var r=t[1],n=e[1],i=r|n,o=i<131,s=128==n&&8==r||128==n&&256==r&&t[7].length<=e[8]||384==n&&e[7].length<=e[8]&&8==r;if(!o&&!s)return t;1&n&&(t[2]=e[2],i|=1&r?0:4);var a=e[3];if(a){var c=t[3];t[3]=c?Lr(c,a,e[4]):a,t[4]=c?vn(t[3],"__lodash_placeholder__"):e[4]}return(a=e[5])&&(c=t[5],t[5]=c?Br(c,a,e[6]):a,t[6]=c?vn(t[5],"__lodash_placeholder__"):e[6]),(a=e[7])&&(t[7]=a),128&n&&(t[8]=null==t[8]?e[8]:kn(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=i,t};var xn=function(t){return"symbol"==typeof t||Zt(t)&&"[object Symbol]"==J(t)},Sn=/^\s+|\s+$/g,En=/^[-+]0x[0-9a-f]+$/i,On=/^0b[01]+$/i,Pn=/^0o[0-7]+$/i,Mn=parseInt;var An=function(t){if("number"==typeof t)return t;if(xn(t))return NaN;if(tt(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=tt(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(Sn,"");var r=On.test(t);return r||Pn.test(t)?Mn(t.slice(2),r?2:8):En.test(t)?NaN:+t};var jn=function(t){return t?(t=An(t))===1/0||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0};var Tn=function(t){var e=jn(t),r=e%1;return e==e?r?e-r:e:0},Cn=Math.max;var Dn=function(t,e,r,n,i,o,s,a){var c=2&e;if(!c&&"function"!=typeof t)throw new TypeError("Expected a function");var l=n?n.length:0;if(l||(e&=-97,n=i=void 0),s=void 0===s?s:Cn(Tn(s),0),a=void 0===a?a:Tn(a),l-=i?i.length:0,64&e){var u=n,p=i;n=i=void 0}var h=c?void 0:Vr(t),d=[t,e,r,n,i,u,p,o,s,a];if(h&&_n(d,h),t=d[0],e=d[1],r=d[2],n=d[3],i=d[4],!(a=d[9]=void 0===d[9]?c?0:t.length:Cn(d[9]-l,0))&&24&e&&(e&=-25),e&&1!=e)f=8==e||16==e?bn(t,e,a):32!=e&&33!=e||i.length?yn.apply(void 0,d):wn(t,e,r,n);else var f=Nr(t,e,r);return hn((h?Tr:rn)(f,d),t,e)},In=sr((function(t,e){var r=vn(e,fn(In));return Dn(t,32,void 0,e,r)}));In.placeholder={};var Nn=In,Rn=O((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return x.__extends(e,t),e.prototype.apply=function(t){var e=t.config.execute,r=t.value,n=t.args;return Nn.apply(void 0,[e,r].concat(n))},e}(Or.Applicator);e.PartialedApplicator=r}));E(Rn);Rn.PartialedApplicator;var Ln=O((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return x.__extends(e,t),e.prototype.apply=function(t){var e=t.args,r=t.target,n=t.value,i=t.config.execute;return function(){for(var t=[],o=0;o<arguments.length;o++)t[o]=arguments[o];var s=n,a=0;return rt(s)||(s=_r.resolveFunction(e[0],this,r),a=1),i.apply(void 0,[s].concat(e.slice(a))).apply(this,t)}},e}(Or.Applicator);e.PartialValueApplicator=r}));E(Ln);Ln.PartialValueApplicator;var Fn=O((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return x.__extends(e,t),e.prototype.apply=function(t){var e=t.config,r=e.execute,n=(e.bound,t.args),i=t.value;return r.apply(void 0,n.concat([i]))},e}(Or.Applicator);e.PostValueApplicator=r}));E(Fn);Fn.PostValueApplicator;var Bn=O((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return x.__extends(e,t),e.prototype.apply=function(t){var e=t.value,r=t.config.execute,n=t.args;return r.apply(void 0,[e].concat(n))},e}(Or.Applicator);e.PreValueApplicator=r}));E(Bn);Bn.PreValueApplicator;var Un=O((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return x.__extends(e,t),e.prototype.apply=function(t){var e=t.args,r=t.config.execute,n=t.target,i=t.value;return function(){for(var t=[],o=0;o<arguments.length;o++)t[o]=arguments[o];return r(_r.resolveFunction(e[0],this,n),i).apply(this,t)}},e}(Or.Applicator);e.WrapApplicator=r}));E(Un);Un.WrapApplicator;var zn=O((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return x.__extends(e,t),e.prototype.apply=function(t){var e=t.value,r=t.config.execute,n=t.args,i=t.instance;t.target;return i?r.apply(void 0,[e,i].concat(n)):e},e}(Or.Applicator);e.BindApplicator=r}));E(zn);zn.BindApplicator;var qn=O((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return x.__extends(e,t),e.prototype.apply=function(t){var e=t.args,r=(t.target,t.config.execute),n=t.value;return function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];return r.apply(void 0,[n.bind(this)].concat(t,e))}},e}(Or.Applicator);e.InvokeApplicator=r}));E(qn);qn.InvokeApplicator;var $n=O((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return x.__extends(e,t),e.prototype.apply=function(t){var e=t.value,r=t.instance,n=t.config.execute,i=t.args,o=t.target,s=_r.resolveFunction(rt(i[0])?i[0]:tt(i[0])?i[0].resolver:i[0],r,o,!1);s&&r&&(s=s.bind(r));var a=s?n(e,s):n(e);if(tt(i[0])){var c=i[0],l=c.cache,u=c.type;l?a.cache=l:rt(u)&&(a.cache=new u)}return a},e}(Or.Applicator);e.MemoizeApplicator=r}));E($n);$n.MemoizeApplicator;var Vn=O((function(t,e){function r(t){for(var r in t)e.hasOwnProperty(r)||(e[r]=t[r])}Object.defineProperty(e,"__esModule",{value:!0}),r(Or),r(Pr),r(Mr),r(Rn),r(Ln),r(Fn),r(Bn),r(Un),r(zn),r(qn),r($n)}));E(Vn);var Gn=O((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.Memoize=Er.DecoratorFactory.createInstanceDecorator(new Er.DecoratorConfig(Qt,new Vn.MemoizeApplicator,{optionalParams:!0})),e.memoize=e.Memoize,e.default=e.Memoize})),Hn=E(Gn);Gn.Memoize,Gn.memoize;class Wn{constructor(t){this.msg=t}toHtml(){if(B(this.msg)&&void 0!==this.msg.highlighter){const t=function(t){const e=atom.grammars.textmateRegistry||atom.grammars,r=Object.assign({},N,t),n=e.grammarForScopeName(r.scopeName)||(r.nullScope?e.grammarForScopeName(r.nullScope):void 0);if(void 0===n)throw new Error(`Grammar ${r.scopeName} not found, and no ${r.nullScope} grammar`);const i=n.tokenizeLines(r.fileContents);if(i.length>0){const t=i[i.length-1];1===t.length&&""===t[0].value&&i.pop()}const o=r.nbsp?T:j,s=[];r.editorDiv&&s.push(`<${r.editorDivTag} class="${r.editorDivClass}">`),r.wrapCode&&s.push("<code>");for(const t of i){const e=[];r.lineDivs&&s.push('<div class="line">');for(const{value:r,scopes:n}of t){let t=n;M(atom.getVersion(),"1.13.0")>=0&&(t=n.map(t=>"syntax--"+t.replace(/\./g,".syntax--"))),I(e,t,s),s.push(`<span>${o(r)}</span>`)}for(;e.length>0;)D(e,s);r.lineDivs&&s.push("</div>"),s.push("\n")}return r.wrapCode&&s.push("</code>"),r.editorDiv&&s.push(`</${r.editorDivTag}>`),s.join("")}({fileContents:this.msg.text,scopeName:this.msg.highlighter,nbsp:!1,lineDivs:!1});return t||(this.msg.highlighter=void 0,this.toHtml())}if(U(this.msg))return this.msg.html;{let t;t=B(this.msg)?this.msg.text:this.msg;const e=document.createElement("div");return e.innerText=t,e.innerHTML}}toPlain(){if(U(this.msg)){const t=document.createElement("div");return t.innerHTML=this.msg.html,t.innerText}{let t;return t=B(this.msg)?this.msg.text:this.msg,t}}raw(){return B(this.msg)?this.msg.text:U(this.msg)?this.msg.html:this.msg}}function Qn(t,r,n,i){const o=e=>{const r=e.target.closest(n);r&&t.contains(r)&&i(e)};return t.addEventListener(r,o),new e.Disposable(()=>{t.removeEventListener(r,o)})}Wn.fromObject=t=>t instanceof Wn?t:new Wn(t),g([Hn(),v("design:type",Function),v("design:paramtypes",[]),v("design:returntype",String)],Wn.prototype,"toHtml",null),g([Hn(),v("design:type",Function),v("design:paramtypes",[]),v("design:returntype",String)],Wn.prototype,"toPlain",null);function Kn(t){return t&&(t.contextCommand||t[0]&&t[0].contextCommand)?"context":"keyboard"}function Xn(t,e){const r=atom.views.getView(t).component.screenPositionForMouseEvent(e);if(!isNaN(r.row)&&!isNaN(r.column))return t.bufferPositionForScreenPosition(r)}function Yn(t){"function"==typeof t.catch?t.catch(t=>{atom.notifications.addFatalError("Atom-Typescript error: "+t.message,{detail:t.toString(),stack:t.stack,dismissable:!0})}):atom.notifications.addFatalError("Atom-Typescript: non-promise passed to handlePromise. Please report this.",{stack:(new Error).stack,dismissable:!0})}class Zn{constructor(t,{uri:r,message:n,severity:i,position:o,context:s}){this.providerId=t,this.uri=r,this.message=Wn.fromObject(n),this.severity=i,this.position=o?e.Point.fromObject(o):void 0,this.context=s,this._isValid=!0}isValid(){return this._isValid}setValid(t){this._isValid=t}hash(){if(void 0!==this._hash)return this._hash;const t=n.createHash("sha1");return t.update(JSON.stringify({uri:this.uri,position:this.position?this.position.serialize():void 0,message:this.message.raw(),severity:this.severity,context:this.context})),this._hash=t.digest("base64"),this._hash}}class Jn{constructor(t,e,r){this.parent=t,this.providerSeverities=e,this.id=r,this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.parent.didUpdate(this.id,Array.from(this.providerSeverities),[]))}addSeverity(t){this.providerSeverities.add(t)}removeSeverity(t){this.providerSeverities.delete(t)}setMessages(t){if(this.disposed)return;const e=t.map(t=>new Zn(this.id,t));this.parent.didUpdate(this.id,Array.from(this.providerSeverities),e)}}class ti{constructor(){this.currentId=0,this.disposables=new e.CompositeDisposable,this.emitter=new e.Emitter,this.disposables.add(this.emitter),this.messages=new Map}destroy(){this.disposables.dispose()}onDidUpdate(t){return this.emitter.on("did-update",t)}didUpdate(t,e,r){const n=r.map(t=>t.uri).filter(L);for(const[r,i]of Array.from(this.messages))(i.providerId===t||void 0!==i.uri&&n.includes(i.uri)&&e.includes(i.severity))&&this.messages.delete(r);for(const t of r)this.messages.set(t.hash(),t);const i=new Set(r.map(t=>t.severity));this.emitter.emit("did-update",Array.from(i))}registerProvider(t){const e=new Jn(this,new Set(t),++this.currentId);return this.disposables.add(e),e}results(){return this.messages.values()}*filter(t){for(const e of this.results())t(e)&&(yield e)}isEmpty(t){return!Array.from(this.messages.values()).some(({severity:e})=>t.includes(e))}}var ei={onCopy:"copy",onCut:"cut",onPaste:"paste",onCompositionEnd:"compositionend",onCompositionStart:"compositionstart",onCompositionUpdate:"compositionupdate",onKeyDown:"keydown",onKeyPress:"keypress",onKeyUp:"keyup",onFocus:"focus",onBlur:"blur",onChange:"change",onInput:"input",onSubmit:"submit",onClick:"click",onContextMenu:"contextmenu",onDoubleClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDragEnter:"dragenter",onDragExit:"dragexit",onDragLeave:"dragleave",onDragOver:"dragover",onDragStart:"dragstart",onDrop:"drop",onMouseDown:"mousedown",onMouseEnter:"mouseenter",onMouseLeave:"mouseleave",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onSelect:"select",onTouchCancel:"touchcancel",onTouchEnd:"touchend",onTouchMove:"touchmove",onTouchStart:"touchstart",onScroll:"scroll",onWheel:"wheel",onAbort:"abort",onCanPlay:"canplay",onCanPlayThrough:"canplaythrough",onDurationChange:"durationchange",onEmptied:"emptied",onEncrypted:"encrypted",onEnded:"ended",onError:"error",onLoadedData:"loadeddata",onLoadedMetadata:"loadedmetadata",onLoadStart:"loadstart",onPause:"pause",onPlay:"play",onPlaying:"playing",onProgress:"progress",onRateChange:"ratechange",onSeeked:"seeked",onSeeking:"seeking",onStalled:"stalled",onSuspend:"suspend",onTimeUpdate:"timeupdate",onVolumeChange:"volumechange",onWaiting:"waiting",onLoad:"load",onAnimationStart:"animationstart",onAnimationEnd:"animationend",onAnimationIteration:"animationiteration",onTransitionEnd:"transitionend"},ri=new Set(["circle","clipPath","defs","ellipse","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"]);function ni(t,e,...r){let n=[];for(let t=0;t<r.length;){const e=r[t];switch(typeof e){case"string":case"number":r[t]={text:e},t++;break;case"object":Array.isArray(e)?r.splice(t,1,...e):e?(e.context||(n.push(e),e.ambiguous&&e.ambiguous.length&&(n=n.concat(e.ambiguous))),t++):r.splice(t,1);break;default:throw new Error("Invalid child node: "+e)}}if(e){for(const t in e){const r=ei[t];r&&(e.on||(e.on={}),e.on[r]=e[t])}e.class&&(e.className=e.class)}return{tag:t,props:e,children:r,ambiguous:n}}const ii=["a","abbr","address","article","aside","audio","b","bdi","bdo","blockquote","body","button","canvas","caption","cite","code","colgroup","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","html","i","iframe","ins","kbd","label","legend","li","main","map","mark","menu","meter","nav","noscript","object","ol","optgroup","option","output","p","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","u","ul","var","video","area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"];for(const t of ii)ni[t]=(e,...r)=>ni(t,e,...r);for(const t of ri)ni[t]=(e,...r)=>ni(t,e,...r);var oi=ni,si=new Map([["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["className","class"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["panose1","panose-1"],["paintOrder","paint-order"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xHeight","x-height"]]),ai=function(t,e,r,n){r!==e&&("function"==typeof e?e(null):e&&n[e]===t&&delete n[e],"function"==typeof r?r(t):r&&(n[r]=t))};var ci=function(t,e,r,n){const i=e&&e.props,o=r.props;let s,a;n&&(s=n.refs,a=n.listenerContext),function t(e,r,n,i,o){if(n)for(var s in n)"ref"!==s&&"on"!==s&&(s in ei||o&&s in o||("dataset"===s?t(e.dataset,null,n&&n.dataset,null,null):"innerHTML"!==s&&r&&ri.has(r.tag)?e.removeAttribute(si.get(s)||s):(e[s]="",delete e[s])));if(o)for(var s in o)if("ref"!==s&&"on"!==s&&!(s in ei)){var a=n&&n[s],c=o[s];"dataset"===s?li(e.dataset,a,c,!1):"style"===s&&"string"!=typeof c?("string"==typeof a&&(e.style="",a=null),li(e.style,a,c,!0)):"attributes"===s?ui(e,a,c):c!==a&&("innerHTML"!==s&&i&&ri.has(i.tag)?e.setAttribute(si.get(s)||s,c):i&&"input"===i.tag&&"value"===s&&e[s]===c||(e[s]=c))}}(t,e,i,r,o),s&&ai(t,i&&i.ref,o&&o.ref,s),function(t,e,r,n){const i=e&&e.props&&e.props.on,o=r.props&&r.props.on;for(const r in i)if(!o||!(r in o)){let n;n=e&&e.boundListeners&&e.boundListeners[r]?e.boundListeners[r]:i[r],t.removeEventListener(r,n)}for(const s in o){const a=i&&i[s],c=o[s];if(c!==a){if(a){let r;r=e&&e.boundListeners&&e.boundListeners[s]?e.boundListeners[s]:a,t.removeEventListener(s,r)}if(c){let e;n?(e=c.bind(n),r.boundListeners||(r.boundListeners={}),r.boundListeners[s]=e):e=c,t.addEventListener(s,e)}}}}(t,e,r,a)};function li(t,e,r,n){if(e)for(var i in e)r&&i in r||(n?t[i]="":delete t[i]);if(r)for(var i in r){const n=e&&e[i],o=r[i];o!==n&&(t[i]=o)}}function ui(t,e,r){if(e)for(var n in e)r&&n in r||t.removeAttribute(n);if(r)for(var n in r){const i=e&&e[n],o=r[n];o!==i&&t.setAttribute(n,o)}}function pi(t,e){let r;if(null!=t.text)r=document.createTextNode(t.text);else{const{tag:n,children:i}=t;let{props:o,context:s}=t;if(s&&(e={refs:s.refs,listenerContext:s}),"function"==typeof n){let s;o&&o.ref&&(s=o.ref);const a=new n(o||{},i);t.component=a,r=a.element,"function"==typeof s?s(a):e&&e.refs&&s&&(e.refs[s]=a)}else ri.has(n)?(r=document.createElementNS("http://www.w3.org/2000/svg",n),i&&hi(r,i,e),o&&ci(r,null,t,e)):(r=document.createElement(n),i&&hi(r,i,e),o&&ci(r,null,t,e))}return t.domNode=r,r}function hi(t,e,r){for(let n=0;n<e.length;n++)t.appendChild(pi(e[n],r))}var di=pi;function fi(t,e,r){const n=t.domNode;if(e===t)return n;if(vi(t,e)){let i;return null!=e.text?(n.nodeValue=e.text,i=n):"function"==typeof e.tag?i=function(t,e,r){const{component:n,props:i}=t;let{props:o,children:s}=e;e.component=n;const a=r&&r.refs;a&&ai(n,i&&i.ref,o&&o.ref,a);return n.update(o||{},s),n.element}(t,e,r):(!function(t,e,r,n){var i,o=0,s=e.length-1,a=e[0],c=e[s],l=0,u=r.length-1,p=r[0],h=r[u];for(;o<=s&&l<=u;)if(a)if(c)if(vi(a,p))fi(a,p,n),a=e[++o],p=r[++l];else if(vi(c,h))fi(c,h,n),c=e[--s],h=r[--u];else if(vi(a,h))fi(a,h,n),t.insertBefore(a.domNode,c.domNode.nextSibling),a=e[++o],h=r[--u];else if(vi(c,p))fi(c,p,n),t.insertBefore(c.domNode,a.domNode),c=e[--s],p=r[++l];else{i||(mi.length>0?(i=mi.pop()).clear():i=new Map,bi(i,e,o,s));var d=yi(p),f=d?i.get(d):null;if(null==f)t.insertBefore(di(p,n),a.domNode),p=r[++l];else{var m=e[f];fi(m,p,n),e[f]=void 0,t.insertBefore(m.domNode,a.domNode),p=r[++l]}}else c=e[--s];else a=e[++o];if(o>s){var g=r[u+1]?r[u+1].domNode:null;for(let e=l;e<=u;e++)t.insertBefore(di(r[e],n),g)}else if(l>u)for(let t=o;t<=s;t++){var v=e[t];v&&gi(v,n&&n.refs)}i&&mi.push(i)}(n,t.children,e.children,r),ci(n,t,e,r),i=n),e.domNode=i,i!==n&&n.parentNode&&n.parentNode.replaceChild(i,n),i}{const i=n.parentNode,o=n.nextSibling;gi(t,r&&r.refs);const s=di(e,r);return i&&i.insertBefore(s,o),e.domNode=s,s}}let mi=[new Map,new Map,new Map,new Map];function gi(t,e,r=!0){const{domNode:n,props:i,children:o,component:s}=t,a=i&&i.ref;if(s)"function"==typeof a?a(null):e&&a&&e[a]===s&&delete e[a],s.destroy&&s.destroy();else if("function"==typeof a?a(null):e&&a&&e[a]===n&&delete e[a],o)for(let t=0;t<o.length;t++)gi(o[t],e,!1);r&&n.remove()}function vi(t,e){return yi(t)===yi(e)&&t.tag===e.tag}function yi(t){return t.props?t.props.key:void 0}function bi(t,e,r,n){for(let i=r;i<=n;i++){const r=yi(e[i]);r&&t.set(r,i)}return t}var wi=fi;let ki=null;var _i={setScheduler:function(t){ki=t},getScheduler:function(){return ki||(ki=new class{constructor(){this.updateRequests=[],this.readRequests=[],this.pendingAnimationFrame=null,this.performUpdates=this.performUpdates.bind(this),this.performingUpdates=!1}updateDocument(t){this.updateRequests.push(t),this.pendingAnimationFrame||(this.pendingAnimationFrame=window.requestAnimationFrame(this.performUpdates))}readDocument(t){this.readRequests.push(t),this.pendingAnimationFrame||(this.pendingAnimationFrame=window.requestAnimationFrame(this.performUpdates))}getNextUpdatePromise(){return this.nextUpdatePromise||(this.nextUpdatePromise=new Promise(t=>{this.resolveNextUpdatePromise=t})),this.nextUpdatePromise}performUpdates(){for(;this.updateRequests.length>0;)this.updateRequests.shift()();for(this.pendingAnimationFrame=null;this.readRequests.length>0;)this.readRequests.shift()();if(this.nextUpdatePromise){let t=this.resolveNextUpdatePromise;this.nextUpdatePromise=null,this.resolveNextUpdatePromise=null,t()}}}),ki}};const{getScheduler:xi}=_i,Si=new WeakSet;let Ei=0,Oi=0;function Pi(t){return null!=t&&!1!==t}function Mi(t,e){e.context=t,e.ambiguous&&(e.ambiguous.forEach(e=>{e.context=t}),delete e.ambiguous)}function Ai(t,e=!0){if(!Pi(t.virtualNode))throw new Error((t.constructor?t.constructor.name+" instance":t)+" is not associated with a valid virtualNode. Perhaps this component was never initialized?");if(null==t.element)throw new Error((t.constructor?t.constructor.name+" instance":t)+" is not associated with a DOM element. Perhaps this component was never initialized?");let r=t.render();if(!Pi(r)){const e=t.constructor&&t.constructor.name?" in "+t.constructor.name:"";throw new Error("invalid falsy value "+r+" returned from render()"+e)}Mi(t,r),Ei++;let n=t.virtualNode,i=t.element,o=wi(n,r,{refs:t.refs,listenerContext:t});if(t.virtualNode=r,o!==i&&!e)throw new Error("The root node type changed on update, but the update was performed with the replaceNode option set to false");t.element=o,"function"==typeof t.writeAfterUpdate&&t.writeAfterUpdate(),"function"==typeof t.readAfterUpdate&&xi().readDocument((function(){t.readAfterUpdate()})),Ei--}function ji(t,e=!0){Oi++,Ti(t.virtualNode),1===Oi&&e&&t.element.remove(),Oi--}function Ti(t){t.component&&"function"==typeof t.component.destroy?t.component.destroy():t.children&&t.children.forEach(Ti)}var Ci={initialize:function(t){if("function"!=typeof t.update)throw new Error("Etch components must implement `update(props, children)`.");let e=t.render();if(!Pi(e)){let r=t.constructor&&t.constructor.name?" in "+t.constructor.name:"";throw new Error("invalid falsy value "+e+" returned from render()"+r)}Mi(t,e),t.refs={},t.virtualNode=e,t.element=di(t.virtualNode,{refs:t.refs,listenerContext:t})},update:function(t,e=!0){if(Ei>0)return Ai(t,e),Promise.resolve();let r=xi();return Si.has(t)||(Si.add(t),r.updateDocument((function(){Si.delete(t),Ai(t,e)}))),r.getNextUpdatePromise()},updateSync:Ai,destroy:function(t,e=!0){if(Ei>0||Oi>0)return ji(t,e),Promise.resolve();let r=xi();return r.updateDocument((function(){ji(t,e)})),r.getNextUpdatePromise()},destroySync:ji};const{initialize:Di,update:Ii,updateSync:Ni,destroy:Ri,destroySync:Li}=Ci,{setScheduler:Fi,getScheduler:Bi}=_i;var Ui={dom:oi,render:di,initialize:Di,update:Ii,updateSync:Ni,destroy:Ri,destroySync:Li,setScheduler:Fi,getScheduler:Bi},zi=Ui.dom,qi=Ui.initialize,$i=Ui.update,Vi=Ui.destroy;class Gi{constructor(t){this.props=t,this.tooltipTitle=()=>{const t=void 0!==this.props.spec.displayName?this.props.spec.displayName:"Undefined name";return this.hiddenValue?`${t}: ${this.props.spec.displayTemplate(this.value)}`:t},this.disposables=new e.CompositeDisposable,this.hiddenValue=atom.config.get("ide-haskell.hideParameterValues"),this.initStore(),this.initSpec(),qi(this),this.disposables.add(atom.config.onDidChange("ide-haskell.hideParameterValues",({newValue:t})=>{this.hiddenValue=t,Yn(this.update())})),this.disposables.add(atom.tooltips.add(this.element,{title:this.tooltipTitle}))}render(){const t=["ide-haskell--"+this.props.pluginName,"ide-haskell-param--"+this.props.name];return this.hiddenValue&&t.push("hidden-value"),zi("ide-haskell-param",{class:t.join(" "),on:{click:async()=>this.setValue()}},zi("ide-haskell-param-value",null,this.props.spec.displayTemplate(this.value)))}async update(t){if(t){const{pluginName:e,name:r,spec:n,store:i}=t;void 0!==e&&(this.props.pluginName=e),void 0!==r&&(this.props.name=r),n&&this.props.spec!==n&&(this.props.spec=n,this.initSpec()),i&&this.props.store!==i&&(this.props.store=i,this.initStore())}return $i(this)}async setValue(t){await this.props.store.setValue(this.props.pluginName,this.props.name,t),Yn(this.update())}async destroy(){await Vi(this),this.disposables.dispose()}initStore(){this.storeDisposable&&this.disposables.remove(this.storeDisposable),this.storeDisposable=this.props.store.onDidUpdate(this.props.pluginName,this.props.name,({value:t})=>{this.value=t,Yn(this.update())}),this.disposables.add(this.storeDisposable),Yn(this.setValueInitial())}async setValueInitial(){return this.value=await this.props.store.getValueRaw(this.props.pluginName,this.props.name),this.update()}initSpec(){void 0===this.props.spec.displayName&&(this.props.spec.displayName=this.props.name.charAt(0).toUpperCase()+this.props.name.slice(1))}}var Hi={onCopy:"copy",onCut:"cut",onPaste:"paste",onCompositionEnd:"compositionend",onCompositionStart:"compositionstart",onCompositionUpdate:"compositionupdate",onKeyDown:"keydown",onKeyPress:"keypress",onKeyUp:"keyup",onFocus:"focus",onBlur:"blur",onChange:"change",onInput:"input",onSubmit:"submit",onClick:"click",onContextMenu:"contextmenu",onDoubleClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDragEnter:"dragenter",onDragExit:"dragexit",onDragLeave:"dragleave",onDragOver:"dragover",onDragStart:"dragstart",onDrop:"drop",onMouseDown:"mousedown",onMouseEnter:"mouseenter",onMouseLeave:"mouseleave",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onSelect:"select",onTouchCancel:"touchcancel",onTouchEnd:"touchend",onTouchMove:"touchmove",onTouchStart:"touchstart",onScroll:"scroll",onWheel:"wheel",onAbort:"abort",onCanPlay:"canplay",onCanPlayThrough:"canplaythrough",onDurationChange:"durationchange",onEmptied:"emptied",onEncrypted:"encrypted",onEnded:"ended",onError:"error",onLoadedData:"loadeddata",onLoadedMetadata:"loadedmetadata",onLoadStart:"loadstart",onPause:"pause",onPlay:"play",onPlaying:"playing",onProgress:"progress",onRateChange:"ratechange",onSeeked:"seeked",onSeeking:"seeking",onStalled:"stalled",onSuspend:"suspend",onTimeUpdate:"timeupdate",onVolumeChange:"volumechange",onWaiting:"waiting",onLoad:"load",onAnimationStart:"animationstart",onAnimationEnd:"animationend",onAnimationIteration:"animationiteration",onTransitionEnd:"transitionend"},Wi=new Set(["circle","clipPath","defs","ellipse","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"]);function Qi(t,e,...r){for(let t=0;t<r.length;){const e=r[t];switch(typeof e){case"string":case"number":r[t]={text:e},t++;break;case"object":Array.isArray(e)?r.splice(t,1,...e):e?t++:r.splice(t,1);break;default:throw new Error("Invalid child node: "+e)}}if(e){for(const t in e){const r=Hi[t];r&&(e.on||(e.on={}),e.on[r]=e[t])}e.class&&(e.className=e.class)}return{tag:t,props:e,children:r}}const Ki=["a","abbr","address","article","aside","audio","b","bdi","bdo","blockquote","body","button","canvas","caption","cite","code","colgroup","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","html","i","iframe","ins","kbd","label","legend","li","main","map","mark","menu","meter","nav","noscript","object","ol","optgroup","option","output","p","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","u","ul","var","video","area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"];for(const t of Ki)Qi[t]=(e,...r)=>Qi(t,e,...r);for(const t of Wi)Qi[t]=(e,...r)=>Qi(t,e,...r);var Xi=Qi,Yi=new Map([["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["className","class"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["panose1","panose-1"],["paintOrder","paint-order"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xHeight","x-height"]]);var Zi=function(t,e,r,n){const i=e&&e.props,o=r.props;let s,a;n&&(s=n.refs,a=n.listenerContext),function t(e,r,n,i,o){if(n)for(var s in n)"ref"!==s&&"on"!==s&&(s in Hi||o&&s in o||("dataset"===s?t(e.dataset,null,n&&n.dataset,null,null):"innerHTML"!==s&&r&&Wi.has(r.tag)?e.removeAttribute(Yi.get(s)||s):(e[s]="",delete e[s])));if(o)for(var s in o)if("ref"!==s&&"on"!==s&&!(s in Hi)){var a=n&&n[s],c=o[s];"dataset"===s?Ji(e.dataset,a,c,!1):"style"===s&&"string"!=typeof c?("string"==typeof a&&(e.style="",a=null),Ji(e.style,a,c,!0)):"attributes"===s?to(e,a,c):c!==a&&("innerHTML"!==s&&i&&Wi.has(i.tag)?e.setAttribute(Yi.get(s)||s,c):i&&"input"===i.tag&&"value"===s&&e[s]===c||(e[s]=c))}}(t,e,i,r,o),s&&function(t,e,r,n){r!==e&&(e&&n[e]===t&&delete n[e],r&&(n[r]=t))}(t,i&&i.ref,o&&o.ref,s),function(t,e,r,n){const i=e&&e.props&&e.props.on,o=r.props&&r.props.on;for(const r in i)if(!o||!(r in o)){let n;n=e&&e.boundListeners&&e.boundListeners[r]?e.boundListeners[r]:i[r],t.removeEventListener(r,n)}for(const s in o){const a=i&&i[s],c=o[s];if(c!==a){if(a){let r;r=e&&e.boundListeners&&e.boundListeners[s]?e.boundListeners[s]:a,t.removeEventListener(s,r)}if(c){let e;n?(e=c.bind(n),r.boundListeners||(r.boundListeners={}),r.boundListeners[s]=e):e=c,t.addEventListener(s,e)}}}}(t,e,r,a)};function Ji(t,e,r,n){if(e)for(var i in e)r&&i in r||(n?t[i]="":delete t[i]);if(r)for(var i in r){const n=e&&e[i],o=r[i];o!==n&&(t[i]=o)}}function to(t,e,r){if(e)for(var n in e)r&&n in r||t.removeAttribute(n);if(r)for(var n in r){const i=e&&e[n],o=r[n];o!==i&&t.setAttribute(n,o)}}function eo(t,e){let r;if(null!=t.text)r=document.createTextNode(t.text);else{const{tag:n,children:i}=t;let{props:o}=t;if("function"==typeof n){let s;o&&o.ref&&(s=o.ref);const a=new n(o||{},i);t.component=a,r=a.element,e&&e.refs&&s&&(e.refs[s]=a)}else Wi.has(n)?(r=document.createElementNS("http://www.w3.org/2000/svg",n),i&&ro(r,i,e),o&&Zi(r,null,t,e)):(r=document.createElement(n),i&&ro(r,i,e),o&&Zi(r,null,t,e))}return t.domNode=r,r}function ro(t,e,r){for(let n=0;n<e.length;n++)t.appendChild(eo(e[n],r))}var no=eo;function io(t,e,r){const n=t.domNode;if(e===t)return n;if(ao(t,e)){let i;return null!=e.text?(n.nodeValue=e.text,i=n):"function"==typeof e.tag?i=function(t,e,r){const{component:n,props:i}=t;let{props:o,children:s}=e;if(e.component=n,r&&r.refs){const t=r.refs,e=i&&i.ref,s=o&&o.ref;s!==e&&(e&&t[e]===n&&delete t[e],s&&(t[s]=n))}return n.update(o||{},s),n.element}(t,e,r):(!function(t,e,r,n){var i,o=0,s=e.length-1,a=e[0],c=e[s],l=0,u=r.length-1,p=r[0],h=r[u];for(;o<=s&&l<=u;)if(a)if(c)if(ao(a,p))io(a,p,n),a=e[++o],p=r[++l];else if(ao(c,h))io(c,h,n),c=e[--s],h=r[--u];else if(ao(a,h))io(a,h,n),t.insertBefore(a.domNode,c.domNode.nextSibling),a=e[++o],h=r[--u];else if(ao(c,p))io(c,p,n),t.insertBefore(c.domNode,a.domNode),c=e[--s],p=r[++l];else{i||(oo.length>0?(i=oo.pop()).clear():i=new Map,lo(i,e,o,s));var d=co(p),f=d?i.get(d):null;if(null==f)t.insertBefore(no(p,n),a.domNode),p=r[++l];else{var m=e[f];io(m,p,n),e[f]=void 0,t.insertBefore(m.domNode,a.domNode),p=r[++l]}}else c=e[--s];else a=e[++o];if(o>s){var g=r[u+1]?r[u+1].domNode:null;for(let e=l;e<=u;e++)t.insertBefore(no(r[e],n),g)}else if(l>u)for(let t=o;t<=s;t++){var v=e[t];v&&so(v,n&&n.refs)}i&&oo.push(i)}(n,t.children,e.children,r),Zi(n,t,e,r),i=n),e.domNode=i,i!==n&&n.parentNode&&n.parentNode.replaceChild(i,n),i}{const i=n.parentNode,o=n.nextSibling;so(t,r&&r.refs);const s=no(e,r);return i&&i.insertBefore(s,o),e.domNode=s,s}}let oo=[new Map,new Map,new Map,new Map];function so(t,e,r=!0){const{domNode:n,props:i,children:o,component:s}=t,a=i&&i.ref;if(s)e&&a&&e[a]===s&&delete e[a],s.destroy&&s.destroy();else if(e&&a&&e[a]===n&&delete e[a],o)for(let t=0;t<o.length;t++)so(o[t],e,!1);r&&n.remove()}function ao(t,e){return co(t)===co(e)&&t.tag===e.tag}function co(t){return t.props?t.props.key:void 0}function lo(t,e,r,n){for(let i=r;i<=n;i++){const r=co(e[i]);r&&t.set(r,i)}return t}var uo=io;let po=null;var ho={setScheduler:function(t){po=t},getScheduler:function(){return po||(po=new class{constructor(){this.updateRequests=[],this.readRequests=[],this.pendingAnimationFrame=null,this.performUpdates=this.performUpdates.bind(this),this.performingUpdates=!1}updateDocument(t){this.updateRequests.push(t),this.pendingAnimationFrame||(this.pendingAnimationFrame=window.requestAnimationFrame(this.performUpdates))}readDocument(t){this.readRequests.push(t),this.pendingAnimationFrame||(this.pendingAnimationFrame=window.requestAnimationFrame(this.performUpdates))}getNextUpdatePromise(){return this.nextUpdatePromise||(this.nextUpdatePromise=new Promise(t=>{this.resolveNextUpdatePromise=t})),this.nextUpdatePromise}performUpdates(){for(;this.updateRequests.length>0;)this.updateRequests.shift()();for(this.pendingAnimationFrame=null;this.readRequests.length>0;)this.readRequests.shift()();if(this.nextUpdatePromise){let t=this.resolveNextUpdatePromise;this.nextUpdatePromise=null,this.resolveNextUpdatePromise=null,t()}}}),po}};const{getScheduler:fo}=ho,mo=new WeakSet;let go=0,vo=0;function yo(t){return null!=t&&!1!==t}function bo(t,e=!0){if(!yo(t.virtualNode))throw new Error((t.constructor?t.constructor.name+" instance":t)+" is not associated with a valid virtualNode. Perhaps this component was never initialized?");if(null==t.element)throw new Error((t.constructor?t.constructor.name+" instance":t)+" is not associated with a DOM element. Perhaps this component was never initialized?");let r=t.render();if(!yo(r)){const e=t.constructor&&t.constructor.name?" in "+t.constructor.name:"";throw new Error("invalid falsy value "+r+" returned from render()"+e)}go++;let n=t.virtualNode,i=t.element,o=uo(n,r,{refs:t.refs,listenerContext:t});if(t.virtualNode=r,o!==i&&!e)throw new Error("The root node type changed on update, but the update was performed with the replaceNode option set to false");t.element=o,"function"==typeof t.writeAfterUpdate&&t.writeAfterUpdate(),"function"==typeof t.readAfterUpdate&&fo().readDocument((function(){t.readAfterUpdate()})),go--}function wo(t,e=!0){vo++,ko(t.virtualNode),1===vo&&e&&t.element.remove(),vo--}function ko(t){t.component&&"function"==typeof t.component.destroy?t.component.destroy():t.children&&t.children.forEach(ko)}var _o={initialize:function(t){if("function"!=typeof t.update)throw new Error("Etch components must implement `update(props, children)`.");let e=t.render();if(!yo(e)){let r=t.constructor&&t.constructor.name?" in "+t.constructor.name:"";throw new Error("invalid falsy value "+e+" returned from render()"+r)}t.refs={},t.virtualNode=e,t.element=no(t.virtualNode,{refs:t.refs,listenerContext:t})},update:function(t,e=!0){if(go>0)return bo(t,e),Promise.resolve();let r=fo();return mo.has(t)||(mo.add(t),r.updateDocument((function(){mo.delete(t),bo(t,e)}))),r.getNextUpdatePromise()},updateSync:bo,destroy:function(t,e=!0){if(go>0||vo>0)return wo(t,e),Promise.resolve();let r=fo();return r.updateDocument((function(){wo(t,e)})),r.getNextUpdatePromise()},destroySync:wo};const{initialize:xo,update:So,updateSync:Eo,destroy:Oo,destroySync:Po}=_o,{setScheduler:Mo,getScheduler:Ao}=ho;var jo={dom:Xi,render:no,initialize:xo,update:So,updateSync:Eo,destroy:Oo,destroySync:Po,setScheduler:Mo,getScheduler:Ao},To=O((function(t,e){(function(){var t,r;t=i.sep,e.basenameScore=function(r,n,i){var o,s,a,c,l;for(s=r.length-1;r[s]===t;)s--;for(l=0,a=s,o=null;s>=0;)r[s]===t?(l++,null==o&&(o=r.substring(s+1,a+1))):0===s&&(a<r.length-1?null==o&&(o=r.substring(0,a+1)):null==o&&(o=r)),s--;return o===r?i*=2:o&&(i+=e.score(o,n)),c=l+1,i*=.01*Math.max(1,10-c)},e.score=function(e,n){var i,o,s,a,c,l,u,p,h,d,f,m;if(e===n)return 1;if(r(e,n))return 1;for(d=0,u=n.length,h=e.length,s=0,a=0;s<u;){if(i=n[s++],c=e.indexOf(i.toLowerCase()),f=e.indexOf(i.toUpperCase()),-1===(l=Math.min(c,f))&&(l=Math.max(c,f)),-1===(a=l))return 0;o=.1,e[a]===i&&(o+=.1),0===a||e[a-1]===t?o+=.8:"-"!==(m=e[a-1])&&"_"!==m&&" "!==m||(o+=.7),e=e.substring(a+1,h),d+=o}return((p=d/u)*(u/h)+p)/2},r=function(e,r){if(e[e.length-r.length-1]===t)return e.lastIndexOf(r)===e.length-r.length}}).call(S)})),Co=(To.basenameScore,To.score,O((function(t){(function(){var e,r,n;r=To,e=function(t){return t.candidate},n=function(t,e){return e.score-t.score},t.exports=function(t,i,o,s){var a,c,l,u,p,h,d,f,m;if(c=(m=null!=s?s:{}).key,l=m.maxResults,i){for(p=[],d=0,f=t.length;d<f;d++)a=t[d],(h=null!=c?a[c]:a)&&(u=r.score(h,i,o),o||(u=r.basenameScore(h,i,u)),u>0&&p.push({candidate:a,score:u}));p.sort(n),t=p.map(e)}return null!=l&&(t=t.slice(0,l)),t}}).call(S)}))),Do=O((function(t,e){(function(){var t;t=i.sep,e.basenameMatch=function(r,n){var i,o,s;for(o=r.length-1;r[o]===t;)o--;for(s=o,i=null;o>=0;)r[o]===t?null==i&&(i=r.substring(o+1,s+1)):0===o&&(s<r.length-1?null==i&&(i=r.substring(0,s+1)):null==i&&(i=r)),o--;return e.match(i,n,r.length-i.length)},e.match=function(t,e,r){var n,i,o,s,a,c,l,u,p,h;if(null==r&&(r=0),t===e)return function(){h=[];for(var e=r,n=r+t.length;r<=n?e<n:e>n;r<=n?e++:e--)h.push(e);return h}.apply(this);for(l=e.length,u=t.length,i=0,o=0,a=[];i<l;){if(n=e[i++],s=t.indexOf(n.toLowerCase()),p=t.indexOf(n.toUpperCase()),-1===(c=Math.min(s,p))&&(c=Math.max(s,p)),-1===(o=c))return[];a.push(r+o),r+=o+1,t=t.substring(o+1,u)}return a}}).call(S)})),Io=(Do.basenameMatch,Do.match,O((function(t){(function(){var e,r,n,o,s;s=To,n=Co,o=Do,e=i.sep,r=/\ /g,t.exports={filter:function(t,i,o){var s;return i&&(s=-1!==i.indexOf(e),i=i.replace(r,"")),n(t,i,s,o)},score:function(t,n){var i,o;return t&&n?t===n?2:(i=-1!==n.indexOf(e),n=n.replace(r,""),o=s.score(t,n),i||(o=s.basenameScore(t,n,o)),o):0},match:function(t,n){var i,s,a,c,l,u;if(!t)return[];if(!n)return[];if(t===n)return function(){u=[];for(var e=0,r=t.length;0<=r?e<r:e>r;0<=r?e++:e--)u.push(e);return u}.apply(this);if(c=-1!==n.indexOf(e),n=n.replace(r,""),a=o.match(t,n),!c)for(i=o.basenameMatch(t,n),a=a.concat(i).sort((function(t,e){return t-e})),l=null,s=0;s<a.length;)s&&l===a[s]?a.splice(s,1):(l=a[s],s++);return a}}}).call(S)})));Io.filter,Io.score,Io.match;const{Disposable:No,CompositeDisposable:Ro,TextEditor:Lo}=r,Fo=jo.dom;class Bo{constructor(t){this.mouseDown=this.mouseDown.bind(this),this.mouseUp=this.mouseUp.bind(this),this.didClick=this.didClick.bind(this),this.selected=t.selected,this.onclick=t.onclick,this.element=t.element,this.element.addEventListener("mousedown",this.mouseDown),this.element.addEventListener("mouseup",this.mouseUp),this.element.addEventListener("click",this.didClick),this.selected&&this.element.classList.add("selected"),this.domEventsDisposable=new No(()=>{this.element.removeEventListener("mousedown",this.mouseDown),this.element.removeEventListener("mouseup",this.mouseUp),this.element.removeEventListener("click",this.didClick)}),jo.getScheduler().updateDocument(this.scrollIntoViewIfNeeded.bind(this))}mouseDown(t){t.preventDefault()}mouseUp(t){t.preventDefault()}didClick(t){t.preventDefault(),this.onclick()}destroy(){this.element.remove(),this.domEventsDisposable.dispose()}update(t){this.element.removeEventListener("mousedown",this.mouseDown),this.element.removeEventListener("mouseup",this.mouseUp),this.element.removeEventListener("click",this.didClick),this.element.parentNode.replaceChild(t.element,this.element),this.element=t.element,this.element.addEventListener("mousedown",this.mouseDown),this.element.addEventListener("mouseup",this.mouseUp),this.element.addEventListener("click",this.didClick),t.selected&&this.element.classList.add("selected"),this.selected=t.selected,this.onclick=t.onclick,jo.getScheduler().updateDocument(this.scrollIntoViewIfNeeded.bind(this))}scrollIntoViewIfNeeded(){this.selected&&this.element.scrollIntoViewIfNeeded(!1)}}async function Uo({items:t,heading:e,itemTemplate:r,itemFilterKey:n,activeItem:i}){const o=t=>{const e=document.createElement("li"),n=document.createElement("div");let o;return n.style.display="inline-block",r?(n.innerHTML=r(t),o=i&&r(t)===r(i)):(n.innerText=""+t,o=i&&t===i),o&&e.classList.add("active"),n.firstElementChild&&"LI"===n.firstElementChild.tagName&&(n.innerHTML=n.firstElementChild.innerHTML),e.appendChild(n),e},s=t=>"string"==typeof n?""+t[n]:n?n(t):""+t,a=await Promise.resolve(t);let c;try{return await new Promise(t=>{const r=new class{static setScheduler(t){jo.setScheduler(t)}static getScheduler(t){return jo.getScheduler()}constructor(t){this.props=t,this.props.hasOwnProperty("initialSelectionIndex")||(this.props.initialSelectionIndex=0),t.initiallyVisibleItemCount&&this.initializeVisibilityObserver(),this.computeItems(!1),this.disposables=new Ro,jo.initialize(this),this.element.classList.add("select-list"),this.disposables.add(this.refs.queryEditor.onDidChange(this.didChangeQuery.bind(this))),t.skipCommandsRegistration||this.disposables.add(this.registerAtomCommands());const e=this.refs.queryEditor.element,r=this.didLoseFocus.bind(this);e.addEventListener("blur",r),this.didClickItemsList=!1,this.element.addEventListener("mousedown",t=>{t.target===this.refs.items&&(this.didClickItemsList=!0)}),this.disposables.add(new No(()=>{e.removeEventListener("blur",r)}))}initializeVisibilityObserver(){this.visibilityObserver=new IntersectionObserver(t=>{for(const e of t)if(e.intersectionRatio>0){const t=e.target;this.visibilityObserver.unobserve(t);const r=Array.from(this.refs.items.children).indexOf(t);r>=0&&this.renderItemAtIndex(r)}})}focus(){this.refs.queryEditor.element.focus()}didLoseFocus(t){this.didClickItemsList||this.element.contains(t.relatedTarget)?(this.didClickItemsList=!1,this.refs.queryEditor.element.focus()):document.hasFocus()&&this.cancelSelection()}reset(){this.refs.queryEditor.setText("")}destroy(){return this.disposables.dispose(),this.visibilityObserver&&this.visibilityObserver.disconnect(),jo.destroy(this)}registerAtomCommands(){return S.atom.commands.add(this.element,{"core:move-up":t=>{this.selectPrevious(),t.stopPropagation()},"core:move-down":t=>{this.selectNext(),t.stopPropagation()},"core:move-to-top":t=>{this.selectFirst(),t.stopPropagation()},"core:move-to-bottom":t=>{this.selectLast(),t.stopPropagation()},"core:confirm":t=>{this.confirmSelection(),t.stopPropagation()},"core:cancel":t=>{this.cancelSelection(),t.stopPropagation()}})}update(t={}){let e=!1;return t.hasOwnProperty("items")&&(this.props.items=t.items,e=!0),t.hasOwnProperty("maxResults")&&(this.props.maxResults=t.maxResults,e=!0),t.hasOwnProperty("filter")&&(this.props.filter=t.filter,e=!0),t.hasOwnProperty("filterQuery")&&(this.props.filterQuery=t.filterQuery,e=!0),t.hasOwnProperty("query")&&(this.refs.queryEditor.setText(t.query),e=!1),t.hasOwnProperty("selectQuery")&&(t.selectQuery?this.refs.queryEditor.selectAll():this.refs.queryEditor.clearSelections()),t.hasOwnProperty("order")&&(this.props.order=t.order),t.hasOwnProperty("emptyMessage")&&(this.props.emptyMessage=t.emptyMessage),t.hasOwnProperty("errorMessage")&&(this.props.errorMessage=t.errorMessage),t.hasOwnProperty("infoMessage")&&(this.props.infoMessage=t.infoMessage),t.hasOwnProperty("loadingMessage")&&(this.props.loadingMessage=t.loadingMessage),t.hasOwnProperty("loadingBadge")&&(this.props.loadingBadge=t.loadingBadge),t.hasOwnProperty("itemsClassList")&&(this.props.itemsClassList=t.itemsClassList),t.hasOwnProperty("initialSelectionIndex")&&(this.props.initialSelectionIndex=t.initialSelectionIndex),e&&this.computeItems(),jo.update(this)}render(){return Fo.div({},Fo(Lo,{ref:"queryEditor",mini:!0}),this.renderLoadingMessage(),this.renderInfoMessage(),this.renderErrorMessage(),this.renderItems())}renderItems(){if(this.items.length>0){const t=["list-group"].concat(this.props.itemsClassList||[]).join(" ");return this.visibilityObserver&&jo.getScheduler().updateDocument(()=>{Array.from(this.refs.items.children).slice(this.props.initiallyVisibleItemCount).forEach(t=>{this.visibilityObserver.observe(t)})}),this.listItems=this.items.map((t,e)=>{const r=this.getSelectedItem()===t,n=!this.props.initiallyVisibleItemCount||e<this.props.initiallyVisibleItemCount;return Fo(Bo,{element:this.props.elementForItem(t,{selected:r,index:e,visible:n}),selected:r,onclick:()=>this.didClickItem(e)})}),Fo.ol({className:t,ref:"items"},...this.listItems)}return!this.props.loadingMessage&&this.props.emptyMessage?Fo.span({ref:"emptyMessage"},this.props.emptyMessage):""}renderErrorMessage(){return this.props.errorMessage?Fo.span({ref:"errorMessage"},this.props.errorMessage):""}renderInfoMessage(){return this.props.infoMessage?Fo.span({ref:"infoMessage"},this.props.infoMessage):""}renderLoadingMessage(){return this.props.loadingMessage?Fo.div({className:"loading"},Fo.span({ref:"loadingMessage",className:"loading-message"},this.props.loadingMessage),this.props.loadingBadge?Fo.span({ref:"loadingBadge",className:"badge"},this.props.loadingBadge):""):""}getQuery(){return this.refs&&this.refs.queryEditor?this.refs.queryEditor.getText():""}getFilterQuery(){return this.props.filterQuery?this.props.filterQuery(this.getQuery()):this.getQuery()}didChangeQuery(){this.props.didChangeQuery&&this.props.didChangeQuery(this.getFilterQuery()),this.computeItems()}didClickItem(t){this.selectIndex(t),this.confirmSelection()}computeItems(t){this.listItems=null,this.visibilityObserver&&this.visibilityObserver.disconnect();const e=this.props.filter||this.fuzzyFilter.bind(this);this.items=e(this.props.items.slice(),this.getFilterQuery()),this.props.order&&this.items.sort(this.props.order),this.props.maxResults&&(this.items=this.items.slice(0,this.props.maxResults)),this.selectIndex(this.props.initialSelectionIndex,t)}fuzzyFilter(t,e){if(0===e.length)return t;{const r=[];for(const n of t){const t=this.props.filterKeyForItem?this.props.filterKeyForItem(n):n;let i=Io.score(t,e);i>0&&r.push({item:n,score:i})}return r.sort((t,e)=>e.score-t.score),r.map(t=>t.item)}}getSelectedItem(){return void 0===this.selectionIndex?null:this.items[this.selectionIndex]}renderItemAtIndex(t){const e=this.items[t],r=this.getSelectedItem()===e,n=this.listItems[t].component;this.visibilityObserver&&this.visibilityObserver.unobserve(n.element),n.update({element:this.props.elementForItem(e,{selected:r,index:t,visible:!0}),selected:r,onclick:()=>this.didClickItem(t)})}selectPrevious(){return void 0===this.selectionIndex?this.selectLast():this.selectIndex(this.selectionIndex-1)}selectNext(){return void 0===this.selectionIndex?this.selectFirst():this.selectIndex(this.selectionIndex+1)}selectFirst(){return this.selectIndex(0)}selectLast(){return this.selectIndex(this.items.length-1)}selectNone(){return this.selectIndex(void 0)}selectIndex(t,e=!0){t>=this.items.length?t=0:t<0&&(t=this.items.length-1);const r=this.selectionIndex;return this.selectionIndex=t,void 0!==t&&this.props.didChangeSelection&&this.props.didChangeSelection(this.getSelectedItem()),e?this.listItems?(r>=0&&this.renderItemAtIndex(r),t>=0&&this.renderItemAtIndex(t),jo.getScheduler().getNextUpdatePromise()):jo.update(this):Promise.resolve()}selectItem(t){const e=this.items.indexOf(t);if(-1===e)throw new Error("Cannot select the specified item because it does not exist.");return this.selectIndex(e)}confirmSelection(){const t=this.getSelectedItem();null!=t?this.props.didConfirmSelection&&this.props.didConfirmSelection(t):this.props.didConfirmEmptySelection&&this.props.didConfirmEmptySelection()}cancelSelection(){this.props.didCancelSelection&&this.props.didCancelSelection()}}({items:a,infoMessage:e,itemsClassList:["ide-haskell","mark-active"],elementForItem:o,filterKeyForItem:s,didCancelSelection:()=>{t()},didConfirmSelection:e=>{t(e)}});r.element.classList.add("ide-haskell"),c=atom.workspace.addModalPanel({item:r,visible:!0}),r.focus()})}finally{c&&c.destroy()}}class zo{constructor(t={}){this.disposables=new e.CompositeDisposable,this.emitter=new e.Emitter,this.disposables.add(this.emitter),this.saved=t,this.plugins=new Map}serialize(){return this.saved}destroy(){this.disposables.dispose()}onDidUpdate(t,e,r){return this.emitter.on("did-update",n=>{n.pluginName===t&&n.paramName===e&&r(n)})}addParamSpec(t,r,n){let i=this.plugins.get(t);if(i||(i=new Map,this.plugins.set(t,i)),i.has(r))throw new Error(`Parameter ${t}.${r} already defined!`);let o=this.saved[`${t}.${r}`];return void 0===o&&(o=n.default),i.set(r,{spec:n,value:o}),this.emitter.emit("did-update",{pluginName:t,paramName:r,value:o}),new e.Disposable(()=>{i&&(i.delete(r),0===i.size&&this.plugins.delete(t))})}async setValue(t,e,r){const n=await this.getParamConfig(t,e,"set");if(void 0!==n)return void 0===r&&(r=await this.showSelect(n)),void 0!==r&&(n.value=r,this.saved[`${t}.${e}`]=r,this.emitter.emit("did-update",{pluginName:t,paramName:e,value:r})),r}async getValue(t,e){const r=await this.getParamConfig(t,e,"get");if(void 0!==r)return void 0===r.value&&await this.setValue(t,e),r.value}async getValueRaw(t,e){const r=await this.getParamConfig(t,e,"get raw");if(void 0!==r)return r.value}async getParamConfig(t,e,r){if(!atom.packages.isPackageLoaded(t))return void console.error(new Error(`No ${t} package while trying to ${r} ${t}.${e}`));atom.packages.isPackageActive(t)||await atom.packages.activatePackage(t);const n=this.plugins.get(t);if(!n)throw new Error(`${t} is not defined while trying to ${r} ${t}.${e}`);const i=n.get(e);if(!i)throw new Error(`${e} is not defined while trying to ${r} ${t}.${e}`);return i}async showSelect(t){const e=t.spec;return Uo({items:"function"==typeof e.items?e.items():e.items,heading:e.description,itemTemplate:e.itemTemplate.bind(e),itemFilterKey:e.itemFilterKey,activeItem:t.value})}}class qo{constructor(t,e){this.outputPanel=t,this.store=new zo(e)}destroy(){this.store.destroy()}serialize(){return this.store.serialize()}add(t,r,n){const i=new e.CompositeDisposable;return i.add(this.store.addParamSpec(t,r,n),this.outputPanel.addPanelControl({element:Gi,opts:{pluginName:t,name:r,spec:n,store:this.store}})),i}async get(t,e){return this.store.getValue(t,e)}async set(t,e,r){return this.store.setValue(t,e,r)}}class $o{constructor(t){Array.isArray(t)?this.message=t.map(t=>zi("div",{key:t,innerHTML:t.toHtml()})):this.message=[zi("div",{key:t,innerHTML:t.toHtml()})],qi(this)}render(){return zi("ide-haskell-tooltip",null,this.message)}async update(){return $i(this)}writeAfterUpdate(){this.element.parentElement&&this.element.parentElement.classList.add("ide-haskell")}}class Vo{constructor(t,e){this.editor=t,this.table=Object.create(null);for(const t of F)this.table[t]=new Map;this.layers=new Set;for(const t of e){const e=this.editor.addMarkerLayer();this.layers.add(e);for(const{type:r,source:n}of t)this.table[r].set(n,e)}}destroy(){for(const t of this.layers.values())t.destroy();for(const t of this.values())t.clear()}get(t,e){const r=this.table[t];let n=r.get(e);if(n||(n=r.get(void 0)),!n)throw new Error(`Failed to classify ${t}:${e}`);return n}clear(){for(const t of this.layers.values())t.clear()}getMarkerCount(){let t=0;for(const e of this.layers.values())t+=e.getMarkerCount();return t}*values(){for(const t of F)yield this.table[t]}*entries(){for(const t of F)yield[t,this.table[t]]}}class Go{constructor(t){this.editor=t,this.markers=new Vo(t,[[{type:"keyboard"},{type:"context"}],[{type:"mouse"},{type:"selection"}]]),this.editorElement=atom.views.getView(this.editor)}dispose(){this.markers.destroy(),this.editorElement.classList.remove("ide-haskell--has-tooltips")}show(t,e,r,n,i){this.hide(r,n);const o=this.markers.get(r,n).markBufferRange(t);o.setProperties(i),this.decorate(o,new $o(e)),this.editorElement.classList.add("ide-haskell--has-tooltips")}hide(t,e,r){void 0!==t?(r?this.markers.get(t,e).findMarkers(r).forEach(t=>t.destroy()):this.markers.get(t,e).clear(),this.has()||this.editorElement.classList.remove("ide-haskell--has-tooltips")):this.markers.clear()}has(t,e,r){return void 0===t?this.markers.getMarkerCount()>0:r?this.markers.get(t,e).findMarkers(r).length>0:this.markers.get(t,e).getMarkerCount()>0}decorate(t,e){this.editor.decorateMarker(t,{type:"overlay",position:"tail",item:e}),this.editor.decorateMarker(t,{type:"highlight",class:"ide-haskell-type"})}}class Ho{constructor(t,r){this.editor=t,this.trackMouseBufferPosition=t=>{const e=Xn(this.editor,t);e&&(this.lastMouseBufferPt&&this.lastMouseBufferPt.isEqual(e)||(this.lastMouseBufferPt=e,void 0!==this.exprTypeTimeout&&clearTimeout(this.exprTypeTimeout),this.exprTypeTimeout=window.setTimeout(()=>{this.shouldShowTooltip(e,"mouse")},atom.config.get("ide-haskell.expressionTypeInterval",{scope:this.editor.getRootScopeDescriptor()}))))},this.stopTrackingMouseBufferPosition=()=>{if(void 0!==this.exprTypeTimeout)return clearTimeout(this.exprTypeTimeout)},this.trackSelection=({newBufferRange:t})=>{this.handleCursorUnderTooltip(t),void 0!==this.selTimeout&&clearTimeout(this.selTimeout),t.isEmpty()?(this.tooltips.hide("selection"),void 0!==this.exprTypeTimeout&&clearTimeout(this.exprTypeTimeout),Yn(this.tooltipRegistry.showTooltip(this.editor,"keyboard")),"Hide Tooltip"===atom.config.get("ide-haskell.onCursorMove",{scope:this.editor.getRootScopeDescriptor()})&&(this.tooltips.hide("mouse",void 0,{persistent:!1}),this.tooltips.hide("context",void 0,{persistent:!1}))):this.selTimeout=window.setTimeout(()=>this.shouldShowTooltip(t.start,"selection"),atom.config.get("ide-haskell.expressionTypeInterval",{scope:this.editor.getRootScopeDescriptor()}))},this.disposables=new e.CompositeDisposable,this.tooltips=new Go(this.editor),this.disposables.add(this.tooltips),this.tooltipRegistry=r.tooltipRegistry,this.editorElement=atom.views.getView(this.editor);const n=this.editor.getBuffer();this.disposables.add(n.onWillSave(async()=>{await r.willSaveBuffer(n)}),n.onDidSave(()=>r.didSaveBuffer(n)),this.editor.onDidStopChanging(()=>r.didStopChanging(n)),this.editorElement.onDidChangeScrollLeft(()=>this.tooltips.hide("mouse")),this.editorElement.onDidChangeScrollTop(()=>this.tooltips.hide("mouse")),Qn(this.editorElement,"mousemove",".scroll-view",this.trackMouseBufferPosition),Qn(this.editorElement,"mouseout",".scroll-view",this.stopTrackingMouseBufferPosition),this.editor.onDidChangeSelectionRange(this.trackSelection))}static supportsGrammar(t){return["source.haskell","text.tex.latex.haskell"].includes(t)}destroy(){void 0!==this.exprTypeTimeout&&clearTimeout(this.exprTypeTimeout),void 0!==this.selTimeout&&clearTimeout(this.selTimeout),this.disposables.dispose(),this.lastMouseBufferPt=void 0}getEventRange(t){let r,n;switch(t){case"mouse":case"context":if(!this.lastMouseBufferPt)return;n=this.lastMouseBufferPt;const t=this.editor.getSelections().map(t=>t.getBufferRange()).filter(t=>t.containsPoint(n));r=t.length>0?t[0]:new e.Range(n,n);break;case"keyboard":case"selection":r=this.editor.getLastSelection().getBufferRange(),n=r.start;break;default:throw new TypeError("Switch assertion failed")}return{crange:r,pos:n,eventType:t}}shouldShowTooltip(t,e){t.row<0||t.row>=this.editor.getLineCount()||t.isEqual(this.editor.getBuffer().rangeForRow(t.row,!1).end)?this.tooltips.hide(e):Yn(this.tooltipRegistry.showTooltip(this.editor,e))}handleCursorUnderTooltip(t){const e=document.querySelector("ide-haskell-tooltip");if(!e)return;const r=this.editorElement.pixelRectForScreenRange(this.editor.screenRangeForBufferRange(t)),n=this.editorElement.querySelector(".scroll-view");if(!n)return;const i=n.getBoundingClientRect(),o=e.getBoundingClientRect(),s=e.querySelector("div");if(!s)return;const a=s.getBoundingClientRect(),c={left:o.left-i.left,top:a.top-i.top,width:o.width,height:a.height},l=Math.round(Math.max(c.left,r.left)),u=Math.round(Math.min(c.left+c.width,r.left+r.width)),p=Math.round(Math.max(c.top,r.top)),h=Math.round(Math.min(c.top+c.height,r.top+r.height)),d=document.querySelector("ide-haskell-tooltip");d&&(p<=h&&l<=u?d.classList.add("ide-haskell-tooltip-subdued"):d.classList.remove("ide-haskell-tooltip-subdued"))}}class Wo{constructor(t,r){this.linter=t,this.resultDb=r,this.update=()=>{this.linter.clearMessages(),this.linter.setAllMessages(Array.from(this.messages()))},this.disposables=new e.CompositeDisposable,this.disposables.add(r.onDidUpdate(this.update))}destroy(){this.disposables.dispose(),this.linter.dispose()}*messages(){for(const t of this.resultDb.results())if(void 0!==t.uri&&t.position){let r;switch(t.severity){case"error":case"warning":r=t.severity;break;default:r="info"}yield{severity:r,excerpt:t.message.toPlain(),location:{file:t.uri,position:new e.Range(t.position,t.position.translate([0,1]))}}}}}class Qo{constructor(t){this.pluginManager=t,this.providers=[]}dispose(){this.providers=[]}register(t,r){const n=this.providers.findIndex(({priority:t})=>t<r.priority),i={pluginName:t,eventTypes:r.eventTypes?r.eventTypes:["selection","mouse"],priority:r.priority,handler:r.handler};return-1===n?this.providers.push(i):this.providers.splice(n,0,i),new e.Disposable(()=>{const t=this.providers.indexOf(i);this.providers.splice(t,1)})}async showTooltip(t,r,n){const i=this.pluginManager.controller(t);if(!i)return;let o,s;if(n&&"function"!=typeof n.tooltip)s=n.tooltip,o=n.pluginName;else{const e=i.getEventRange(r);if(!e)return;if(n&&"function"==typeof n.tooltip){o=n.pluginName;const t=this.pluginManager.getAwaiter(o),r=n.tooltip,i=await t(()=>r(e.crange));if(void 0===i)return;s=i}else{const n=await this.defaultTooltipFunction(t,r,e.crange);if(!n)return void i.tooltips.hide(r,void 0,{persistent:!1});({pluginName:o,tooltipData:s}=n)}const a=i.getEventRange(r);if(!a||!e.crange.isEqual(a.crange))return}const{persistent:a=!1}=s;let c;c=Array.isArray(s.text)?s.text.map(Wn.fromObject):Wn.fromObject(s.text),i.tooltips.show(e.Range.fromObject(s.range),c,r,o,{persistent:a})}hideTooltip(t,e,r){const n=this.pluginManager.controller(t);n&&n.tooltips.hide(e,r)}async defaultTooltipFunction(t,e,r){for(const{pluginName:n,handler:i,eventTypes:o}of this.providers){if(!o.includes(e))continue;const s=this.pluginManager.getAwaiter(n),a=await s(()=>i(t,r,e));if(void 0!==a)return{pluginName:n,tooltipData:a}}}}class Ko{constructor(t,r){this.editor=t,this.updateResults=()=>{const t=this.editor.getPath(),e=Array.from(this.resultsDB.filter(e=>e.uri===t&&e.isValid())),r=this.markers.getMarkers(),n=e.filter(t=>r.every(e=>this.markerProps.get(e)!==t));r.filter(t=>{const r=this.markerProps.get(t);return!r||!e.includes(r)}).forEach(t=>t.destroy());for(const t of n)this.markerFromCheckResult(t)};const n=this.editor.gutterWithName("ide-haskell-check-results");this.gutter=n||this.editor.addGutter({name:"ide-haskell-check-results",priority:10}),this.gutterElement=atom.views.getView(this.gutter),this.resultsDB=r.resultsDB,this.tooltipRegistry=r.tooltipRegistry,this.disposables=new e.CompositeDisposable,this.markers=t.addMarkerLayer({maintainHistory:!0,persistent:!1}),this.markerProps=new WeakMap,this.disposables.add(this.resultsDB.onDidUpdate(this.updateResults)),this.updateResults(),this.registerGutterEvents()}static supportsGrammar(t){return["source.c2hs","source.hsc2hs","source.haskell","text.tex.latex.haskell","source.hsig"].includes(t)}destroy(){this.markers.destroy(),this.disposables.dispose();try{this.gutter.destroy()}catch(t){console.warn(t)}}getMessageAt(t,e){const r=this.find(t,e),n=[];for(const t of r){if(!t.isValid())continue;const e=this.markerProps.get(t);e&&n.push(e.message)}return n}registerGutterEvents(){this.disposables.add(Qn(this.gutterElement,"mouseover",".decoration",t=>{const r=Xn(this.editor,t);if(r){const t=this.getMessageAt(r,"gutter");t.length>0&&Yn(this.tooltipRegistry.showTooltip(this.editor,"mouse",{pluginName:"builtin:check-results",tooltip:{text:t,range:new e.Range(r,r)}}))}})),this.disposables.add(Qn(this.gutterElement,"mouseout",".decoration",()=>this.tooltipRegistry.hideTooltip(this.editor,"mouse","builtin:check-results")))}markerFromCheckResult(t){const{position:r}=t;if(!r)return;const n=new e.Range(r,e.Point.fromObject([r.row,r.column+1])),i=this.markers.markBufferRange(n,{invalidate:"inside"});this.markerProps.set(i,t);const o=new e.CompositeDisposable;o.add(i.onDidDestroy(()=>{this.markerProps.delete(i),o.dispose()}),i.onDidChange(({isValid:e})=>{t.setValid(e)})),this.decorateMarker(i,t)}decorateMarker(t,e){const r={class:"ide-haskell-"+e.severity};this.gutter.decorateMarker(t,{type:"line-number",...r}),this.editor.decorateMarker(t,{type:"highlight",...r})}find(t,e){switch(e){case"gutter":return this.markers.findMarkers({startBufferRow:t.row});case"keyboard":return this.markers.findMarkers({startBufferPosition:t});case"mouse":return this.markers.findMarkers({containsBufferPosition:t});default:throw new TypeError("Switch assertion failed")}}}class Xo{constructor(t){this.pluginManager=t,this.tooltipProvider=(t,e,r)=>{const n=this.pluginManager.controllerType(Ko,t);if(!n)return;if("keyboard"===r&&"Show Tooltip"!==atom.config.get("ide-haskell.onCursorMove",{scope:t.getRootScopeDescriptor()}))return;const i=n.getMessageAt(e.start,r);return i.length>0?{range:e,text:i}:void 0};const r=t.tooltipRegistry;this.disposables=new e.CompositeDisposable,this.disposables.add(r.register("builtin:check-results",{priority:1e3,handler:this.tooltipProvider,eventTypes:["mouse","keyboard"]}),t.addEditorController(Ko))}destroy(){this.disposables.dispose()}}class Yo{constructor(t,e){this.panel=t,this.bsc=e,this.didClick=()=>{Yn(this.panel.toggle())},qi(this),this.disp=e.onDidUpdate(()=>{Yn(this.update())})}render(){return zi("div",{class:"ide-haskell inline-block",on:{click:this.didClick}},zi("span",null,zi("ide-haskell-lambda",null),this.bsc.renderStatusIcon()))}async update(){return $i(this)}destroy(){this.disp.dispose(),Yn(Vi(this))}}var Zo="win32"===process.platform,Jo=process.env.NODE_DEBUG&&/fs/.test(process.env.NODE_DEBUG);function ts(t){return"function"==typeof t?t:function(){var t;if(Jo){var e=new Error;t=function(t){t&&(e.message=t.message,r(t=e))}}else t=r;return t;function r(t){if(t){if(process.throwDeprecation)throw t;if(!process.noDeprecation){var e="fs: missing callback "+(t.stack||t.message);process.traceDeprecation?console.trace(e):console.error(e)}}}}()}i.normalize;if(Zo)var es=/(.*?)(?:[\/\\]+|$)/g;else es=/(.*?)(?:[\/]+|$)/g;if(Zo)var rs=/^(?:[a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/][^\\\/]+)?[\\\/]*/;else rs=/^[\/]*/;var ns=function(t,e){if(t=i.resolve(t),e&&Object.prototype.hasOwnProperty.call(e,t))return e[t];var r,n,o,s,c=t,l={},u={};function p(){var e=rs.exec(t);r=e[0].length,n=e[0],o=e[0],s="",Zo&&!u[o]&&(a.lstatSync(o),u[o]=!0)}for(p();r<t.length;){es.lastIndex=r;var h=es.exec(t);if(s=n,n+=h[0],o=s+h[1],r=es.lastIndex,!(u[o]||e&&e[o]===o)){var d;if(e&&Object.prototype.hasOwnProperty.call(e,o))d=e[o];else{var f=a.lstatSync(o);if(!f.isSymbolicLink()){u[o]=!0,e&&(e[o]=o);continue}var m=null;if(!Zo){var g=f.dev.toString(32)+":"+f.ino.toString(32);l.hasOwnProperty(g)&&(m=l[g])}null===m&&(a.statSync(o),m=a.readlinkSync(o)),d=i.resolve(s,m),e&&(e[o]=d),Zo||(l[g]=m)}t=i.resolve(d,t.slice(r)),p()}}return e&&(e[c]=t),t},is=function(t,e,r){if("function"!=typeof r&&(r=ts(e),e=null),t=i.resolve(t),e&&Object.prototype.hasOwnProperty.call(e,t))return process.nextTick(r.bind(null,null,e[t]));var n,o,s,c,l=t,u={},p={};function h(){var e=rs.exec(t);n=e[0].length,o=e[0],s=e[0],c="",Zo&&!p[s]?a.lstat(s,(function(t){if(t)return r(t);p[s]=!0,d()})):process.nextTick(d)}function d(){if(n>=t.length)return e&&(e[l]=t),r(null,t);es.lastIndex=n;var i=es.exec(t);return c=o,o+=i[0],s=c+i[1],n=es.lastIndex,p[s]||e&&e[s]===s?process.nextTick(d):e&&Object.prototype.hasOwnProperty.call(e,s)?g(e[s]):a.lstat(s,f)}function f(t,n){if(t)return r(t);if(!n.isSymbolicLink())return p[s]=!0,e&&(e[s]=s),process.nextTick(d);if(!Zo){var i=n.dev.toString(32)+":"+n.ino.toString(32);if(u.hasOwnProperty(i))return m(null,u[i],s)}a.stat(s,(function(t){if(t)return r(t);a.readlink(s,(function(t,e){Zo||(u[i]=e),m(t,e)}))}))}function m(t,n,o){if(t)return r(t);var s=i.resolve(c,n);e&&(e[o]=s),g(s)}function g(e){t=i.resolve(e,t.slice(n)),h()}h()},os=ps;ps.realpath=ps,ps.sync=hs,ps.realpathSync=hs,ps.monkeypatch=function(){a.realpath=ps,a.realpathSync=hs},ps.unmonkeypatch=function(){a.realpath=ss,a.realpathSync=as};var ss=a.realpath,as=a.realpathSync,cs=process.version,ls=/^v[0-5]\./.test(cs);function us(t){return t&&"realpath"===t.syscall&&("ELOOP"===t.code||"ENOMEM"===t.code||"ENAMETOOLONG"===t.code)}function ps(t,e,r){if(ls)return ss(t,e,r);"function"==typeof e&&(r=e,e=null),ss(t,e,(function(n,i){us(n)?is(t,e,r):r(n,i)}))}function hs(t,e){if(ls)return as(t,e);try{return as(t,e)}catch(r){if(us(r))return ns(t,e);throw r}}var ds=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},fs=ms;function ms(t,e,r){t instanceof RegExp&&(t=gs(t,r)),e instanceof RegExp&&(e=gs(e,r));var n=vs(t,e,r);return n&&{start:n[0],end:n[1],pre:r.slice(0,n[0]),body:r.slice(n[0]+t.length,n[1]),post:r.slice(n[1]+e.length)}}function gs(t,e){var r=e.match(t);return r?r[0]:null}function vs(t,e,r){var n,i,o,s,a,c=r.indexOf(t),l=r.indexOf(e,c+1),u=c;if(c>=0&&l>0){for(n=[],o=r.length;u>=0&&!a;)u==c?(n.push(u),c=r.indexOf(t,u+1)):1==n.length?a=[n.pop(),l]:((i=n.pop())<o&&(o=i,s=l),l=r.indexOf(e,u+1)),u=c<l&&c>=0?c:l;n.length&&(a=[o,s])}return a}ms.range=vs;var ys=function(t){if(!t)return[];"{}"===t.substr(0,2)&&(t="\\{\\}"+t.substr(2));return function t(e,r){var n=[],i=fs("{","}",e);if(!i||/\$$/.test(i.pre))return[e];var o,s=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(i.body),a=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(i.body),c=s||a,l=i.body.indexOf(",")>=0;if(!c&&!l)return i.post.match(/,.*\}/)?(e=i.pre+"{"+i.body+ks+i.post,t(e)):[e];if(c)o=i.body.split(/\.\./);else{if(1===(o=function t(e){if(!e)return[""];var r=[],n=fs("{","}",e);if(!n)return e.split(",");var i=n.pre,o=n.body,s=n.post,a=i.split(",");a[a.length-1]+="{"+o+"}";var c=t(s);s.length&&(a[a.length-1]+=c.shift(),a.push.apply(a,c));return r.push.apply(r,a),r}(i.body)).length)if(1===(o=t(o[0],!1).map(Os)).length)return(h=i.post.length?t(i.post,!1):[""]).map((function(t){return i.pre+o[0]+t}))}var u,p=i.pre,h=i.post.length?t(i.post,!1):[""];if(c){var d=Ss(o[0]),f=Ss(o[1]),m=Math.max(o[0].length,o[1].length),g=3==o.length?Math.abs(Ss(o[2])):1,v=Ms;f<d&&(g*=-1,v=As);var y=o.some(Ps);u=[];for(var b=d;v(b,f);b+=g){var w;if(a)"\\"===(w=String.fromCharCode(b))&&(w="");else if(w=String(b),y){var k=m-w.length;if(k>0){var _=new Array(k+1).join("0");w=b<0?"-"+_+w.slice(1):_+w}}u.push(w)}}else u=function(t,e){for(var r=[],n=0;n<t.length;n++){var i=e(t[n],n);ds(i)?r.push.apply(r,i):r.push(i)}return r}(o,(function(e){return t(e,!1)}));for(var x=0;x<u.length;x++)for(var S=0;S<h.length;S++){var E=p+u[x]+h[S];(!r||c||E)&&n.push(E)}return n}(function(t){return t.split("\\\\").join(bs).split("\\{").join(ws).split("\\}").join(ks).split("\\,").join(_s).split("\\.").join(xs)}(t),!0).map(Es)},bs="\0SLASH"+Math.random()+"\0",ws="\0OPEN"+Math.random()+"\0",ks="\0CLOSE"+Math.random()+"\0",_s="\0COMMA"+Math.random()+"\0",xs="\0PERIOD"+Math.random()+"\0";function Ss(t){return parseInt(t,10)==t?parseInt(t,10):t.charCodeAt(0)}function Es(t){return t.split(bs).join("\\").split(ws).join("{").split(ks).join("}").split(_s).join(",").split(xs).join(".")}function Os(t){return"{"+t+"}"}function Ps(t){return/^-?0\d/.test(t)}function Ms(t,e){return t<=e}function As(t,e){return t>=e}var js=Ls;Ls.Minimatch=Fs;var Ts={sep:"/"};try{Ts=i}catch(t){}var Cs=Ls.GLOBSTAR=Fs.GLOBSTAR={},Ds={"!":{open:"(?:(?!(?:",close:"))[^/]*?)"},"?":{open:"(?:",close:")?"},"+":{open:"(?:",close:")+"},"*":{open:"(?:",close:")*"},"@":{open:"(?:",close:")"}},Is="().*{}+?[]^$\\!".split("").reduce((function(t,e){return t[e]=!0,t}),{});var Ns=/\/+/;function Rs(t,e){t=t||{},e=e||{};var r={};return Object.keys(e).forEach((function(t){r[t]=e[t]})),Object.keys(t).forEach((function(e){r[e]=t[e]})),r}function Ls(t,e,r){if("string"!=typeof e)throw new TypeError("glob pattern string required");return r||(r={}),!(!r.nocomment&&"#"===e.charAt(0))&&(""===e.trim()?""===t:new Fs(e,r).match(t))}function Fs(t,e){if(!(this instanceof Fs))return new Fs(t,e);if("string"!=typeof t)throw new TypeError("glob pattern string required");e||(e={}),t=t.trim(),"/"!==Ts.sep&&(t=t.split(Ts.sep).join("/")),this.options=e,this.set=[],this.pattern=t,this.regexp=null,this.negate=!1,this.comment=!1,this.empty=!1,this.make()}function Bs(t,e){if(e||(e=this instanceof Fs?this.options:{}),void 0===(t=void 0===t?this.pattern:t))throw new TypeError("undefined pattern");return e.nobrace||!t.match(/\{.*\}/)?[t]:ys(t)}Ls.filter=function(t,e){return e=e||{},function(r,n,i){return Ls(r,t,e)}},Ls.defaults=function(t){if(!t||!Object.keys(t).length)return Ls;var e=Ls,r=function(r,n,i){return e.minimatch(r,n,Rs(t,i))};return r.Minimatch=function(r,n){return new e.Minimatch(r,Rs(t,n))},r},Fs.defaults=function(t){return t&&Object.keys(t).length?Ls.defaults(t).Minimatch:Fs},Fs.prototype.debug=function(){},Fs.prototype.make=function(){if(this._made)return;var t=this.pattern,e=this.options;if(!e.nocomment&&"#"===t.charAt(0))return void(this.comment=!0);if(!t)return void(this.empty=!0);this.parseNegate();var r=this.globSet=this.braceExpand();e.debug&&(this.debug=console.error);this.debug(this.pattern,r),r=this.globParts=r.map((function(t){return t.split(Ns)})),this.debug(this.pattern,r),r=r.map((function(t,e,r){return t.map(this.parse,this)}),this),this.debug(this.pattern,r),r=r.filter((function(t){return-1===t.indexOf(!1)})),this.debug(this.pattern,r),this.set=r},Fs.prototype.parseNegate=function(){var t=this.pattern,e=!1,r=this.options,n=0;if(r.nonegate)return;for(var i=0,o=t.length;i<o&&"!"===t.charAt(i);i++)e=!e,n++;n&&(this.pattern=t.substr(n));this.negate=e},Ls.braceExpand=function(t,e){return Bs(t,e)},Fs.prototype.braceExpand=Bs,Fs.prototype.parse=function(t,e){if(t.length>65536)throw new TypeError("pattern is too long");var r=this.options;if(!r.noglobstar&&"**"===t)return Cs;if(""===t)return"";var n,i="",o=!!r.nocase,s=!1,a=[],c=[],l=!1,u=-1,p=-1,h="."===t.charAt(0)?"":r.dot?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",d=this;function f(){if(n){switch(n){case"*":i+="[^/]*?",o=!0;break;case"?":i+="[^/]",o=!0;break;default:i+="\\"+n}d.debug("clearStateChar %j %j",n,i),n=!1}}for(var m,g=0,v=t.length;g<v&&(m=t.charAt(g));g++)if(this.debug("%s\t%s %s %j",t,g,i,m),s&&Is[m])i+="\\"+m,s=!1;else switch(m){case"/":return!1;case"\\":f(),s=!0;continue;case"?":case"*":case"+":case"@":case"!":if(this.debug("%s\t%s %s %j <-- stateChar",t,g,i,m),l){this.debug("  in class"),"!"===m&&g===p+1&&(m="^"),i+=m;continue}d.debug("call clearStateChar %j",n),f(),n=m,r.noext&&f();continue;case"(":if(l){i+="(";continue}if(!n){i+="\\(";continue}a.push({type:n,start:g-1,reStart:i.length,open:Ds[n].open,close:Ds[n].close}),i+="!"===n?"(?:(?!(?:":"(?:",this.debug("plType %j %j",n,i),n=!1;continue;case")":if(l||!a.length){i+="\\)";continue}f(),o=!0;var y=a.pop();i+=y.close,"!"===y.type&&c.push(y),y.reEnd=i.length;continue;case"|":if(l||!a.length||s){i+="\\|",s=!1;continue}f(),i+="|";continue;case"[":if(f(),l){i+="\\"+m;continue}l=!0,p=g,u=i.length,i+=m;continue;case"]":if(g===p+1||!l){i+="\\"+m,s=!1;continue}if(l){var b=t.substring(p+1,g);try{RegExp("["+b+"]")}catch(t){var w=this.parse(b,Us);i=i.substr(0,u)+"\\["+w[0]+"\\]",o=o||w[1],l=!1;continue}}o=!0,l=!1,i+=m;continue;default:f(),s?s=!1:!Is[m]||"^"===m&&l||(i+="\\"),i+=m}l&&(b=t.substr(p+1),w=this.parse(b,Us),i=i.substr(0,u)+"\\["+w[0],o=o||w[1]);for(y=a.pop();y;y=a.pop()){var k=i.slice(y.reStart+y.open.length);this.debug("setting tail",i,y),k=k.replace(/((?:\\{2}){0,64})(\\?)\|/g,(function(t,e,r){return r||(r="\\"),e+e+r+"|"})),this.debug("tail=%j\n   %s",k,k,y,i);var _="*"===y.type?"[^/]*?":"?"===y.type?"[^/]":"\\"+y.type;o=!0,i=i.slice(0,y.reStart)+_+"\\("+k}f(),s&&(i+="\\\\");var x=!1;switch(i.charAt(0)){case".":case"[":case"(":x=!0}for(var S=c.length-1;S>-1;S--){var E=c[S],O=i.slice(0,E.reStart),P=i.slice(E.reStart,E.reEnd-8),M=i.slice(E.reEnd-8,E.reEnd),A=i.slice(E.reEnd);M+=A;var j=O.split("(").length-1,T=A;for(g=0;g<j;g++)T=T.replace(/\)[+*?]?/,"");var C="";""===(A=T)&&e!==Us&&(C="$"),i=O+P+A+C+M}""!==i&&o&&(i="(?=.)"+i);x&&(i=h+i);if(e===Us)return[i,o];if(!o)return function(t){return t.replace(/\\(.)/g,"$1")}(t);var D=r.nocase?"i":"";try{var I=new RegExp("^"+i+"$",D)}catch(t){return new RegExp("$.")}return I._glob=t,I._src=i,I};var Us={};Ls.makeRe=function(t,e){return new Fs(t,e||{}).makeRe()},Fs.prototype.makeRe=function(){if(this.regexp||!1===this.regexp)return this.regexp;var t=this.set;if(!t.length)return this.regexp=!1,this.regexp;var e=this.options,r=e.noglobstar?"[^/]*?":e.dot?"(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?":"(?:(?!(?:\\/|^)\\.).)*?",n=e.nocase?"i":"",i=t.map((function(t){return t.map((function(t){return t===Cs?r:"string"==typeof t?function(t){return t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}(t):t._src})).join("\\/")})).join("|");i="^(?:"+i+")$",this.negate&&(i="^(?!"+i+").*$");try{this.regexp=new RegExp(i,n)}catch(t){this.regexp=!1}return this.regexp},Ls.match=function(t,e,r){var n=new Fs(e,r=r||{});return t=t.filter((function(t){return n.match(t)})),n.options.nonull&&!t.length&&t.push(e),t},Fs.prototype.match=function(t,e){if(this.debug("match",t,this.pattern),this.comment)return!1;if(this.empty)return""===t;if("/"===t&&e)return!0;var r=this.options;"/"!==Ts.sep&&(t=t.split(Ts.sep).join("/"));t=t.split(Ns),this.debug(this.pattern,"split",t);var n,i,o=this.set;for(this.debug(this.pattern,"set",o),i=t.length-1;i>=0&&!(n=t[i]);i--);for(i=0;i<o.length;i++){var s=o[i],a=t;if(r.matchBase&&1===s.length&&(a=[n]),this.matchOne(a,s,e))return!!r.flipNegate||!this.negate}return!r.flipNegate&&this.negate},Fs.prototype.matchOne=function(t,e,r){var n=this.options;this.debug("matchOne",{this:this,file:t,pattern:e}),this.debug("matchOne",t.length,e.length);for(var i=0,o=0,s=t.length,a=e.length;i<s&&o<a;i++,o++){this.debug("matchOne loop");var c,l=e[o],u=t[i];if(this.debug(e,l,u),!1===l)return!1;if(l===Cs){this.debug("GLOBSTAR",[e,l,u]);var p=i,h=o+1;if(h===a){for(this.debug("** at the end");i<s;i++)if("."===t[i]||".."===t[i]||!n.dot&&"."===t[i].charAt(0))return!1;return!0}for(;p<s;){var d=t[p];if(this.debug("\nglobstar while",t,p,e,h,d),this.matchOne(t.slice(p),e.slice(h),r))return this.debug("globstar found match!",p,s,d),!0;if("."===d||".."===d||!n.dot&&"."===d.charAt(0)){this.debug("dot detected!",t,p,e,h);break}this.debug("globstar swallow a segment, and continue"),p++}return!(!r||(this.debug("\n>>> no match, partial?",t,p,e,h),p!==s))}if("string"==typeof l?(c=n.nocase?u.toLowerCase()===l.toLowerCase():u===l,this.debug("string match",l,u,c)):(c=u.match(l),this.debug("pattern match",l,u,c)),!c)return!1}if(i===s&&o===a)return!0;if(i===s)return r;if(o===a)return i===s-1&&""===t[i];throw new Error("wtf?")};var zs=O((function(t){"function"==typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}})),qs=O((function(t){try{var e=u;if("function"!=typeof e.inherits)throw"";t.exports=e.inherits}catch(e){t.exports=zs}}));function $s(t){return"/"===t.charAt(0)}function Vs(t){var e=/^([a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/]+[^\\\/]+)?([\\\/])?([\s\S]*?)$/.exec(t),r=e[1]||"",n=Boolean(r&&":"!==r.charAt(1));return Boolean(e[2]||n)}var Gs="win32"===process.platform?Vs:$s,Hs=$s,Ws=Vs;Gs.posix=Hs,Gs.win32=Ws;var Qs=sa,Ks=oa,Xs=function(t,e,r){r||(r={});if(r.matchBase&&-1===e.indexOf("/")){if(r.noglobstar)throw new Error("base matching requires globstar");e="**/"+e}t.silent=!!r.silent,t.pattern=e,t.strict=!1!==r.strict,t.realpath=!!r.realpath,t.realpathCache=r.realpathCache||Object.create(null),t.follow=!!r.follow,t.dot=!!r.dot,t.mark=!!r.mark,t.nodir=!!r.nodir,t.nodir&&(t.mark=!0);t.sync=!!r.sync,t.nounique=!!r.nounique,t.nonull=!!r.nonull,t.nosort=!!r.nosort,t.nocase=!!r.nocase,t.stat=!!r.stat,t.noprocess=!!r.noprocess,t.absolute=!!r.absolute,t.maxLength=r.maxLength||1/0,t.cache=r.cache||Object.create(null),t.statCache=r.statCache||Object.create(null),t.symlinks=r.symlinks||Object.create(null),function(t,e){t.ignore=e.ignore||[],Array.isArray(t.ignore)||(t.ignore=[t.ignore]);t.ignore.length&&(t.ignore=t.ignore.map(aa))}(t,r),t.changedCwd=!1;var n=process.cwd();na(r,"cwd")?(t.cwd=i.resolve(r.cwd),t.changedCwd=t.cwd!==n):t.cwd=n;t.root=r.root||i.resolve(t.cwd,"/"),t.root=i.resolve(t.root),"win32"===process.platform&&(t.root=t.root.replace(/\\/g,"/"));t.cwdAbs=Gs(t.cwd)?t.cwd:ca(t,t.cwd),"win32"===process.platform&&(t.cwdAbs=t.cwdAbs.replace(/\\/g,"/"));t.nomount=!!r.nomount,r.nonegate=!0,r.nocomment=!0,t.minimatch=new ia(e,r),t.options=t.minimatch.options},Ys=na,Zs=ca,Js=function(t){for(var e=t.nounique,r=e?[]:Object.create(null),n=0,i=t.matches.length;n<i;n++){var o=t.matches[n];if(o&&0!==Object.keys(o).length){var s=Object.keys(o);e?r.push.apply(r,s):s.forEach((function(t){r[t]=!0}))}else if(t.nonull){var a=t.minimatch.globSet[n];e?r.push(a):r[a]=!0}}e||(r=Object.keys(r));t.nosort||(r=r.sort(t.nocase?oa:sa));if(t.mark){for(n=0;n<r.length;n++)r[n]=t._mark(r[n]);t.nodir&&(r=r.filter((function(e){var r=!/\/$/.test(e),n=t.cache[e]||t.cache[ca(t,e)];return r&&n&&(r="DIR"!==n&&!Array.isArray(n)),r})))}t.ignore.length&&(r=r.filter((function(e){return!la(t,e)})));t.found=r},ta=function(t,e){var r=ca(t,e),n=t.cache[r],i=e;if(n){var o="DIR"===n||Array.isArray(n),s="/"===e.slice(-1);if(o&&!s?i+="/":!o&&s&&(i=i.slice(0,-1)),i!==e){var a=ca(t,i);t.statCache[a]=t.statCache[r],t.cache[a]=t.cache[r]}}return i},ea=la,ra=function(t,e){return!!t.ignore.length&&t.ignore.some((function(t){return!(!t.gmatcher||!t.gmatcher.match(e))}))};function na(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var ia=js.Minimatch;function oa(t,e){return t.toLowerCase().localeCompare(e.toLowerCase())}function sa(t,e){return t.localeCompare(e)}function aa(t){var e=null;if("/**"===t.slice(-3)){var r=t.replace(/(\/\*\*)+$/,"");e=new ia(r,{dot:!0})}return{matcher:new ia(t,{dot:!0}),gmatcher:e}}function ca(t,e){var r=e;return r="/"===e.charAt(0)?i.join(t.root,e):Gs(e)||""===e?e:t.changedCwd?i.resolve(t.cwd,e):i.resolve(e),"win32"===process.platform&&(r=r.replace(/\\/g,"/")),r}function la(t,e){return!!t.ignore.length&&t.ignore.some((function(t){return t.matcher.match(e)||!(!t.gmatcher||!t.gmatcher.match(e))}))}var ua={alphasort:Qs,alphasorti:Ks,setopts:Xs,ownProp:Ys,makeAbs:Zs,finish:Js,mark:ta,isIgnored:ea,childrenIgnored:ra},pa=ga;ga.GlobSync=va;var ha=ua.setopts,da=ua.ownProp,fa=ua.childrenIgnored,ma=ua.isIgnored;function ga(t,e){if("function"==typeof e||3===arguments.length)throw new TypeError("callback provided to sync glob\nSee: https://github.com/isaacs/node-glob/issues/167");return new va(t,e).found}function va(t,e){if(!t)throw new Error("must provide pattern");if("function"==typeof e||3===arguments.length)throw new TypeError("callback provided to sync glob\nSee: https://github.com/isaacs/node-glob/issues/167");if(!(this instanceof va))return new va(t,e);if(ha(this,t,e),this.noprocess)return this;var r=this.minimatch.set.length;this.matches=new Array(r);for(var n=0;n<r;n++)this._process(this.minimatch.set[n],n,!1);this._finish()}va.prototype._finish=function(){if(l(this instanceof va),this.realpath){var t=this;this.matches.forEach((function(e,r){var n=t.matches[r]=Object.create(null);for(var i in e)try{i=t._makeAbs(i),n[os.realpathSync(i,t.realpathCache)]=!0}catch(e){if("stat"!==e.syscall)throw e;n[t._makeAbs(i)]=!0}}))}ua.finish(this)},va.prototype._process=function(t,e,r){l(this instanceof va);for(var n,i=0;"string"==typeof t[i];)i++;switch(i){case t.length:return void this._processSimple(t.join("/"),e);case 0:n=null;break;default:n=t.slice(0,i).join("/")}var o,s=t.slice(i);null===n?o=".":Gs(n)||Gs(t.join("/"))?(n&&Gs(n)||(n="/"+n),o=n):o=n;var a=this._makeAbs(o);fa(this,o)||(s[0]===js.GLOBSTAR?this._processGlobStar(n,o,a,s,e,r):this._processReaddir(n,o,a,s,e,r))},va.prototype._processReaddir=function(t,e,r,n,o,s){var a=this._readdir(r,s);if(a){for(var c=n[0],l=!!this.minimatch.negate,u=c._glob,p=this.dot||"."===u.charAt(0),h=[],d=0;d<a.length;d++){if("."!==(g=a[d]).charAt(0)||p)(l&&!t?!g.match(c):g.match(c))&&h.push(g)}var f=h.length;if(0!==f)if(1!==n.length||this.mark||this.stat){n.shift();for(d=0;d<f;d++){var m;g=h[d];m=t?[t,g]:[g],this._process(m.concat(n),o,s)}}else{this.matches[o]||(this.matches[o]=Object.create(null));for(var d=0;d<f;d++){var g=h[d];t&&(g="/"!==t.slice(-1)?t+"/"+g:t+g),"/"!==g.charAt(0)||this.nomount||(g=i.join(this.root,g)),this._emitMatch(o,g)}}}},va.prototype._emitMatch=function(t,e){if(!ma(this,e)){var r=this._makeAbs(e);if(this.mark&&(e=this._mark(e)),this.absolute&&(e=r),!this.matches[t][e]){if(this.nodir){var n=this.cache[r];if("DIR"===n||Array.isArray(n))return}this.matches[t][e]=!0,this.stat&&this._stat(e)}}},va.prototype._readdirInGlobStar=function(t){if(this.follow)return this._readdir(t,!1);var e,r;try{r=a.lstatSync(t)}catch(t){if("ENOENT"===t.code)return null}var n=r&&r.isSymbolicLink();return this.symlinks[t]=n,n||!r||r.isDirectory()?e=this._readdir(t,!1):this.cache[t]="FILE",e},va.prototype._readdir=function(t,e){if(e&&!da(this.symlinks,t))return this._readdirInGlobStar(t);if(da(this.cache,t)){var r=this.cache[t];if(!r||"FILE"===r)return null;if(Array.isArray(r))return r}try{return this._readdirEntries(t,a.readdirSync(t))}catch(e){return this._readdirError(t,e),null}},va.prototype._readdirEntries=function(t,e){if(!this.mark&&!this.stat)for(var r=0;r<e.length;r++){var n=e[r];n="/"===t?t+n:t+"/"+n,this.cache[n]=!0}return this.cache[t]=e,e},va.prototype._readdirError=function(t,e){switch(e.code){case"ENOTSUP":case"ENOTDIR":var r=this._makeAbs(t);if(this.cache[r]="FILE",r===this.cwdAbs){var n=new Error(e.code+" invalid cwd "+this.cwd);throw n.path=this.cwd,n.code=e.code,n}break;case"ENOENT":case"ELOOP":case"ENAMETOOLONG":case"UNKNOWN":this.cache[this._makeAbs(t)]=!1;break;default:if(this.cache[this._makeAbs(t)]=!1,this.strict)throw e;this.silent||console.error("glob error",e)}},va.prototype._processGlobStar=function(t,e,r,n,i,o){var s=this._readdir(r,o);if(s){var a=n.slice(1),c=t?[t]:[],l=c.concat(a);this._process(l,i,!1);var u=s.length;if(!this.symlinks[r]||!o)for(var p=0;p<u;p++){if("."!==s[p].charAt(0)||this.dot){var h=c.concat(s[p],a);this._process(h,i,!0);var d=c.concat(s[p],n);this._process(d,i,!0)}}}},va.prototype._processSimple=function(t,e){var r=this._stat(t);if(this.matches[e]||(this.matches[e]=Object.create(null)),r){if(t&&Gs(t)&&!this.nomount){var n=/[\/\\]$/.test(t);"/"===t.charAt(0)?t=i.join(this.root,t):(t=i.resolve(this.root,t),n&&(t+="/"))}"win32"===process.platform&&(t=t.replace(/\\/g,"/")),this._emitMatch(e,t)}},va.prototype._stat=function(t){var e=this._makeAbs(t),r="/"===t.slice(-1);if(t.length>this.maxLength)return!1;if(!this.stat&&da(this.cache,e)){var n=this.cache[e];if(Array.isArray(n)&&(n="DIR"),!r||"DIR"===n)return n;if(r&&"FILE"===n)return!1}var i=this.statCache[e];if(!i){var o;try{o=a.lstatSync(e)}catch(t){if(t&&("ENOENT"===t.code||"ENOTDIR"===t.code))return this.statCache[e]=!1,!1}if(o&&o.isSymbolicLink())try{i=a.statSync(e)}catch(t){i=o}else i=o}this.statCache[e]=i;n=!0;return i&&(n=i.isDirectory()?"DIR":"FILE"),this.cache[e]=this.cache[e]||n,(!r||"FILE"!==n)&&n},va.prototype._mark=function(t){return ua.mark(this,t)},va.prototype._makeAbs=function(t){return ua.makeAbs(this,t)};var ya=function t(e,r){if(e&&r)return t(e)(r);if("function"!=typeof e)throw new TypeError("need wrapper function");return Object.keys(e).forEach((function(t){n[t]=e[t]})),n;function n(){for(var t=new Array(arguments.length),r=0;r<t.length;r++)t[r]=arguments[r];var n=e.apply(this,t),i=t[t.length-1];return"function"==typeof n&&n!==i&&Object.keys(i).forEach((function(t){n[t]=i[t]})),n}};var ba=ya(ka),wa=ya(_a);function ka(t){var e=function(){return e.called?e.value:(e.called=!0,e.value=t.apply(this,arguments))};return e.called=!1,e}function _a(t){var e=function(){if(e.called)throw new Error(e.onceError);return e.called=!0,e.value=t.apply(this,arguments)},r=t.name||"Function wrapped with `once`";return e.onceError=r+" shouldn't be called more than once",e.called=!1,e}ka.proto=ka((function(){Object.defineProperty(Function.prototype,"once",{value:function(){return ka(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return _a(this)},configurable:!0})})),ba.strict=wa;var xa=Object.create(null),Sa=ya((function(t,e){return xa[t]?(xa[t].push(e),null):(xa[t]=[e],function(t){return ba((function e(){var r=xa[t],n=r.length,i=Ea(arguments);try{for(var o=0;o<n;o++)r[o].apply(null,i)}finally{r.length>n?(r.splice(0,n),process.nextTick((function(){e.apply(null,i)}))):delete xa[t]}}))}(t))}));function Ea(t){for(var e=t.length,r=[],n=0;n<e;n++)r[n]=t[n];return r}var Oa=Ca,Pa=p.EventEmitter,Ma=ua.setopts,Aa=ua.ownProp,ja=ua.childrenIgnored,Ta=ua.isIgnored;function Ca(t,e,r){if("function"==typeof e&&(r=e,e={}),e||(e={}),e.sync){if(r)throw new TypeError("callback provided to sync glob");return pa(t,e)}return new Ia(t,e,r)}Ca.sync=pa;var Da=Ca.GlobSync=pa.GlobSync;function Ia(t,e,r){if("function"==typeof e&&(r=e,e=null),e&&e.sync){if(r)throw new TypeError("callback provided to sync glob");return new Da(t,e)}if(!(this instanceof Ia))return new Ia(t,e,r);Ma(this,t,e),this._didRealPath=!1;var n=this.minimatch.set.length;this.matches=new Array(n),"function"==typeof r&&(r=ba(r),this.on("error",r),this.on("end",(function(t){r(null,t)})));var i=this;if(this._processing=0,this._emitQueue=[],this._processQueue=[],this.paused=!1,this.noprocess)return this;if(0===n)return s();for(var o=0;o<n;o++)this._process(this.minimatch.set[o],o,!1,s);function s(){--i._processing,i._processing<=0&&i._finish()}}Ca.glob=Ca,Ca.hasMagic=function(t,e){var r=function(t,e){if(null===e||"object"!=typeof e)return t;for(var r=Object.keys(e),n=r.length;n--;)t[r[n]]=e[r[n]];return t}({},e);r.noprocess=!0;var n=new Ia(t,r).minimatch.set;if(!t)return!1;if(n.length>1)return!0;for(var i=0;i<n[0].length;i++)if("string"!=typeof n[0][i])return!0;return!1},Ca.Glob=Ia,qs(Ia,Pa),Ia.prototype._finish=function(){if(l(this instanceof Ia),!this.aborted){if(this.realpath&&!this._didRealpath)return this._realpath();ua.finish(this),this.emit("end",this.found)}},Ia.prototype._realpath=function(){if(!this._didRealpath){this._didRealpath=!0;var t=this.matches.length;if(0===t)return this._finish();for(var e=this,r=0;r<this.matches.length;r++)this._realpathSet(r,n)}function n(){0==--t&&e._finish()}},Ia.prototype._realpathSet=function(t,e){var r=this.matches[t];if(!r)return e();var n=Object.keys(r),i=this,o=n.length;if(0===o)return e();var s=this.matches[t]=Object.create(null);n.forEach((function(r,n){r=i._makeAbs(r),os.realpath(r,i.realpathCache,(function(n,a){n?"stat"===n.syscall?s[r]=!0:i.emit("error",n):s[a]=!0,0==--o&&(i.matches[t]=s,e())}))}))},Ia.prototype._mark=function(t){return ua.mark(this,t)},Ia.prototype._makeAbs=function(t){return ua.makeAbs(this,t)},Ia.prototype.abort=function(){this.aborted=!0,this.emit("abort")},Ia.prototype.pause=function(){this.paused||(this.paused=!0,this.emit("pause"))},Ia.prototype.resume=function(){if(this.paused){if(this.emit("resume"),this.paused=!1,this._emitQueue.length){var t=this._emitQueue.slice(0);this._emitQueue.length=0;for(var e=0;e<t.length;e++){var r=t[e];this._emitMatch(r[0],r[1])}}if(this._processQueue.length){var n=this._processQueue.slice(0);this._processQueue.length=0;for(e=0;e<n.length;e++){var i=n[e];this._processing--,this._process(i[0],i[1],i[2],i[3])}}}},Ia.prototype._process=function(t,e,r,n){if(l(this instanceof Ia),l("function"==typeof n),!this.aborted)if(this._processing++,this.paused)this._processQueue.push([t,e,r,n]);else{for(var i,o=0;"string"==typeof t[o];)o++;switch(o){case t.length:return void this._processSimple(t.join("/"),e,n);case 0:i=null;break;default:i=t.slice(0,o).join("/")}var s,a=t.slice(o);null===i?s=".":Gs(i)||Gs(t.join("/"))?(i&&Gs(i)||(i="/"+i),s=i):s=i;var c=this._makeAbs(s);if(ja(this,s))return n();a[0]===js.GLOBSTAR?this._processGlobStar(i,s,c,a,e,r,n):this._processReaddir(i,s,c,a,e,r,n)}},Ia.prototype._processReaddir=function(t,e,r,n,i,o,s){var a=this;this._readdir(r,o,(function(c,l){return a._processReaddir2(t,e,r,n,i,o,l,s)}))},Ia.prototype._processReaddir2=function(t,e,r,n,o,s,a,c){if(!a)return c();for(var l=n[0],u=!!this.minimatch.negate,p=l._glob,h=this.dot||"."===p.charAt(0),d=[],f=0;f<a.length;f++){if("."!==(g=a[f]).charAt(0)||h)(u&&!t?!g.match(l):g.match(l))&&d.push(g)}var m=d.length;if(0===m)return c();if(1===n.length&&!this.mark&&!this.stat){this.matches[o]||(this.matches[o]=Object.create(null));for(f=0;f<m;f++){var g=d[f];t&&(g="/"!==t?t+"/"+g:t+g),"/"!==g.charAt(0)||this.nomount||(g=i.join(this.root,g)),this._emitMatch(o,g)}return c()}n.shift();for(f=0;f<m;f++){g=d[f];t&&(g="/"!==t?t+"/"+g:t+g),this._process([g].concat(n),o,s,c)}c()},Ia.prototype._emitMatch=function(t,e){if(!this.aborted&&!Ta(this,e))if(this.paused)this._emitQueue.push([t,e]);else{var r=Gs(e)?e:this._makeAbs(e);if(this.mark&&(e=this._mark(e)),this.absolute&&(e=r),!this.matches[t][e]){if(this.nodir){var n=this.cache[r];if("DIR"===n||Array.isArray(n))return}this.matches[t][e]=!0;var i=this.statCache[r];i&&this.emit("stat",e,i),this.emit("match",e)}}},Ia.prototype._readdirInGlobStar=function(t,e){if(!this.aborted){if(this.follow)return this._readdir(t,!1,e);var r=this,n=Sa("lstat\0"+t,(function(n,i){if(n&&"ENOENT"===n.code)return e();var o=i&&i.isSymbolicLink();r.symlinks[t]=o,o||!i||i.isDirectory()?r._readdir(t,!1,e):(r.cache[t]="FILE",e())}));n&&a.lstat(t,n)}},Ia.prototype._readdir=function(t,e,r){if(!this.aborted&&(r=Sa("readdir\0"+t+"\0"+e,r))){if(e&&!Aa(this.symlinks,t))return this._readdirInGlobStar(t,r);if(Aa(this.cache,t)){var n=this.cache[t];if(!n||"FILE"===n)return r();if(Array.isArray(n))return r(null,n)}a.readdir(t,function(t,e,r){return function(n,i){n?t._readdirError(e,n,r):t._readdirEntries(e,i,r)}}(this,t,r))}},Ia.prototype._readdirEntries=function(t,e,r){if(!this.aborted){if(!this.mark&&!this.stat)for(var n=0;n<e.length;n++){var i=e[n];i="/"===t?t+i:t+"/"+i,this.cache[i]=!0}return this.cache[t]=e,r(null,e)}},Ia.prototype._readdirError=function(t,e,r){if(!this.aborted){switch(e.code){case"ENOTSUP":case"ENOTDIR":var n=this._makeAbs(t);if(this.cache[n]="FILE",n===this.cwdAbs){var i=new Error(e.code+" invalid cwd "+this.cwd);i.path=this.cwd,i.code=e.code,this.emit("error",i),this.abort()}break;case"ENOENT":case"ELOOP":case"ENAMETOOLONG":case"UNKNOWN":this.cache[this._makeAbs(t)]=!1;break;default:this.cache[this._makeAbs(t)]=!1,this.strict&&(this.emit("error",e),this.abort()),this.silent||console.error("glob error",e)}return r()}},Ia.prototype._processGlobStar=function(t,e,r,n,i,o,s){var a=this;this._readdir(r,o,(function(c,l){a._processGlobStar2(t,e,r,n,i,o,l,s)}))},Ia.prototype._processGlobStar2=function(t,e,r,n,i,o,s,a){if(!s)return a();var c=n.slice(1),l=t?[t]:[],u=l.concat(c);this._process(u,i,!1,a);var p=this.symlinks[r],h=s.length;if(p&&o)return a();for(var d=0;d<h;d++){if("."!==s[d].charAt(0)||this.dot){var f=l.concat(s[d],c);this._process(f,i,!0,a);var m=l.concat(s[d],n);this._process(m,i,!0,a)}}a()},Ia.prototype._processSimple=function(t,e,r){var n=this;this._stat(t,(function(i,o){n._processSimple2(t,e,i,o,r)}))},Ia.prototype._processSimple2=function(t,e,r,n,o){if(this.matches[e]||(this.matches[e]=Object.create(null)),!n)return o();if(t&&Gs(t)&&!this.nomount){var s=/[\/\\]$/.test(t);"/"===t.charAt(0)?t=i.join(this.root,t):(t=i.resolve(this.root,t),s&&(t+="/"))}"win32"===process.platform&&(t=t.replace(/\\/g,"/")),this._emitMatch(e,t),o()},Ia.prototype._stat=function(t,e){var r=this._makeAbs(t),n="/"===t.slice(-1);if(t.length>this.maxLength)return e();if(!this.stat&&Aa(this.cache,r)){var i=this.cache[r];if(Array.isArray(i)&&(i="DIR"),!n||"DIR"===i)return e(null,i);if(n&&"FILE"===i)return e()}var o=this.statCache[r];if(void 0!==o){if(!1===o)return e(null,o);var s=o.isDirectory()?"DIR":"FILE";return n&&"FILE"===s?e():e(null,s,o)}var c=this,l=Sa("stat\0"+r,(function(n,i){if(i&&i.isSymbolicLink())return a.stat(r,(function(n,o){n?c._stat2(t,r,null,i,e):c._stat2(t,r,n,o,e)}));c._stat2(t,r,n,i,e)}));l&&a.lstat(r,l)},Ia.prototype._stat2=function(t,e,r,n,i){if(r&&("ENOENT"===r.code||"ENOTDIR"===r.code))return this.statCache[e]=!1,i();var o="/"===t.slice(-1);if(this.statCache[e]=n,"/"===e.slice(-1)&&n&&!n.isDirectory())return i(null,!1,n);var s=!0;return n&&(s=n.isDirectory()?"DIR":"FILE"),this.cache[e]=this.cache[e]||s,o&&"FILE"===s?i():i(null,s,n)};var Na=za;za.sync=Ha;var Ra=parseInt("666",8),La={nosort:!0,silent:!0},Fa=0,Ba="win32"===process.platform;function Ua(t){["unlink","chmod","stat","lstat","rmdir","readdir"].forEach((function(e){t[e]=t[e]||a[e],t[e+="Sync"]=t[e]||a[e]})),t.maxBusyTries=t.maxBusyTries||3,t.emfileWait=t.emfileWait||1e3,!1===t.glob&&(t.disableGlob=!0),t.disableGlob=t.disableGlob||!1,t.glob=t.glob||La}function za(t,e,r){"function"==typeof e&&(r=e,e={}),l(t,"rimraf: missing path"),l.equal(typeof t,"string","rimraf: path should be a string"),l.equal(typeof r,"function","rimraf: callback function required"),l(e,"rimraf: invalid options argument provided"),l.equal(typeof e,"object","rimraf: options should be object"),Ua(e);var n=0,i=null,o=0;if(e.disableGlob||!Oa.hasMagic(t))return s(null,[t]);function s(t,s){return t?r(t):0===(o=s.length)?r():void s.forEach((function(t){qa(t,e,(function s(a){if(a){if(("EBUSY"===a.code||"ENOTEMPTY"===a.code||"EPERM"===a.code)&&n<e.maxBusyTries)return n++,setTimeout((function(){qa(t,e,s)}),100*n);if("EMFILE"===a.code&&Fa<e.emfileWait)return setTimeout((function(){qa(t,e,s)}),Fa++);"ENOENT"===a.code&&(a=null)}Fa=0,function(t){i=i||t,0==--o&&r(i)}(a)}))}))}e.lstat(t,(function(r,n){if(!r)return s(null,[t]);Oa(t,e.glob,s)}))}function qa(t,e,r){l(t),l(e),l("function"==typeof r),e.lstat(t,(function(n,i){return n&&"ENOENT"===n.code?r(null):(n&&"EPERM"===n.code&&Ba&&$a(t,e,n,r),i&&i.isDirectory()?Ga(t,e,n,r):void e.unlink(t,(function(n){if(n){if("ENOENT"===n.code)return r(null);if("EPERM"===n.code)return Ba?$a(t,e,n,r):Ga(t,e,n,r);if("EISDIR"===n.code)return Ga(t,e,n,r)}return r(n)})))}))}function $a(t,e,r,n){l(t),l(e),l("function"==typeof n),r&&l(r instanceof Error),e.chmod(t,Ra,(function(i){i?n("ENOENT"===i.code?null:r):e.stat(t,(function(i,o){i?n("ENOENT"===i.code?null:r):o.isDirectory()?Ga(t,e,r,n):e.unlink(t,n)}))}))}function Va(t,e,r){l(t),l(e),r&&l(r instanceof Error);try{e.chmodSync(t,Ra)}catch(t){if("ENOENT"===t.code)return;throw r}try{var n=e.statSync(t)}catch(t){if("ENOENT"===t.code)return;throw r}n.isDirectory()?Wa(t,e,r):e.unlinkSync(t)}function Ga(t,e,r,n){l(t),l(e),r&&l(r instanceof Error),l("function"==typeof n),e.rmdir(t,(function(o){!o||"ENOTEMPTY"!==o.code&&"EEXIST"!==o.code&&"EPERM"!==o.code?o&&"ENOTDIR"===o.code?n(r):n(o):function(t,e,r){l(t),l(e),l("function"==typeof r),e.readdir(t,(function(n,o){if(n)return r(n);var s,a=o.length;if(0===a)return e.rmdir(t,r);o.forEach((function(n){za(i.join(t,n),e,(function(n){if(!s)return n?r(s=n):void(0==--a&&e.rmdir(t,r))}))}))}))}(t,e,n)}))}function Ha(t,e){var r;if(Ua(e=e||{}),l(t,"rimraf: missing path"),l.equal(typeof t,"string","rimraf: path should be a string"),l(e,"rimraf: missing options"),l.equal(typeof e,"object","rimraf: options should be object"),e.disableGlob||!Oa.hasMagic(t))r=[t];else try{e.lstatSync(t),r=[t]}catch(n){r=Oa.sync(t,e.glob)}if(r.length)for(var n=0;n<r.length;n++){t=r[n];try{var i=e.lstatSync(t)}catch(r){if("ENOENT"===r.code)return;"EPERM"===r.code&&Ba&&Va(t,e,r)}try{i&&i.isDirectory()?Wa(t,e,null):e.unlinkSync(t)}catch(r){if("ENOENT"===r.code)return;if("EPERM"===r.code)return Ba?Va(t,e,r):Wa(t,e,r);if("EISDIR"!==r.code)throw r;Wa(t,e,r)}}}function Wa(t,e,r){l(t),l(e),r&&l(r instanceof Error);try{e.rmdirSync(t)}catch(n){if("ENOENT"===n.code)return;if("ENOTDIR"===n.code)throw r;"ENOTEMPTY"!==n.code&&"EEXIST"!==n.code&&"EPERM"!==n.code||function(t,e){l(t),l(e),e.readdirSync(t).forEach((function(r){Ha(i.join(t,r),e)}));var r=Ba?100:1,n=0;for(;;){var o=!0;try{var s=e.rmdirSync(t,e);return o=!1,s}finally{if(++n<r&&o)continue}}}(t,e)}}var Qa=O((function(t,e){var r=Na.sync,n=i.resolve(h.tmpdir()),o=c.O_CREAT|c.O_TRUNC|c.O_RDWR|c.O_EXCL,s=function(t){return"function"==typeof t?[void 0,t]:[new Promise((function(t,r){e=function(){var e=Array.from(arguments),n=e.shift();process.nextTick((function(){n?r(n):1===e.length?t(e[0]):t(e)}))}})),e];var e},l=function(t,e){var r=u(t,e),o=new Date,s=[r.prefix,o.getFullYear(),o.getMonth(),o.getDate(),"-",process.pid,"-",(4294967296*Math.random()+1).toString(36),r.suffix].join("");return i.join(r.dir||n,s)},u=function(t,e){var r={prefix:null,suffix:null};if(t)switch(typeof t){case"string":r.prefix=t;break;case"object":r=t;break;default:throw new Error("Unknown affix declaration: "+r)}else r.prefix=e;return r},p=!1,d=!1,f=[],m=[];function g(t){if(!p)return!1;y(),f.push(t)}function v(t){if(!p)return!1;y(),m.push(t)}function y(){if(!p)return!1;d||(process.addListener("exit",b),d=!0)}function b(){return!!p&&{files:function(){if(!p)return!1;for(var t,e=0;void 0!==(t=f.shift());)r(t),e++;return e}(),dirs:function(){if(!p)return!1;for(var t,e=0;void 0!==(t=m.shift());)r(t),e++;return e}()}}e.dir=n,e.track=function(e){return p=!1!==e,t.exports},e.mkdir=function(t,e){var r=s(e),n=r[0];e=r[1];var i=l(t,"d-");return a.mkdir(i,parseInt("0700",8),(function(t){t||v(i),e(t,i)})),n},e.mkdirSync=function(t){var e=l(t,"d-");return a.mkdirSync(e,parseInt("0700",8)),v(e),e},e.open=function(t,e){var r=s(e),n=r[0];e=r[1];var i=l(t,"f-");return a.open(i,o,parseInt("0600",8),(function(t,r){t||g(i),e(t,{path:i,fd:r})})),n},e.openSync=function(t){var e=l(t,"f-"),r=a.openSync(e,o,parseInt("0600",8));return g(e),{path:e,fd:r}},e.path=l,e.cleanup=function(t){var e=s(t),r=e[0];return t=e[1],p?(function(t){var e=s(t),r=e[0];if(t=e[1],!p)return t(new Error("not tracking")),r;var n,i=0,o=f.length;if(!o)return t(null,i),r;for(var a=function(e){if(o){if(e)return t(e),void(o=0);i++,--o||t(null,i)}};void 0!==(n=f.shift());)Na(n,a)}((function(e,r){e?t(e,{files:r}):function(t){var e=s(t),r=e[0];if(t=e[1],!p)return t(new Error("not tracking")),r;var n,i=0,o=m.length;if(!o)return t(null,i),r;for(var a=function(e){if(o){if(e)return t(e,i),void(o=0);i++,--o||t(null,i)}};void 0!==(n=m.shift());)Na(n,a)}((function(e,n){t(e,{files:r,dirs:n})}))})),r):(t(new Error("not tracking")),r)},e.cleanupSync=b,e.createWriteStream=function(t){var e=l(t,"s-"),r=a.createWriteStream(e,{flags:o,mode:parseInt("0600",8)});return g(e),r}})),Ka=(Qa.dir,Qa.track,Qa.mkdir,Qa.mkdirSync,Qa.open);Qa.openSync,Qa.path,Qa.cleanup,Qa.cleanupSync,Qa.createWriteStream;async function Xa({command:t,args:e,cwd:r,stdin:n}){return new Promise((i,o)=>{try{const s=d.execFile(t,e,{cwd:r},(t,e,r)=>{t?o({error:t,stderr:r}):i({stdout:e,stderr:r})});void 0!==n&&(s.stdin.write(n),s.stdin.end())}catch(t){console.error(t),o(t)}})}async function Ya(t){return new Promise((e,r)=>{s.readFile(t,{encoding:"utf-8"},(t,n)=>{t?(console.error(t),r(t)):e(n)})})}async function Za(t,e,r){const{path:n,fd:i}=await async function(t){return new Promise((e,r)=>{Ka({prefix:"ide-haskell",suffix:".cabal"},(n,i)=>{if(n)return console.error(n),r(n);s.writeSync(i.fd,t),e(i)})})}(t);try{const t=atom.config.get("ide-haskell.cabalPath",{scope:r}),{stderr:o}=await Xa({command:t,args:["format",n],cwd:e});return{stdout:await Ya(n),stderr:o}}finally{s.close(i,Ja),s.unlink(n,Ja)}}function Ja(t){t&&atom.notifications.addError(t.name,{detail:t.message,dismissable:!0})}async function tc(t,e,r){return Xa({command:atom.config.get("ide-haskell.stylishHaskellPath",{scope:r}),args:atom.config.get("ide-haskell.stylishHaskellArguments",{scope:r}),cwd:e,stdin:t})}async function ec(t){const[e,...r]=t.getCursors().map(t=>t.getBufferPosition()),n="source.cabal"===t.getGrammar().scopeName?Za:tc,i=(await o.getRootDir(t.getBuffer())).getPath();try{const{stdout:o,stderr:s}=await n(t.getText(),i,t.getRootScopeDescriptor());t.setText(o);const a=t.getLastCursor();a&&a.setBufferPosition(e,{autoscroll:!1}),r.forEach(e=>{t.addCursorAtBufferPosition(e,{autoscroll:!1})}),s.length>0&&atom.notifications.addWarning("Prettifier reported the following problems:",{detail:s,dismissable:!0})}catch(t){const e=t.error||t;let r=t.stderr?t.stderr.trim():"";e.message.includes(r)&&(r=""),atom.notifications.addError("Failed to prettify",{detail:`${r?r+"\n\n":""}${e.message}`,stack:e.stack,dismissable:!0})}}class rc{constructor(t){this.editor=t,this.disposables=new e.CompositeDisposable,this.prettify=async()=>{if(atom.config.get("ide-haskell.onSavePrettify",{scope:this.editor.getRootScopeDescriptor()})){const t=this.editor.getGrammar().scopeName.replace(/\./g,"*");if(!atom.config.get("ide-haskell.onSavePrettifyFormats",{scope:this.editor.getRootScopeDescriptor()})[t])return;await ec(this.editor)}};const r=this.editor.getBuffer();this.disposables.add(r.onWillSave(this.prettify))}static supportsGrammar(t){return["source.c2hs","source.cabal","source.hsc2hs","source.haskell","text.tex.latex.haskell","source.hsig"].includes(t)}destroy(){this.disposables.dispose()}}class nc{constructor(t){this.editor=t,this.editorElement=atom.views.getView(this.editor),this.editorElement.classList.add("ide-haskell")}static supportsGrammar(t){return["source.c2hs","source.cabal","source.hsc2hs","source.haskell","text.tex.latex.haskell","source.hsig"].includes(t)}destroy(){this.editorElement.classList.remove("ide-haskell")}}class ic{constructor(t){this.props=t,this.disposables=new e.CompositeDisposable,qi(this),this.disposables.add(atom.tooltips.add(this.element,{class:"ide-haskell-status-tooltip",title:()=>{const t=[];for(const[e,{status:r,detail:n}]of this.props.statusMap.entries())t.push(`\n          <ide-haskell-status-item>\n            <ide-haskell-status-icon data-status="${r}">${e}</ide-haskell-status-icon>\n            <ide-haskell-status-detail>${n||""}</ide-haskell-status-detail>\n          </ide-haskell-status-item>\n          `);return t.join("")}}))}render(){return zi("ide-haskell-status-icon",{dataset:{status:this.calcCurrentStatus()}})}async update(t){return this.props.statusMap=t.statusMap,$i(this)}async destroy(){await Vi(this),this.props.statusMap.clear()}calcCurrentStatus(){const t={progress:50,error:20,warning:10,ready:0},e=Array.from(this.props.statusMap.values());if(0===e.length)return"ready";const[r]=e.sort((e,r)=>t[r.status]-t[e.status]);return r.status}}class oc{constructor(t){this.props=t,qi(this)}render(){const t=this.aveProgress();return isNaN(t)?zi("progress",{style:{display:"none"}}):zi("progress",0===t?null:{value:t.toString(),max:"1"})}async update(t){return this.props.progress!==t.progress?(this.props.progress=t.progress,$i(this)):Promise.resolve()}async destroy(){await Vi(this)}aveProgress(){return this.props.progress.reduce((t,e)=>t+e,0)/this.props.progress.length}}class sc{constructor(){this.statusMap=new Map,this.awaiters=new Map,this.emitter=new e.Emitter}getAwaiter(t){let e=this.awaiters.get(t);void 0===e&&(e=new Set,this.awaiters.set(t,e));const r=e;return async e=>{let n;try{n=Promise.resolve().then(e),r.add(n),this.updateStatus(t,{status:"progress",detail:""});const i=await n;return r.delete(n),0===r.size&&this.updateStatus(t,{status:"ready",detail:""}),i}catch(e){return n&&r.delete(n),this.updateStatus(t,{status:"warning",detail:""+e}),void console.warn(e)}}}forceBackendStatus(t,e){this.updateStatus(t,e)}onDidUpdate(t){return this.emitter.on("did-update",t)}renderStatusIcon(){return zi(ic,{statusMap:this.statusMap})}renderProgressBar(){const t=Array.from(this.statusMap.values()).reduce((t,e)=>("progress"===e.status&&void 0!==e.progress&&t.push(e.progress),t),[]);return zi(oc,{progress:t})}updateStatus(t,e){this.statusMap.set(t,e),this.emitter.emit("did-update",{pluginName:t,status:e})}}class ac{constructor(t,r){this.outputPanel=r,this.disposables=new e.CompositeDisposable,this.emitter=new e.Emitter,this.willSaveHandlers=new Set,this.controllers=new Map,this.backendStatusController=new sc,this.onWillSaveBuffer=t=>(this.willSaveHandlers.add(t),new e.Disposable(()=>this.willSaveHandlers.delete(t))),this.onDidSaveBuffer=t=>this.emitter.on("did-save-buffer",t),this.onDidStopChanging=t=>this.emitter.on("did-stop-changing",t),this.disposables.add(this.emitter),this.resultsDB=new ti,this.outputPanel.connectResults(this.resultsDB),this.outputPanel.connectBsc(this.backendStatusController),this.tooltipRegistry=new Qo(this),this.configParamManager=new qo(this.outputPanel,t.configParams),this.disposables.add(this.addEditorController(Ho),this.addEditorController(rc),this.addEditorController(nc)),"builtin"===atom.config.get("ide-haskell.messageDisplayFrontend")&&(this.checkResultsProvider=new Xo(this)),this.subscribeEditorController()}deactivate(){this.resultsDB.destroy(),this.disposables.dispose(),this.checkResultsProvider&&this.checkResultsProvider.destroy(),Yn(this.outputPanel.reallyDestroy()),this.configParamManager.destroy(),this.removeStatusBar(),this.linterSupport&&(this.linterSupport.destroy(),this.linterSupport=void 0)}serialize(){return{configParams:this.configParamManager.serialize()}}async willSaveBuffer(t){return Promise.all(Array.from(this.willSaveHandlers.values()).map(e=>e(t)))}didSaveBuffer(t){return this.emitter.emit("did-save-buffer",t)}didStopChanging(t){return this.emitter.emit("did-stop-changing",t)}togglePanel(){Yn(atom.workspace.toggle(this.outputPanel))}controller(t){return this.controllerType(Ho,t)}controllerType(t,e){const r=this.controllers.get(t),n=r?r.get(e):void 0;return n?n.controller:void 0}setLinter(t){"linter"===atom.config.get("ide-haskell.messageDisplayFrontend")&&(this.linterSupport=new Wo(t,this.resultsDB))}nextError(){"builtin"===atom.config.get("ide-haskell.messageDisplayFrontend")&&this.outputPanel.showNextError()}prevError(){"builtin"===atom.config.get("ide-haskell.messageDisplayFrontend")&&this.outputPanel.showPrevError()}forceBackendStatus(t,e){this.backendStatusController.forceBackendStatus(t,e)}getAwaiter(t){return this.backendStatusController.getAwaiter(t)}addEditorController(t){if(this.controllers.has(t))throw new Error("Duplicate controller factory "+t.toString());const r=new WeakMap;return this.controllers.set(t,r),new e.Disposable(()=>{this.controllers.delete(t);for(const t of atom.workspace.getTextEditors()){const e=r.get(t);e&&e.disposable.dispose()}})}setStatusBar(t){this.statusBarView=new Yo(this.outputPanel,this.backendStatusController),this.statusBarTile=t.addRightTile({item:this.statusBarView.element,priority:100})}removeStatusBar(){this.statusBarTile&&(this.statusBarTile.destroy(),this.statusBarTile=void 0),this.statusBarView&&(this.statusBarView.destroy(),this.statusBarView=void 0)}controllerOnGrammar(t,r){for(const[n,i]of this.controllers.entries()){const o=i.get(t);if(!o&&n.supportsGrammar(r.scopeName)){const r=new n(t,this),o=new e.CompositeDisposable;o.add(new e.Disposable(()=>{i.delete(t),r.destroy()}),t.onDidDestroy(()=>o.dispose())),i.set(t,{controller:r,disposable:o})}else o&&!n.supportsGrammar(r.scopeName)&&o.disposable.dispose()}}subscribeEditorController(){this.disposables.add(atom.workspace.observeTextEditors(t=>{const r=new e.CompositeDisposable;r.add(t.onDidChangeGrammar(e=>{this.controllerOnGrammar(t,e)}),t.onDidDestroy(()=>{r.dispose(),this.disposables.remove(r)})),this.disposables.add(r),this.controllerOnGrammar(t,t.getGrammar())}))}}function cc(t,r,n){const{name:i,menu:o,messageTypes:s,events:a,controls:c,params:l,tooltip:u,commands:p}=r,h=new e.CompositeDisposable;let d;function f(t,r){if(Array.isArray(t)){const n=new e.CompositeDisposable;for(const e of t)n.add(r(g(e)));return n}return r(g(t))}const m=t.getAwaiter(i);function g(t){return function(...e){Yn(m(()=>t(...e)).then(async t=>{if(d&&void 0!==t)if(Array.isArray(t))d.setMessages(t);else{const e=[];for await(const r of t)e.push(r),d.setMessages(e)}}))}}if(o){const t=atom.menu.add([{label:"Haskell IDE",submenu:[{label:o.label,submenu:o.menu}]}]);h.add(t)}if(s){n.eventsReturnResults&&(d=t.resultsDB.registerProvider(Object.keys(s)));for(const r of Object.keys(s)){const n=s[r];Yn(t.outputPanel.createTab(r,n)),h.add(new e.Disposable((function(){Yn(t.outputPanel.removeTab(r))})))}}if(a&&(a.onWillSaveBuffer&&h.add(f(a.onWillSaveBuffer,t.onWillSaveBuffer)),a.onDidSaveBuffer&&h.add(f(a.onDidSaveBuffer,t.onDidSaveBuffer)),a.onDidStopChanging&&h.add(f(a.onDidStopChanging,t.onDidStopChanging))),u){let e,r,n;"function"==typeof u?e=u:({handler:e,priority:r,eventTypes:n}=u),void 0===r&&(r=100),h.add(t.tooltipRegistry.register(i,{priority:r,handler:e,eventTypes:n}))}if(c)for(const e of c)h.add(t.outputPanel.addPanelControl(e));if(l)for(const e of Object.keys(l)){const r=l[e];h.add(t.configParamManager.add(i,e,r))}if(n.supportsCommands&&p)for(const[t,e]of Object.entries(p))if(void 0!==e)for(const[r,n]of Object.entries(e))h.add(atom.commands.add(t,r,(function(t){g(n)(t.currentTarget)})));return h}var lc=e.CompositeDisposable;function uc(t,e,r){const n=e.name,i=new lc,o=t.resultsDB.registerProvider(void 0!==e.messageTypes?Object.keys(e.messageTypes):[]);return i.add(o),i.add(cc(t,e,r)),{setMenu(t,e){const r=atom.menu.add([{label:"Haskell IDE",submenu:[{label:t,submenu:e}]}]);return i.add(r),r},setStatus:e=>t.forceBackendStatus(n,e),setMessages(t){o.setMessages(t)},addMessageTab:async(e,r)=>t.outputPanel.createTab(e,r),showTooltip:async({editor:e,eventType:r,detail:i,tooltip:o})=>(void 0===r&&(r=Kn(i)),t.tooltipRegistry.showTooltip(e,r,{pluginName:n,tooltip:o})),addPanelControl:e=>t.outputPanel.addPanelControl(e),addConfigParam:(e,r)=>t.configParamManager.add(n,e,r),getConfigParam:async e=>t.configParamManager.get(n,e),getOthersConfigParam:async(e,r)=>t.configParamManager.get(e,r),setConfigParam:async(e,r)=>t.configParamManager.set(n,e,r),getEventRange(e,r){let n;var i;n="string"==typeof(i=r)&&F.includes(i)?r:Kn(r);const o=t.controller(e);if(o)return o.getEventRange(n)},dispose(){i.dispose()}}}class pc{constructor(t){this.props=t,qi(this)}render(){return zi("ide-haskell-button",{class:this.props.active?"active":"",dataset:{caption:this.props.name,count:this.props.count},on:{click:this.props.onClick}})}async update(t){return this.props=t,$i(this)}async destroy(){await Vi(this)}}class hc{constructor(t){this.props=t,qi(this)}render(){return zi("ide-haskell-panel-buttons",null,Array.from(this.renderButtons()))}async update(t){return this.props=t,$i(this)}*renderButtons(){for(const t of this.props.buttons)yield zi(pc,{active:t.name===this.props.activeBtn,name:t.name,count:t.count,onClick:t.onClick})}}class dc{constructor(t){this.props=t,this.tooltipTitle=()=>this.props.state?this.props.enabledHint:this.props.disabledHint,this.disposables=new e.CompositeDisposable,qi(this),this.disposables.add(atom.tooltips.add(this.element,{title:this.tooltipTitle}))}render(){return zi("ide-haskell-checkbox",{class:`${this.props.class}${this.props.state?" enabled":""}`,on:{click:this.props.onSwitched}})}async update(t={}){return this.props={...this.props,...t},$i(this)}async destroy(){await Vi(this),this.disposables.dispose()}}class fc{constructor(t){this.props=t,this.clickPosition=()=>{void 0!==this.props.model.uri&&Yn(atom.workspace.open(this.props.model.uri,{searchAllPanes:!0,initialLine:this.props.model.position&&this.props.model.position.row,initialColumn:this.props.model.position&&this.props.model.position.column}))},qi(this)}render(){return zi("ide-haskell-panel-item",{key:this.props.model.hash()},this.renderPosition(),this.renderContext(),zi("ide-haskell-item-description",{innerHTML:this.props.model.message.toHtml()}))}async update(t){return this.props.model=t.model,$i(this)}async destroy(){await Vi(this)}renderPosition(){if(void 0!==this.props.model.uri){const t=this.props.model.position?`${this.props.model.uri}: ${this.props.model.position.row+1}, ${this.props.model.position.column+1}`:this.props.model.uri;return zi("ide-haskell-item-position",{on:{click:this.clickPosition}},t)}return""}renderContext(){return void 0!==this.props.model.context?zi("ide-haskell-item-context",null,this.props.model.context):""}}class mc{constructor(t){this.props=t,this.itemMap=new WeakMap,qi(this)}render(){return zi("ide-haskell-panel-items",{class:"native-key-bindings",tabIndex:"-1"},this.renderItems())}async update(t){return this.props=t,$i(this)}async destroy(){await Vi(this)}async showItem(t){await $i(this);const e=this.itemMap.get(t);e&&(e.component.clickPosition(),e.domNode.scrollIntoView({block:"start",behavior:"smooth"}))}async scrollToEnd(){await $i(this),this.element.scrollTop=this.element.scrollHeight}atEnd(){return this.element.scrollTop>=this.element.scrollHeight-this.element.clientHeight}renderItems(){const t=this.props.filter?this.props.model.filter(this.props.filter):this.props.model.results();return Array.from(t).map(t=>{const e=zi(fc,{model:t});return this.itemMap.set(t,e),e})}}class gc{constructor(t={fileFilter:!1,activeTab:"error"}){if(this.state=t,this.elements=new Set,this.disposables=new e.CompositeDisposable,this.tabs=new Map,this.tabUsers=new Map,this.currentResult=0,this.switchFileFilter=()=>{this.state.fileFilter=!this.state.fileFilter,Yn(this.updateItems())},this.setButtonsClass(atom.config.get("ide-haskell.buttonsPosition")),qi(this),atom.config.onDidChange("ide-haskell.buttonsPosition",({newValue:t})=>{this.setButtonsClass(t),Yn(this.update())}),"builtin"===atom.config.get("ide-haskell.messageDisplayFrontend"))for(const t of gc.defaultTabs)this.tabs.set(t,{name:t,count:0,onClick:()=>this.activateTab(t),uriFilter:!0,autoScroll:!1});Yn(this.update()),this.disposables.add(atom.workspace.onDidChangeActivePaneItem(()=>{this.state.fileFilter&&Yn(this.updateItems())})),setImmediate(async()=>{await this.show(),atom.config.get("ide-haskell.autoHideOutput")&&this.hide()})}connectBsc(t){if(this.bsc)throw new Error("BackendStatusController already connected!");this.bsc=t,this.disposables.add(this.bsc.onDidUpdate(()=>Yn(this.update()))),Yn(this.update())}connectResults(t){if(this.results)throw new Error("Results already connected!");this.results=t;let e=Date.now(),r=new Set;this.disposables.add(this.results.onDidUpdate(t=>{this.currentResult=0,Yn(this.updateItems());const n=Date.now();if(n-e<atom.config.get("ide-haskell.switchTabOnCheckInterval"))for(const e of t)r.add(e);else r=new Set(t);!atom.config.get("ide-haskell.autoHideOutput")||this.results&&!this.results.isEmpty(t)?atom.config.get("ide-haskell.switchTabOnCheck")&&this.activateFirstNonEmptyTab(r):this.hide(),e=n})),Yn(this.update())}render(){var t,e;return this.results?zi("ide-haskell-panel",{class:this.buttonsClass},zi("ide-haskell-panel-heading",null,(null===(t=this.bsc)||void 0===t?void 0:t.renderStatusIcon())||null,zi(hc,{buttons:Array.from(this.tabs.values()),activeBtn:this.state.activeTab}),zi(dc,{class:"ide-haskell-checkbox--uri-filter",state:this.state.fileFilter||!1,onSwitched:this.switchFileFilter,enabledHint:"Show current file messages",disabledHint:"Show all project messages"}),Array.from(this.elements.values()),(null===(e=this.bsc)||void 0===e?void 0:e.renderProgressBar())||null),zi(mc,{model:this.results,filter:this.itemFilter,ref:"items"})):zi("ide-haskell-panel",null)}async update(){return $i(this)}destroy(){this.hide()}async reallyDestroy(){await Vi(this),this.disposables.dispose()}async toggle(){const t=atom.workspace.paneContainerForItem(this);return!t||R(t)&&!t.isVisible()?this.show():this.hide()}async show(){await atom.workspace.open(this,{searchAllPanes:!0,activatePane:!1});const t=atom.workspace.paneContainerForItem(this);t&&R(t)&&t.show()}hide(){const t=atom.workspace.paneContainerForItem(this);t&&R(t)&&atom.workspace.hide(this)}getTitle(){return"IDE-Haskell"}getURI(){return"ide-haskell://output-panel/"}getDefaultLocation(){return atom.config.get("ide-haskell.panelPosition")}addPanelControl(t){let r;if(function(t){return"string"==typeof t.element}(t)){const{events:e,classes:n,style:i,attrs:o}=t.opts,s={};n&&(s.class=n.join(" ")),i&&(s.style=i),o&&(s.attributes=o),e&&(s.on=e),r=zi(t.element,s)}else r=zi(t.element,t.opts);return this.elements.add(r),Yn(this.update()),new e.Disposable(()=>{this.elements.delete(r),Yn(this.update())})}async updateItems(){const t=this.getActiveTab();let e;if(this.state.fileFilter){const t=atom.workspace.getActiveTextEditor();e=t?t.getPath():void 0}let r=!1;if(t){const n=this.tabs.get(t);void 0!==e&&n&&n.uriFilter?this.itemFilter=({uri:r,severity:n})=>n===t&&r===e:this.itemFilter=({severity:e})=>e===t,r=n&&n.autoScroll&&this.refs.items&&this.refs.items.atEnd()||!1}if(this.results)for(const[t,e]of this.tabs.entries())e.count=Array.from(this.results.filter(({severity:e})=>e===t)).length;await this.update(),r&&this.refs.items&&await this.refs.items.scrollToEnd()}activateTab(t){this.state.activeTab=t,Yn(this.updateItems())}activateFirstNonEmptyTab(t){for(const e of this.tabs.values()){if(!t.has(e.name))continue;const r=e.count;if(r&&r>0){Yn(this.show()),this.activateTab(e.name);break}}}showItem(t){this.activateTab(t.severity),this.refs.items&&Yn(this.refs.items.showItem(t))}getActiveTab(){return this.state.activeTab}async createTab(t,{uriFilter:e=!0,autoScroll:r=!1}){if(!gc.defaultTabs.includes(t))return this.tabs.has(t)?this.tabUsers.set(t,this.tabUsers.get(t)+1):(this.tabUsers.set(t,1),this.tabs.set(t,{name:t,count:0,onClick:()=>this.activateTab(t),uriFilter:e,autoScroll:r}),this.state.activeTab&&this.activateTab(this.state.activeTab)),this.update()}async removeTab(t){if(!gc.defaultTabs.includes(t)){if(!this.tabUsers.has(t))throw new Error("Ide-Haskell: Removing nonexistent output panel tab "+t);{let e=this.tabUsers.get(t);if(e-=1,0===e)return this.tabUsers.delete(t),this.tabs.delete(t),this.state.activeTab===t&&(this.state.activeTab=gc.defaultTabs[0]),this.update();this.tabUsers.set(t,e)}}}serialize(){return{...this.state,deserializer:"ide-haskell/OutputPanel"}}showNextError(){if(!this.results)return;const t=Array.from(this.results.filter(({uri:t})=>void 0!==t));0!==t.length&&(this.currentResult++,this.currentResult>=t.length&&(this.currentResult=0),this.showItem(t[this.currentResult]))}showPrevError(){if(!this.results)return;const t=Array.from(this.results.filter(({uri:t})=>void 0!==t));0!==t.length&&(this.currentResult--,this.currentResult<0&&(this.currentResult=t.length-1),this.showItem(t[this.currentResult]))}setButtonsClass(t){switch(t){case"top":this.buttonsClass="buttons-top";break;case"left":this.buttonsClass="buttons-left"}}}gc.defaultTabs=["error","warning","lint"];var vc=e.CompositeDisposable,yc=e.Disposable;let bc,wc,kc,_c,xc=!1;function Sc(t){return kc||(kc=new gc(t)),kc}function Ec(t={}){return function(){return xc=!0,e=>{if(!wc)throw new Error("IDE-Haskell failed to provide UPI instance: pluginManager is undefined");return uc(wc,e,t)}}}const Oc=Ec(),Pc=Ec({eventsReturnResults:!0}),Mc=Ec({eventsReturnResults:!0,supportsCommands:!0});function Ac(t={}){return function(e){if(xc=!0,wc)return cc(wc,e,t)}}const jc=Ac({}),Tc=Ac({eventsReturnResults:!0}),Cc=Ac({eventsReturnResults:!0,supportsCommands:!0});exports.activate=function(t){atom.views.getView(atom.workspace).classList.add("ide-haskell"),require("etch").setScheduler(atom.views),xc=!1,atom.config.get("ide-haskell.startupMessageIdeBackend")&&setTimeout(()=>{xc||atom.notifications.addWarning("Ide-Haskell needs backends that provide most of functionality.\n            Please refer to README for details",{dismissable:!0})},5e3),bc=new vc,wc=new ac(t,Sc()),bc.add(atom.commands.add("atom-workspace",{"ide-haskell:toggle-output":()=>{wc&&wc.togglePanel()},"ide-haskell:next-error":()=>{wc&&wc.nextError()},"ide-haskell:prev-error":()=>{wc&&wc.prevError()}}),atom.commands.add("atom-text-editor.ide-haskell",{"ide-haskell:prettify-file":({currentTarget:t})=>{Yn(ec(t.getModel()))}}),atom.commands.add("atom-text-editor.ide-haskell--has-tooltips",{"ide-haskell:close-tooltip":({currentTarget:t,abortKeyBinding:e})=>{const r=wc&&wc.controller(t.getModel());r&&r.tooltips.has()?r.tooltips.hide():e()}})),_c=new vc,_c.add(atom.menu.add([{label:"Haskell IDE",submenu:[{label:"Prettify",command:"ide-haskell:prettify-file"},{label:"Toggle Panel",command:"ide-haskell:toggle-output"}]}]))},exports.consumeLinter=function(t){if(!bc||!wc)return;const e=t({name:"IDE-Haskell"});return bc.add(e),wc.setLinter(e),e},exports.consumeStatusBar=function(t){if(wc)return wc.setStatusBar(t),new yc(()=>{wc&&wc.removeStatusBar()})},exports.consumeUpi3_0=jc,exports.consumeUpi3_1=Tc,exports.consumeUpi3_2=Cc,exports.deactivate=function(){wc&&wc.deactivate(),bc&&bc.dispose(),_c&&_c.dispose(),atom.menu.update(),bc=void 0,wc=void 0,_c=void 0,kc=void 0},exports.deserializeOutputPanel=Sc,exports.provideUpi3_0=Oc,exports.provideUpi3_1=Pc,exports.provideUpi3_2=Mc,exports.serialize=function(){if(wc)return wc.serialize()};
//# sourceMappingURL=main.js.map
