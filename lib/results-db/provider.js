"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const result_item_1 = require("./result-item");
class Provider {
    constructor(parent, providerSeverities, id) {
        this.parent = parent;
        this.providerSeverities = providerSeverities;
        this.id = id;
        this.disposed = false;
    }
    dispose() {
        if (this.disposed) {
            return;
        }
        this.disposed = true;
        this.parent.didUpdate(this.id, Array.from(this.providerSeverities), []);
    }
    addSeverity(name) {
        this.providerSeverities.add(name);
    }
    removeSeverity(name) {
        this.providerSeverities.delete(name);
    }
    setMessages(messages) {
        if (this.disposed) {
            return;
        }
        const msgs = messages.map((m) => new result_item_1.ResultItem(this.id, m));
        this.parent.didUpdate(this.id, Array.from(this.providerSeverities), msgs);
    }
}
exports.Provider = Provider;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicHJvdmlkZXIuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvcmVzdWx0cy1kYi9wcm92aWRlci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLCtDQUEwQztBQVExQyxNQUFhLFFBQVE7SUFFbkIsWUFDVSxNQUFpQixFQUNqQixrQkFBc0MsRUFDOUIsRUFBVTtRQUZsQixXQUFNLEdBQU4sTUFBTSxDQUFXO1FBQ2pCLHVCQUFrQixHQUFsQixrQkFBa0IsQ0FBb0I7UUFDOUIsT0FBRSxHQUFGLEVBQUUsQ0FBUTtRQUUxQixJQUFJLENBQUMsUUFBUSxHQUFHLEtBQUssQ0FBQTtJQUN2QixDQUFDO0lBRU0sT0FBTztRQUNaLElBQUksSUFBSSxDQUFDLFFBQVEsRUFBRTtZQUNqQixPQUFNO1NBQ1A7UUFDRCxJQUFJLENBQUMsUUFBUSxHQUFHLElBQUksQ0FBQTtRQUNwQixJQUFJLENBQUMsTUFBTSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsRUFBRSxFQUFFLEtBQUssQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLGtCQUFrQixDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUE7SUFDekUsQ0FBQztJQUVNLFdBQVcsQ0FBQyxJQUFtQjtRQUNwQyxJQUFJLENBQUMsa0JBQWtCLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxDQUFBO0lBQ25DLENBQUM7SUFFTSxjQUFjLENBQUMsSUFBbUI7UUFDdkMsSUFBSSxDQUFDLGtCQUFrQixDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQTtJQUN0QyxDQUFDO0lBRU0sV0FBVyxDQUFDLFFBQXdDO1FBQ3pELElBQUksSUFBSSxDQUFDLFFBQVEsRUFBRTtZQUNqQixPQUFNO1NBQ1A7UUFDRCxNQUFNLElBQUksR0FBRyxRQUFRLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxJQUFJLHdCQUFVLENBQUMsSUFBSSxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFBO1FBQzVELElBQUksQ0FBQyxNQUFNLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxFQUFFLEVBQUUsS0FBSyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsa0JBQWtCLENBQUMsRUFBRSxJQUFJLENBQUMsQ0FBQTtJQUMzRSxDQUFDO0NBQ0Y7QUFqQ0QsNEJBaUNDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUmVzdWx0SXRlbSB9IGZyb20gJy4vcmVzdWx0LWl0ZW0nXG5pbXBvcnQgeyBSZXN1bHRzREIgfSBmcm9tICcuLydcbmltcG9ydCAqIGFzIFVQSSBmcm9tICdhdG9tLWhhc2tlbGwtdXBpJ1xuXG5leHBvcnQgdHlwZSBUTWVzc2FnZVByb3ZpZGVyRnVuY3Rpb24gPSAoXG4gIHB1c2hNZXNzYWdlczogKG1lc3NhZ2VzOiBVUEkuSVJlc3VsdEl0ZW1bXSkgPT4gdm9pZCxcbikgPT4gdm9pZFxuXG5leHBvcnQgY2xhc3MgUHJvdmlkZXIge1xuICBwcml2YXRlIGRpc3Bvc2VkOiBib29sZWFuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHByaXZhdGUgcGFyZW50OiBSZXN1bHRzREIsXG4gICAgcHJpdmF0ZSBwcm92aWRlclNldmVyaXRpZXM6IFNldDxVUEkuVFNldmVyaXR5PixcbiAgICBwdWJsaWMgcmVhZG9ubHkgaWQ6IG51bWJlcixcbiAgKSB7XG4gICAgdGhpcy5kaXNwb3NlZCA9IGZhbHNlXG4gIH1cblxuICBwdWJsaWMgZGlzcG9zZSgpIHtcbiAgICBpZiAodGhpcy5kaXNwb3NlZCkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIHRoaXMuZGlzcG9zZWQgPSB0cnVlXG4gICAgdGhpcy5wYXJlbnQuZGlkVXBkYXRlKHRoaXMuaWQsIEFycmF5LmZyb20odGhpcy5wcm92aWRlclNldmVyaXRpZXMpLCBbXSlcbiAgfVxuXG4gIHB1YmxpYyBhZGRTZXZlcml0eShuYW1lOiBVUEkuVFNldmVyaXR5KSB7XG4gICAgdGhpcy5wcm92aWRlclNldmVyaXRpZXMuYWRkKG5hbWUpXG4gIH1cblxuICBwdWJsaWMgcmVtb3ZlU2V2ZXJpdHkobmFtZTogVVBJLlRTZXZlcml0eSkge1xuICAgIHRoaXMucHJvdmlkZXJTZXZlcml0aWVzLmRlbGV0ZShuYW1lKVxuICB9XG5cbiAgcHVibGljIHNldE1lc3NhZ2VzKG1lc3NhZ2VzOiBSZWFkb25seUFycmF5PFVQSS5JUmVzdWx0SXRlbT4pOiB2b2lkIHtcbiAgICBpZiAodGhpcy5kaXNwb3NlZCkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIGNvbnN0IG1zZ3MgPSBtZXNzYWdlcy5tYXAoKG0pID0+IG5ldyBSZXN1bHRJdGVtKHRoaXMuaWQsIG0pKVxuICAgIHRoaXMucGFyZW50LmRpZFVwZGF0ZSh0aGlzLmlkLCBBcnJheS5mcm9tKHRoaXMucHJvdmlkZXJTZXZlcml0aWVzKSwgbXNncylcbiAgfVxufVxuIl19